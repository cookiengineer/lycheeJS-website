<!DOCTYPE html>
<html manifest="index.appcache">
<head>
	<meta charset="utf-8">
	<title>/projects/flappy-bnn/main</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<link rel="manifest" href="./manifest.json">
	<link rel="icon" href="./icon.png" sizes="128x128" type="image/png">

	<script src="./core.js"></script>

	<style>
		.lychee-Renderer-canvas {
			margin: 0 auto;
		}
	</style>

</head>
<body>
<script>
(function(lychee, global) {

	let environment = lychee.deserialize({"constructor":"lychee.Environment","arguments":[{"id":"/projects/flappy-bnn/main","debug":false,"timeout":5000,"target":"game.Main","type":"build","tags":{"platform":["html"]}}],"blob":{"definitions":{"game.Main":{"constructor":"lychee.Definition","arguments":[{"id":"game.Main","url":"/projects/flappy-bnn/source/Main.js"}],"blob":{"attaches":{},"requires":["game.state.Game"],"includes":["lychee.app.Main"],"exports":"function(lychee, global, attachments) {\n\n\tconst _game = lychee.import('game');\n\tconst _Main = lychee.import('lychee.app.Main');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({\n\n\t\t\tclient:  null,\n\t\t\tinput:   null,\n\t\t\tserver:  null,\n\t\t\tstash:   null,\n\t\t\tstorage: null,\n\n\t\t\tjukebox: {\n\t\t\t\tmusic: false,\n\t\t\t\tsound: true\n\t\t\t},\n\n\t\t\trenderer: {\n\t\t\t\twidth:  1024,\n\t\t\t\theight: 512\n\t\t\t},\n\n\t\t\tviewport: {\n\t\t\t\tfullscreen: false\n\t\t\t}\n\n\t\t}, data);\n\n\n\t\t_Main.call(this, states);\n\n\t\tstates = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('load', function(oncomplete) {\n\t\t\toncomplete(true);\n\t\t}, this, true);\n\n\t\tthis.bind('init', function() {\n\n\t\t\tlet viewport = this.viewport || null;\n\t\t\tif (viewport !== null) {\n\t\t\t\t// viewport.unbind('hide');\n\t\t\t\t// viewport.unbind('show');\n\t\t\t}\n\n\n\t\t\tthis.setState('game', new _game.state.Game(this));\n\t\t\tthis.changeState('game');\n\n\t\t}, this, true);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Main.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.Main';\n\n\n\t\t\tlet states = data['arguments'][0] || {};\n\t\t\tlet blob   = data['blob'] || {};\n\n\n\t\t\tdata['arguments'][0] = states;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Main":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.app.Main","url":"/libraries/lychee/source/app/Main.js"}],"blob":{"attaches":{},"requires":["lychee.Input","lychee.Renderer","lychee.Stash","lychee.Storage","lychee.Viewport","lychee.event.Flow","lychee.app.Jukebox","lychee.app.Loop","lychee.app.State","lychee.net.Client","lychee.net.Server"],"includes":["lychee.event.Emitter"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Client   = lychee.import('lychee.net.Client');\n\tconst _Emitter  = lychee.import('lychee.event.Emitter');\n\tconst _Flow     = lychee.import('lychee.event.Flow');\n\tconst _Input    = lychee.import('lychee.Input');\n\tconst _Jukebox  = lychee.import('lychee.app.Jukebox');\n\tconst _Loop     = lychee.import('lychee.app.Loop');\n\tconst _Renderer = lychee.import('lychee.Renderer');\n\tconst _Server   = lychee.import('lychee.net.Server');\n\tconst _Stash    = lychee.import('lychee.Stash');\n\tconst _State    = lychee.import('lychee.app.State');\n\tconst _Storage  = lychee.import('lychee.Storage');\n\tconst _Viewport = lychee.import('lychee.Viewport');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _API_ORIGIN = (function(location) {\n\n\t\tlet hostname = location.hostname || '';\n\t\tlet origin   = location.origin   || '';\n\t\tlet proto    = origin.split(':')[0];\n\n\t\tif (/app|file|chrome-extension/g.test(proto)) {\n\n\t\t\treturn 'http://harvester.artificial.engineering:4848';\n\n\t\t} else if (hostname === 'localhost') {\n\n\t\t\treturn 'http://localhost:4848';\n\n\t\t} else if (/http|https/g.test(proto)) {\n\n\t\t\treturn 'http://' + hostname + ':4848';\n\n\t\t} else {\n\n\t\t\treturn '';\n\n\t\t}\n\n\t})(global.location || {});\n\n\tconst _load_api = function(url, callback, scope) {\n\n\t\turl = typeof url === 'string' ? url : '/api/server/connect?identifier=boilerplate';\n\n\n\t\tif (/^(http|https):\\/\\//g.test(url) === false) {\n\t\t\turl = _API_ORIGIN + url;\n\t\t}\n\n\n\t\tlet config = new Config(url);\n\n\t\tconfig.onload = function(result) {\n\t\t\tcallback.call(scope, result === true ? this.buffer : null);\n\t\t};\n\n\t\tconfig.load();\n\n\t};\n\n\tconst _initialize = function() {\n\n\t\tlet settings = this.settings;\n\n\t\tif (settings.client !== null) {\n\t\t\tthis.client = new _Client(settings.client);\n\t\t\tthis.client.connect();\n\t\t}\n\n\t\tif (settings.server !== null) {\n\t\t\tthis.server = new _Server(settings.server);\n\t\t\tthis.server.connect();\n\t\t}\n\n\t\tif (settings.input !== null) {\n\t\t\tthis.input = new _Input(settings.input);\n\t\t}\n\n\t\tif (settings.jukebox !== null) {\n\t\t\tthis.jukebox = new _Jukebox(settings.jukebox);\n\t\t}\n\n\t\tif (settings.loop !== null) {\n\n\t\t\tthis.loop = new _Loop(settings.loop);\n\t\t\tthis.loop.bind('render', _on_render, this);\n\t\t\tthis.loop.bind('update', _on_update, this);\n\n\t\t}\n\n\t\tif (settings.renderer !== null) {\n\t\t\tthis.renderer = new _Renderer(settings.renderer);\n\t\t}\n\n\t\tif (settings.stash !== null) {\n\n\t\t\tthis.stash = new _Stash(settings.stash);\n\n\n\t\t\t// Give custom clients 1000ms to connect\n\t\t\tsetTimeout(function() {\n\n\t\t\t\tlet client = this.client;\n\t\t\t\tif (client !== null) {\n\n\t\t\t\t\tlet service = client.getService('stash');\n\t\t\t\t\tif (service !== null) {\n\n\t\t\t\t\t\tservice.bind('sync', function(data) {\n\n\t\t\t\t\t\t\tthis.stash.deserialize({\n\t\t\t\t\t\t\t\tassets: data.assets\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.stash.sync(true);\n\n\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t\tthis.stash.bind('sync', function(assets) {\n\t\t\t\t\t\t\tservice.sync(assets);\n\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}.bind(this), 1000);\n\n\t\t}\n\n\t\tif (settings.storage !== null) {\n\n\t\t\tthis.storage = new _Storage(settings.storage);\n\n\n\t\t\t// Give custom clients 1000ms to connect\n\t\t\tsetTimeout(function() {\n\n\t\t\t\tlet client = this.client;\n\t\t\t\tif (client !== null) {\n\n\t\t\t\t\tlet service = client.getService('storage');\n\t\t\t\t\tif (service !== null) {\n\n\t\t\t\t\t\tservice.bind('sync', function(data) {\n\n\t\t\t\t\t\t\tthis.storage.deserialize({\n\t\t\t\t\t\t\t\tobjects: data.objects\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.storage.sync(true);\n\n\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t\tthis.storage.bind('sync', function(objects) {\n\t\t\t\t\t\t\tservice.sync(objects);\n\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}.bind(this), 1000);\n\n\t\t}\n\n\t\tif (settings.viewport !== null) {\n\n\t\t\tthis.viewport = new _Viewport();\n\t\t\tthis.viewport.bind('reshape', _on_reshape, this);\n\t\t\tthis.viewport.bind('hide',    _on_hide,    this);\n\t\t\tthis.viewport.bind('show',    _on_show,    this);\n\n\t\t\tthis.viewport.setFullscreen(settings.viewport.fullscreen);\n\n\t\t}\n\n\t};\n\n\tconst _on_hide = function() {\n\n\t\tlet loop = this.loop;\n\t\tif (loop !== null) {\n\t\t\tloop.pause();\n\t\t}\n\n\t};\n\n\tconst _on_render = function(clock, delta) {\n\n\t\tif (this.state !== null) {\n\t\t\tthis.state.render(clock, delta);\n\t\t}\n\n\t};\n\n\tconst _on_reshape = function(orientation, rotation, width, height) {\n\n\t\tlet renderer = this.renderer;\n\t\tif (renderer !== null) {\n\n\t\t\tlet settings = this.settings;\n\t\t\tif (settings.renderer !== null) {\n\t\t\t\trenderer.setWidth(settings.renderer.width);\n\t\t\t\trenderer.setHeight(settings.renderer.height);\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_show = function() {\n\n\t\tlet loop = this.loop;\n\t\tif (loop !== null) {\n\t\t\tloop.resume();\n\t\t}\n\n\t};\n\n\tconst _on_update = function(clock, delta) {\n\n\t\tif (this.state !== null) {\n\t\t\tthis.state.update(clock, delta);\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * DEFAULT SETTINGS\n\t * and SERIALIZATION CACHE\n\t */\n\n\tconst _DEFAULTS = {\n\n\t\tclient: null,\n\t\tserver: null,\n\n\t\tinput: {\n\t\t\tdelay:       0,\n\t\t\tkey:         true,\n\t\t\tkeymodifier: false,\n\t\t\tscroll:      true,\n\t\t\tswipe:       true,\n\t\t\ttouch:       true\n\t\t},\n\n\t\tjukebox: {\n\t\t\tchannels: 8,\n\t\t\tmusic:    true,\n\t\t\tsound:    true\n\t\t},\n\n\t\tloop: {\n\t\t\trender: 60,\n\t\t\tupdate: 60\n\t\t},\n\n\t\trenderer: {\n\t\t\twidth:      null,\n\t\t\theight:     null,\n\t\t\tid:         'app',\n\t\t\tbackground: '#405050'\n\t\t},\n\n\t\tstash: {\n\t\t\tid:   'app',\n\t\t\ttype: _Stash.TYPE.persistent\n\t\t},\n\n\t\tstorage: {\n\t\t\tid:    'app',\n\t\t\tmodel: {},\n\t\t\ttype:  _Storage.TYPE.persistent\n\t\t},\n\n\t\tviewport: {\n\t\t\tfullscreen: false\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(states) {\n\n\t\tthis.settings = lychee.assignunlink({}, _DEFAULTS, states);\n\t\tthis.defaults = lychee.assignunlink({}, this.settings);\n\n\t\tthis.client   = null;\n\t\tthis.server   = null;\n\n\t\tthis.input    = null;\n\t\tthis.jukebox  = null;\n\t\tthis.loop     = null;\n\t\tthis.renderer = null;\n\t\tthis.stash    = null;\n\t\tthis.storage  = null;\n\t\tthis.viewport = null;\n\n\t\tthis.state    = null;\n\t\tthis.__states = {};\n\n\n\t\t_Emitter.call(this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.client instanceof Object)   this.client   = lychee.deserialize(blob.client);\n\t\t\tif (blob.server instanceof Object)   this.server   = lychee.deserialize(blob.server);\n\n\t\t\tif (blob.input instanceof Object)    this.input    = lychee.deserialize(blob.input);\n\t\t\tif (blob.jukebox instanceof Object)  this.jukebox  = lychee.deserialize(blob.jukebox);\n\t\t\tif (blob.loop instanceof Object)     this.loop     = lychee.deserialize(blob.loop);\n\t\t\tif (blob.renderer instanceof Object) this.renderer = lychee.deserialize(blob.renderer);\n\t\t\tif (blob.stash instanceof Object)    this.stash    = lychee.deserialize(blob.stash);\n\t\t\tif (blob.storage instanceof Object)  this.storage  = lychee.deserialize(blob.storage);\n\t\t\tif (blob.viewport instanceof Object) this.viewport = lychee.deserialize(blob.viewport);\n\n\n\t\t\tif (blob.states instanceof Object) {\n\n\t\t\t\tfor (let id in blob.states) {\n\n\t\t\t\t\tlet stateblob = blob.states[id];\n\n\t\t\t\t\tfor (let a = 0, al = stateblob.arguments.length; a < al; a++) {\n\t\t\t\t\t\tif (stateblob.arguments[a] === '#MAIN') {\n\t\t\t\t\t\t\tstateblob.arguments[a] = this;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setState(id, lychee.deserialize(stateblob));\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.app.Main';\n\n\t\t\tlet states = lychee.assignunlink({}, this.settings);\n\t\t\tlet blob   = data['blob'] || {};\n\n\n\t\t\tif (this.client !== null)   blob.client   = lychee.serialize(this.client);\n\t\t\tif (this.server !== null)   blob.server   = lychee.serialize(this.server);\n\n\t\t\tif (this.input !== null)    blob.input    = lychee.serialize(this.input);\n\t\t\tif (this.jukebox !== null)  blob.jukebox  = lychee.serialize(this.jukebox);\n\t\t\tif (this.loop !== null)     blob.loop     = lychee.serialize(this.loop);\n\t\t\tif (this.renderer !== null) blob.renderer = lychee.serialize(this.renderer);\n\t\t\tif (this.stash !== null)    blob.stash    = lychee.serialize(this.stash);\n\t\t\tif (this.storage !== null)  blob.storage  = lychee.serialize(this.storage);\n\t\t\tif (this.viewport !== null) blob.viewport = lychee.serialize(this.viewport);\n\n\n\t\t\tif (Object.keys(this.__states).length > 0) {\n\n\t\t\t\tblob.states = {};\n\n\t\t\t\tfor (let id in this.__states) {\n\t\t\t\t\tblob.states[id] = lychee.serialize(this.__states[id]);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = states;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * MAIN API\n\t\t */\n\n\t\tinit: function() {\n\n\t\t\tlet flow       = new _Flow();\n\t\t\tlet client_api = this.settings.client;\n\t\t\tlet server_api = this.settings.server;\n\n\n\t\t\tflow.then('load-api');\n\t\t\tflow.then('load');\n\t\t\tflow.then('init');\n\n\n\t\t\tflow.bind('load-api', function(oncomplete) {\n\n\t\t\t\tlet c = typeof client_api === 'string';\n\t\t\t\tlet s = typeof server_api === 'string';\n\n\n\t\t\t\tif (c === true && s === true) {\n\n\t\t\t\t\t_load_api(client_api, function(settings) {\n\n\t\t\t\t\t\tthis.settings.client = Object.assign({}, settings);\n\n\t\t\t\t\t\t_load_api(server_api, function(settings) {\n\t\t\t\t\t\t\tthis.settings.server = Object.assign({}, settings);\n\t\t\t\t\t\t\toncomplete(true);\n\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t}, this);\n\n\t\t\t\t} else if (c === true) {\n\n\t\t\t\t\t_load_api(client_api, function(settings) {\n\t\t\t\t\t\tthis.settings.client = Object.assign({}, settings);\n\t\t\t\t\t\toncomplete(true);\n\t\t\t\t\t}, this);\n\n\t\t\t\t} else if (s === true) {\n\n\t\t\t\t\t_load_api(server_api, function(settings) {\n\t\t\t\t\t\tthis.settings.server = Object.assign({}, settings);\n\t\t\t\t\t\toncomplete(true);\n\t\t\t\t\t}, this);\n\n\t\t\t\t} else {\n\n\t\t\t\t\toncomplete(true);\n\n\t\t\t\t}\n\n\t\t\t}, this);\n\n\t\t\tflow.bind('load', function(oncomplete) {\n\n\t\t\t\tlet result = this.trigger('load', [ oncomplete ]);\n\t\t\t\tif (result === false) {\n\t\t\t\t\toncomplete(true);\n\t\t\t\t}\n\n\t\t\t}, this);\n\n\t\t\tflow.bind('init', function(oncomplete) {\n\n\t\t\t\t_initialize.call(this);\n\t\t\t\toncomplete(true);\n\n\t\t\t}, this);\n\n\t\t\tflow.bind('complete', function() {\n\t\t\t\tthis.trigger('init');\n\t\t\t}, this);\n\n\t\t\tflow.bind('error', function() {\n\t\t\t\t_initialize.call(this);\n\t\t\t}, this);\n\n\t\t\tflow.init();\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tdestroy: function() {\n\n\t\t\tif (this.client !== null) {\n\t\t\t\tthis.client.disconnect();\n\t\t\t\tthis.client = null;\n\t\t\t}\n\n\t\t\tif (this.server !== null) {\n\t\t\t\tthis.server.disconnect();\n\t\t\t\tthis.server = null;\n\t\t\t}\n\n\t\t\tif (this.input !== null) {\n\t\t\t\tthis.input.destroy();\n\t\t\t\tthis.input = null;\n\t\t\t}\n\n\t\t\tif (this.jukebox !== null) {\n\t\t\t\tthis.jukebox = null;\n\t\t\t}\n\n\t\t\tif (this.loop !== null) {\n\t\t\t\tthis.loop.destroy();\n\t\t\t\tthis.loop = null;\n\t\t\t}\n\n\t\t\tif (this.renderer !== null) {\n\t\t\t\tthis.renderer.destroy();\n\t\t\t\tthis.renderer = null;\n\t\t\t}\n\n\t\t\tif (this.stash !== null) {\n\t\t\t\tthis.stash = null;\n\t\t\t}\n\n\t\t\tif (this.storage !== null) {\n\t\t\t\tthis.storage = null;\n\t\t\t}\n\n\t\t\tif (this.viewport !== null) {\n\t\t\t\tthis.viewport.destroy();\n\t\t\t\tthis.viewport = null;\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetState: function(id, state) {\n\n\t\t\tid    = typeof id === 'string'            ? id    : null;\n\t\t\tstate = lychee.interfaceof(_State, state) ? state : null;\n\n\n\t\t\tif (id !== null && state !== null) {\n\n\t\t\t\tthis.__states[id] = state;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.__states[id] !== undefined) {\n\t\t\t\treturn this.__states[id];\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tremoveState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.__states[id] !== undefined) {\n\n\t\t\t\tif (this.state === this.__states[id]) {\n\t\t\t\t\tthis.changeState(null);\n\t\t\t\t}\n\n\t\t\t\tdelete this.__states[id];\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tchangeState: function(id, data) {\n\n\t\t\tid   = typeof id === 'string' ? id   : null;\n\t\t\tdata = data !== undefined     ? data : null;\n\n\n\t\t\tlet that     = this;\n\t\t\tlet oldstate = this.state;\n\t\t\tlet newstate = this.__states[id] || null;\n\n\n\t\t\tif (newstate !== null) {\n\n\t\t\t\tif (oldstate !== null) {\n\n\t\t\t\t\toldstate.leave(function(result) {\n\t\t\t\t\t\tnewstate.enter(function(result) {\n\t\t\t\t\t\t\tthat.state = newstate;\n\t\t\t\t\t\t}, data);\n\t\t\t\t\t});\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewstate.enter(function(result) {\n\t\t\t\t\t\tthat.state = newstate;\n\t\t\t\t\t}, data);\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (oldstate !== null) {\n\n\t\t\t\t\toldstate.leave(function(result) {\n\t\t\t\t\t\tthat.state = null;\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\n\t\t\t\tif (id === null) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.event.Emitter":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.event.Emitter","url":"/libraries/lychee/source/event/Emitter.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _bind = function(event, callback, scope, once) {\n\n\t\tif (event === null || callback === null) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tlet pass_event = false;\n\t\tlet pass_self  = false;\n\n\t\tlet modifier = event.charAt(0);\n\t\tif (modifier === '@') {\n\n\t\t\tevent      = event.substr(1, event.length - 1);\n\t\t\tpass_event = true;\n\n\t\t} else if (modifier === '#') {\n\n\t\t\tevent     = event.substr(1, event.length - 1);\n\t\t\tpass_self = true;\n\n\t\t}\n\n\n\t\tif (this.___events[event] === undefined) {\n\t\t\tthis.___events[event] = [];\n\t\t}\n\n\n\t\tthis.___events[event].push({\n\t\t\tpass_event: pass_event,\n\t\t\tpass_self:  pass_self,\n\t\t\tcallback:   callback,\n\t\t\tscope:      scope,\n\t\t\tonce:       once\n\t\t});\n\n\n\t\treturn true;\n\n\t};\n\n\tconst _relay = function(event, instance, once) {\n\n\t\tif (event === null || instance === null) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tlet callback = function() {\n\n\t\t\tlet event = arguments[0];\n\t\t\tlet data  = [];\n\n\t\t\tfor (let a = 1, al = arguments.length; a < al; a++) {\n\t\t\t\tdata.push(arguments[a]);\n\t\t\t}\n\n\t\t\tthis.trigger(event, data);\n\n\t\t};\n\n\n\t\tif (this.___events[event] === undefined) {\n\t\t\tthis.___events[event] = [];\n\t\t}\n\n\n\t\tthis.___events[event].push({\n\t\t\tpass_event: true,\n\t\t\tpass_self:  false,\n\t\t\tcallback:   callback,\n\t\t\tscope:      instance,\n\t\t\tonce:       once\n\t\t});\n\n\n\t\treturn true;\n\n\t};\n\n\tconst _trigger = function(event, data) {\n\n\t\tif (this.___events !== undefined && this.___events[event] !== undefined) {\n\n\t\t\tlet value = undefined;\n\n\t\t\tfor (let e = 0; e < this.___events[event].length; e++) {\n\n\t\t\t\tlet args  = [];\n\t\t\t\tlet entry = this.___events[event][e];\n\n\t\t\t\tif (entry.pass_event === true) {\n\n\t\t\t\t\targs.push(event);\n\n\t\t\t\t} else if (entry.pass_self === true) {\n\n\t\t\t\t\targs.push(this);\n\n\t\t\t\t}\n\n\n\t\t\t\tif (data !== null) {\n\t\t\t\t\targs.push.apply(args, data);\n\t\t\t\t}\n\n\n\t\t\t\tlet result = entry.callback.apply(entry.scope, args);\n\t\t\t\tif (result !== undefined) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\n\n\t\t\t\tif (entry.once === true) {\n\n\t\t\t\t\tif (this.unbind(event, entry.callback, entry.scope) === true) {\n\t\t\t\t\t\te--;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (value !== undefined) {\n\t\t\t\treturn value;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _unbind = function(event, callback, scope) {\n\n\t\tlet found = false;\n\n\t\tif (event !== null) {\n\n\t\t\tfound = _unbind_event.call(this, event, callback, scope);\n\n\t\t} else {\n\n\t\t\tfor (event in this.___events) {\n\n\t\t\t\tlet result = _unbind_event.call(this, event, callback, scope);\n\t\t\t\tif (result === true) {\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn found;\n\n\t};\n\n\tconst _unbind_event = function(event, callback, scope) {\n\n\t\tif (this.___events !== undefined && this.___events[event] !== undefined) {\n\n\t\t\tlet found = false;\n\n\t\t\tfor (let e = 0, el = this.___events[event].length; e < el; e++) {\n\n\t\t\t\tlet entry = this.___events[event][e];\n\n\t\t\t\tif ((callback === null || entry.callback === callback) && (scope === null || entry.scope === scope)) {\n\n\t\t\t\t\tfound = true;\n\n\t\t\t\t\tthis.___events[event].splice(e, 1);\n\t\t\t\t\tel--;\n\t\t\t\t\te--;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn found;\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function() {\n\n\t\tthis.___events   = {};\n\t\tthis.___timeline = {\n\t\t\tbind:    [],\n\t\t\ttrigger: [],\n\t\t\trelay:   [],\n\t\t\tunbind:  []\n\t\t};\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.events instanceof Object) {\n\t\t\t\t// TODO: deserialize events\n\t\t\t}\n\n\t\t\tif (blob.timeline instanceof Object) {\n\t\t\t\t// TODO: deserialize timeline\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet blob = {};\n\n\n\t\t\tif (Object.keys(this.___events).length > 0) {\n\n\t\t\t\tblob.events = {};\n\n\t\t\t\tfor (let event in this.___events) {\n\n\t\t\t\t\tblob.events[event] = [];\n\n\t\t\t\t\tfor (let e = 0, el = this.___events[event].length; e < el; e++) {\n\n\t\t\t\t\t\tlet entry = this.___events[event][e];\n\n\t\t\t\t\t\tblob.events[event].push({\n\t\t\t\t\t\t\tpass_event: entry.pass_event,\n\t\t\t\t\t\t\tpass_self:  entry.pass_self,\n\t\t\t\t\t\t\tcallback:   lychee.serialize(entry.callback),\n\t\t\t\t\t\t\t// scope:      lychee.serialize(entry.scope),\n\t\t\t\t\t\t\tscope:      null,\n\t\t\t\t\t\t\tonce:       entry.once\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (this.___timeline.bind.length > 0 || this.___timeline.trigger.length > 0 || this.___timeline.unbind.length > 0) {\n\n\t\t\t\tblob.timeline = {};\n\n\n\t\t\t\tif (this.___timeline.bind.length > 0) {\n\n\t\t\t\t\tblob.timeline.bind = [];\n\n\t\t\t\t\tfor (let b = 0, bl = this.___timeline.bind.length; b < bl; b++) {\n\t\t\t\t\t\tblob.timeline.bind.push(this.___timeline.bind[b]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (this.___timeline.trigger.length > 0) {\n\n\t\t\t\t\tblob.timeline.trigger = [];\n\n\t\t\t\t\tfor (let t = 0, tl = this.___timeline.trigger.length; t < tl; t++) {\n\t\t\t\t\t\tblob.timeline.trigger.push(this.___timeline.trigger[t]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (this.___timeline.unbind.length > 0) {\n\n\t\t\t\t\tblob.timeline.unbind = [];\n\n\t\t\t\t\tfor (let u = 0, ul = this.___timeline.unbind.length; u < ul; u++) {\n\t\t\t\t\t\tblob.timeline.unbind.push(this.___timeline.unbind[u]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.event.Emitter',\n\t\t\t\t'arguments':   [],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tbind: function(event, callback, scope, once) {\n\n\t\t\tevent    = typeof event === 'string'    ? event    : null;\n\t\t\tcallback = callback instanceof Function ? callback : null;\n\t\t\tscope    = scope !== undefined          ? scope    : this;\n\t\t\tonce     = once === true;\n\n\n\t\t\tlet result = _bind.call(this, event, callback, scope, once);\n\t\t\tif (result === true && lychee.debug === true) {\n\n\t\t\t\tthis.___timeline.bind.push({\n\t\t\t\t\ttime:     Date.now(),\n\t\t\t\t\tevent:    event,\n\t\t\t\t\tcallback: lychee.serialize(callback),\n\t\t\t\t\t// scope:    lychee.serialize(scope),\n\t\t\t\t\tscope:    null,\n\t\t\t\t\tonce:     once\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\trelay: function(event, instance, once) {\n\n\t\t\tevent    = typeof event === 'string'               ? event    : null;\n\t\t\tinstance = lychee.interfaceof(Composite, instance) ? instance : null;\n\t\t\tonce     = once === true;\n\n\n\t\t\tlet result = _relay.call(this, event, instance, once);\n\t\t\tif (result === true && lychee.debug === true) {\n\n\t\t\t\tthis.___timeline.relay.push({\n\t\t\t\t\ttime:     Date.now(),\n\t\t\t\t\tevent:    event,\n\t\t\t\t\tinstance: lychee.serialize(instance),\n\t\t\t\t\tonce:     once\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\ttrigger: function(event, data) {\n\n\t\t\tevent = typeof event === 'string' ? event : null;\n\t\t\tdata  = data instanceof Array     ? data  : null;\n\n\n\t\t\tlet result = _trigger.call(this, event, data);\n\t\t\tif (result === true && lychee.debug === true) {\n\n\t\t\t\tthis.___timeline.trigger.push({\n\t\t\t\t\ttime:  Date.now(),\n\t\t\t\t\tevent: event,\n\t\t\t\t\tdata:  lychee.serialize(data)\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tunbind: function(event, callback, scope) {\n\n\t\t\tevent    = typeof event === 'string'    ? event    : null;\n\t\t\tcallback = callback instanceof Function ? callback : null;\n\t\t\tscope    = scope !== undefined          ? scope    : null;\n\n\n\t\t\tlet result = _unbind.call(this, event, callback, scope);\n\t\t\tif (result === true) {\n\n\t\t\t\tthis.___timeline.unbind.push({\n\t\t\t\t\ttime:     Date.now(),\n\t\t\t\t\tevent:    event,\n\t\t\t\t\tcallback: lychee.serialize(callback),\n\t\t\t\t\t// scope:    lychee.serialize(scope)\n\t\t\t\t\tscope:    null\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.event.Flow":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.event.Flow","url":"/libraries/lychee/source/event/Flow.js"}],"blob":{"attaches":{},"includes":["lychee.event.Emitter"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _process_recursive = function(event, result) {\n\n\t\tif (result === true) {\n\n\t\t\tif (this.___timeout === null) {\n\n\t\t\t\tthis.___timeout = setTimeout(function() {\n\n\t\t\t\t\tthis.___timeout = null;\n\t\t\t\t\t_process_stack.call(this);\n\n\t\t\t\t}.bind(this), 0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.trigger('error', [ event ]);\n\n\t\t}\n\n\t};\n\n\tconst _process_stack = function() {\n\n\t\tlet entry = this.___stack.shift() || null;\n\t\tif (entry !== null) {\n\n\t\t\tlet data  = entry.data;\n\t\t\tlet event = entry.event;\n\t\t\tlet args  = [ event, [] ];\n\n\t\t\tif (data !== null) {\n\t\t\t\targs[1].push.apply(args[1], data);\n\t\t\t}\n\n\t\t\targs[1].push(_process_recursive.bind(this, event));\n\n\n\t\t\tlet result = this.trigger.apply(this, args);\n\t\t\tif (result === false) {\n\t\t\t\tthis.trigger('error', [ event ]);\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.trigger('complete');\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function() {\n\n\t\tthis.___init    = false;\n\t\tthis.___stack   = [];\n\t\tthis.___timeout = null;\n\n\t\t_Emitter.call(this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.event.Flow';\n\n\t\t\tlet blob = (data['blob'] || {});\n\n\n\t\t\tif (this.___stack.length > 0) {\n\n\t\t\t\tblob.stack = [];\n\n\t\t\t\tfor (let s = 0, sl = this.___stack.length; s < sl; s++) {\n\n\t\t\t\t\tlet entry = this.___stack[s];\n\n\t\t\t\t\tblob.stack.push({\n\t\t\t\t\t\tevent: entry.event,\n\t\t\t\t\t\tdata:  lychee.serialize(entry.data)\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tdata['blob'] = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tthen: function(event, data) {\n\n\t\t\tevent = typeof event === 'string' ? event : null;\n\t\t\tdata  = data instanceof Array     ? data  : null;\n\n\n\t\t\tif (event !== null) {\n\n\t\t\t\tthis.___stack.push({\n\t\t\t\t\tevent: event,\n\t\t\t\t\tdata:  data\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tinit: function() {\n\n\t\t\tif (this.___init === false) {\n\n\t\t\t\tthis.___init = true;\n\n\n\t\t\t\tif (this.___stack.length > 0) {\n\n\t\t\t\t\t_process_stack.call(this);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.state.Game":{"constructor":"lychee.Definition","arguments":[{"id":"game.state.Game","url":"/projects/flappy-bnn/source/state/Game.js"}],"blob":{"attaches":{"json":{"constructor":"Config","arguments":["/projects/flappy-bnn/source/state/Game.json"],"blob":{"buffer":"data:application/json;base64,ewoJImxheWVycyI6IHsKCQkiYmciOiB7CgkJCSJjb25zdHJ1Y3RvciI6ICJseWNoZWUuYXBwLkxheWVyIiwKCQkJImFyZ3VtZW50cyI6IFsKCQkJCXt9CgkJCV0sCgkJCSJibG9iIjogewoJCQkJImVudGl0aWVzIjogWwoJCQkJCXsKCQkJCQkJImNvbnN0cnVjdG9yIjogImdhbWUudWkuc3ByaXRlLkJhY2tncm91bmQiLAoJCQkJCQkiYXJndW1lbnRzIjogWwoJCQkJCQkJe30KCQkJCQkJXQoJCQkJCX0KCQkJCV0sCgkJCQkibWFwIjogewoJCQkJCSJiYWNrZ3JvdW5kIjogMAoJCQkJfQoJCQl9CgkJfSwKCQkiZ2FtZSI6IHsKCQkJImNvbnN0cnVjdG9yIjogImx5Y2hlZS5hcHAuTGF5ZXIiLAoJCQkiYXJndW1lbnRzIjogWwoJCQkJe30KCQkJXQoJCX0sCgkJImFpIjogewoJCQkiY29uc3RydWN0b3IiOiAibHljaGVlLmFpLkxheWVyIiwKCQkJImFyZ3VtZW50cyI6IFsKCQkJCXt9CgkJCV0KCQl9LAoJCSJ1aSI6IHsKCQkJImNvbnN0cnVjdG9yIjogImx5Y2hlZS51aS5MYXllciIsCgkJCSJhcmd1bWVudHMiOiBbCgkJCQl7fQoJCQldLAoJCQkiYmxvYiI6IHsKCQkJCSJlbnRpdGllcyI6IFsKCQkJCQl7CgkJCQkJCSJjb25zdHJ1Y3RvciI6ICJseWNoZWUudWkuZW50aXR5LkxhYmVsIiwKCQkJCQkJImFyZ3VtZW50cyI6IFsKCQkJCQkJCXsKCQkJCQkJCQkidmFsdWUiOiAiR2VuZXJhdGlvbiAxIC0gU2NvcmUgMCIsCgkJCQkJCQkJInBvc2l0aW9uIjogewoJCQkJCQkJCQkieCI6IDAsCgkJCQkJCQkJCSJ5IjogLTY0CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQldCgkJCQkJfQoJCQkJXSwKCQkJCSJtYXAiOiB7CgkJCQkJImluZm8iOiAwCgkJCQl9CgkJCX0KCQl9Cgl9Cn0="}}},"requires":["lychee.ai.Layer","lychee.math.Mersenne","lychee.ui.entity.Label","game.ai.Agent","game.app.sprite.Goal","game.app.sprite.Plane","game.effect.Explosion","game.ui.sprite.Background"],"includes":["lychee.app.State"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Agent      = lychee.import('game.ai.Agent');\n\tconst _Explosion  = lychee.import('game.effect.Explosion');\n\tconst _Goal       = lychee.import('game.app.sprite.Goal');\n\tconst _Mersenne   = lychee.import('lychee.math.Mersenne');\n\tconst _Plane      = lychee.import('game.app.sprite.Plane');\n\tconst _State      = lychee.import('lychee.app.State');\n\tconst _BLOB       = attachments[\"json\"].buffer;\n\tconst _POPULATION = 1;\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _get_next_goal = function(plane) {\n\n\t\tlet distance = Infinity;\n\t\tlet found    = null;\n\t\tlet goals    = this.__cache.goals;\n\t\tlet px       = plane.position.x;\n\t\tlet py       = plane.position.y;\n\n\t\tfor (let g = 0, gl = goals.length; g < gl; g++) {\n\n\t\t\tlet goal = goals[g];\n\t\t\tlet gx   = goal.position.x;\n\t\t\tlet gy   = goal.position.y;\n\n\t\t\tlet dist = Math.sqrt(Math.pow(gx - px, 2) + Math.pow(gy - py, 2));\n\t\t\tif (dist < distance) {\n\t\t\t\tfound    = goal;\n\t\t\t\tdistance = dist;\n\t\t\t}\n\n\t\t}\n\n\t\treturn found;\n\n\t};\n\n\tconst _reset_game = function() {\n\n\t\tlet layer = this.getLayer('ai');\n\t\tlet stats = this.__statistics;\n\n\t\tlayer.trigger('epoche');\n\n\n\t\tstats.generation++;\n\t\tstats.highscore = Math.max(stats.highscore, stats.score);\n\t\tstats.score     = 0;\n\n\n\t\tthis.twister = new _Mersenne({\n\t\t\tseed: 1337\n\t\t});\n\n\n\t\t_reset_agents.call(this, true);\n\t\t_reset_goals.call(this, true);\n\t\t_reset_planes.call(this, true);\n\n\t};\n\n\tconst _reset_agents = function(complete) {\n\n\t\tcomplete = complete === true;\n\n\n\t\tlet agents = this.__cache.agents;\n\n\t\tfor (let a = 0, al = agents.length; a < al; a++) {\n\n\t\t\tlet agent = agents[a];\n\n\t\t\tagent.fitness = 0;\n\n\t\t}\n\n\t};\n\n\tconst _reset_goals = function(complete) {\n\n\t\tcomplete = complete === true;\n\n\n\t\tlet goals   = this.__cache.goals;\n\t\tlet twister = this.twister;\n\t\tlet width   = this.renderer.width;\n\t\tlet height  = this.renderer.height;\n\n\t\tlet offsetx =  1 / 2 * width;\n\t\tlet offsety = -1 / 2 * height + 128;\n\n\t\tif (complete === true) {\n\n\t\t\tfor (let g = 0, gl = goals.length; g < gl; g++) {\n\t\t\t\tgoals[g].position.x = -4096;\n\t\t\t}\n\n\t\t}\n\n\t\tfor (let g = 0, gl = goals.length; g < gl; g++) {\n\t\t\toffsetx = Math.max(offsetx, goals[g].position.x);\n\t\t}\n\n\n\t\tfor (let g = 0, gl = goals.length; g < gl; g++) {\n\n\t\t\tlet goal = goals[g];\n\t\t\tif (goal.position.x < -1 / 2 * width) {\n\t\t\t\tgoal.position.x = offsetx;\n\t\t\t\tgoal.position.y = offsety + (twister.random() * (height - 256)) | 0;\n\t\t\t\toffsetx += 256;\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _reset_planes = function(complete) {\n\n\t\tcomplete = complete === true;\n\n\n\t\tlet planes = this.__cache.planes;\n\t\tlet width  = this.renderer.width;\n\n\t\tif (complete === true) {\n\n\t\t\tfor (let p = 0, pl = planes.length; p < pl; p++) {\n\n\t\t\t\tlet plane = planes[p];\n\n\t\t\t\tplane.position.x = -1 / 2 * width + plane.width;\n\t\t\t\tplane.position.y = 0;\n\t\t\t\tplane.velocity.y = 0;\n\t\t\t\tplane.alive      = true;\n\t\t\t\tplane.__canflap  = true;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(main) {\n\n\t\t_State.call(this, main);\n\n\n\t\tthis.twister = new _Mersenne({\n\t\t\tseed: 1337\n\t\t});\n\n\n\t\tthis.__cache = {\n\t\t\tagents:     [],\n\t\t\tbackground: null,\n\t\t\tgoals:      [],\n\t\t\tinfo:       null,\n\t\t\tplanes:     []\n\t\t};\n\n\t\tthis.__statistics = {\n\t\t\tgeneration: 1,\n\t\t\tscore:      0,\n\t\t\thighscore:  0\n\t\t};\n\n\n\t\tthis.deserialize(_BLOB);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tlet viewport = this.viewport;\n\t\tif (viewport !== null) {\n\n\t\t\tviewport.bind('reshape', function(orientation, rotation) {\n\n\t\t\t\tlet renderer = this.renderer;\n\t\t\t\tif (renderer !== null) {\n\n\t\t\t\t\tlet entity = null;\n\t\t\t\t\tlet width  = renderer.width;\n\t\t\t\t\tlet height = renderer.height;\n\n\n\t\t\t\t\tentity = this.query('bg > background');\n\t\t\t\t\tentity.trigger('reshape', [ null, null, width, height ]);\n\t\t\t\t\tthis.__cache.background = entity;\n\n\t\t\t\t\tentity = this.query('ui > info');\n\t\t\t\t\tentity.setPosition({\n\t\t\t\t\t\ty: -1 / 2 * height + 32\n\t\t\t\t\t});\n\t\t\t\t\tthis.__cache.info = entity;\n\n\t\t\t\t}\n\n\t\t\t}, this);\n\n\t\t}\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _State.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.state.Game';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\tdeserialize: function(blob) {\n\n\t\t\t_State.prototype.deserialize.call(this, blob);\n\n\n\t\t\tlet cache    = this.__cache;\n\t\t\tlet renderer = this.renderer;\n\t\t\tlet layer    = this.getLayer('ai');\n\n\t\t\tif (renderer !== null && layer !== null) {\n\n\t\t\t\tlet limit = {\n\t\t\t\t\tx: renderer.width,\n\t\t\t\t\ty: renderer.height,\n\t\t\t\t\tz: 1\n\t\t\t\t};\n\n\n\t\t\t\tlayer = this.getLayer('game');\n\n\t\t\t\tfor (let p = 0; p < _POPULATION; p++) {\n\t\t\t\t\tlet plane = new _Plane();\n\t\t\t\t\tcache.planes.push(plane);\n\t\t\t\t\tlayer.addEntity(plane);\n\t\t\t\t}\n\n\t\t\t\t_reset_planes.call(this);\n\n\n\t\t\t\tfor (let g = 0; g < (renderer.width / 256); g++) {\n\t\t\t\t\tlet goal = new _Goal();\n\t\t\t\t\tcache.goals.push(goal);\n\t\t\t\t\tlayer.addEntity(goal);\n\t\t\t\t}\n\n\t\t\t\t_reset_goals.call(this);\n\n\n\t\t\t\tlayer = this.getLayer('ai');\n\t\t\t\tlayer.unbind('epoche');\n\n\t\t\t\tfor (let a = 0; a < _POPULATION; a++) {\n\n\t\t\t\t\tlet agent = new _Agent({\n\t\t\t\t\t\tplane: cache.planes[a],\n\t\t\t\t\t\tgoal:  cache.goals[0],\n\t\t\t\t\t\tlimit: limit\n\t\t\t\t\t});\n\t\t\t\t\tlayer.addAgent(agent);\n\n\t\t\t\t}\n\n\t\t\t\tthis.__cache.agents = layer.agents;\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tenter: function(oncomplete) {\n\n\t\t\toncomplete = oncomplete instanceof Function ? oncomplete : null;\n\n\n\t\t\t_reset_game.call(this);\n\n\n\t\t\tif (oncomplete !== null) {\n\t\t\t\toncomplete(true);\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tleave: function(oncomplete) {\n\n\t\t\toncomplete = oncomplete instanceof Function ? oncomplete : null;\n\n\n\t\t\tif (oncomplete !== null) {\n\t\t\t\toncomplete(true);\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tfor (let id in this.__layers) {\n\n\t\t\t\tif (id === 'ai') continue;\n\n\t\t\t\tlet layer = this.__layers[id];\n\t\t\t\tif (layer.visible === false) continue;\n\n\t\t\t\tlayer.update(clock, delta);\n\n\t\t\t}\n\n\n\t\t\tlet cache  = this.__cache;\n\t\t\tlet stats  = this.__statistics;\n\t\t\tlet width  = this.renderer.width;\n\t\t\tlet height = this.renderer.height;\n\n\n\t\t\tlet background = cache.background;\n\t\t\tif (background !== null) {\n\n\t\t\t\tlet origin = background.origin.x - (delta / 1000) * 128;\n\t\t\t\tbackground.origin.x  = (origin % background.width) | 0;\n\t\t\t\tbackground.__isDirty = true;\n\n\t\t\t}\n\n\n\t\t\tlet is_alive = false;\n\t\t\tlet agents   = cache.agents;\n\t\t\tlet goals    = cache.goals;\n\t\t\tlet planes   = cache.planes;\n\n\t\t\tlet next_goal = _get_next_goal.call(this, planes[0]);\n\t\t\tif (next_goal !== null) {\n\n\t\t\t\tfor (let p = 0, pl = planes.length; p < pl; p++) {\n\n\t\t\t\t\tlet plane = planes[p];\n\t\t\t\t\tlet agent = agents[p] || null;\n\t\t\t\t\tif (agent !== null) {\n\t\t\t\t\t\tagent._control.target = next_goal;\n\t\t\t\t\t\tagent._sensor.entity  = next_goal;\n\t\t\t\t\t\tagent.update();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (plane.alive === true) {\n\n\t\t\t\t\t\tif (plane.position.y > 1 / 2 * height || next_goal.collidesWith(plane) === true) {\n\n\t\t\t\t\t\t\tif (agent !== null) {\n\t\t\t\t\t\t\t\tagent.punish(1);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (plane.effects.length === 0) {\n\t\t\t\t\t\t\t\tplane.addEffect(new _Explosion({\n\t\t\t\t\t\t\t\t\tposition: plane.position\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tplane.alive = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (plane.alive === true) {\n\t\t\t\t\t\tis_alive = true;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (is_alive === true) {\n\n\t\t\t\tstats.score += ((delta / 1000) * 256) | 0;\n\n\n\t\t\t\tlet info = this.__cache.info;\n\t\t\t\tif (info !== null) {\n\t\t\t\t\tinfo.setValue('Generation ' + stats.generation + ' - Score ' + stats.score);\n\t\t\t\t}\n\n\t\t\t\tfor (let g = 0, gl = goals.length; g < gl; g++) {\n\n\t\t\t\t\tif (goals[g].position.x < -1 / 2 * width) {\n\t\t\t\t\t\t_reset_goals.call(this);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_reset_game.call(this);\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.Layer":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.ai.Layer","url":"/libraries/lychee/source/ai/Layer.js"}],"blob":{"attaches":{},"requires":["lychee.ai.Agent"],"includes":["lychee.event.Emitter"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Agent   = lychee.import('lychee.ai.Agent');\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_agent = function(agent) {\n\n\t\tif (agent instanceof Object) {\n\n\t\t\tif (\n\t\t\t\ttypeof agent.update === 'function'\n\t\t\t\t&& typeof agent.crossover === 'function'\n\t\t\t\t&& typeof agent.fitness === 'number'\n\t\t\t\t&& typeof agent.reward === 'function'\n\t\t\t\t&& typeof agent.punish === 'function'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\t// XXX: Keep Layer API compatibility\n\t\tthis.width    = 0;\n\t\tthis.height   = 0;\n\t\tthis.depth    = 0;\n\t\tthis.radius   = 0;\n\t\tthis.alpha    = 1;\n\t\tthis.entities = [];\n\t\tthis.position = { x: 0, y: 0, z: 0 };\n\t\tthis.visible  = true;\n\n\n\t\tthis.agents = [];\n\n\t\tthis.__map = {};\n\n\n\t\tthis.setAgents(states.agents);\n\n\n\t\t_Emitter.call(this);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ai.Layer';\n\n\t\t\tlet states = {};\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.agents.length > 0) {\n\t\t\t\tblob.agents = this.agents.map(lychee.serialize);\n\t\t\t}\n\n\t\t\tif (blob.agents instanceof Array && Object.keys(this.__map).length > 0) {\n\n\t\t\t\tblob.map = Object.map(this.__map, function(val, key) {\n\n\t\t\t\t\tlet index = this.agents.indexOf(val);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\treturn index;\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t}, this);\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = states;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\t\t\t// XXX: Do nothing\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet agents   = this.agents;\n\t\t\tlet is_alive = false;\n\n\t\t\tfor (let a = 0, al = agents.length; a < al; a++) {\n\n\t\t\t\tlet agent = agents[a];\n\t\t\t\tif (agent.alive === true) {\n\t\t\t\t\tagent.update(clock, delta);\n\t\t\t\t\tis_alive = true;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (is_alive === false) {\n\t\t\t\tthis.trigger('epoche');\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\taddAgent: function(agent) {\n\n\t\t\tagent = _validate_agent(agent) === true ? agent : null;\n\n\n\t\t\tif (agent !== null) {\n\n\t\t\t\tlet index = this.agents.indexOf(agent);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.agents.push(agent);\n\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAgent: function(id, agent) {\n\n\t\t\tid    = typeof id === 'string'          ? id    : null;\n\t\t\tagent = _validate_agent(agent) === true ? agent : null;\n\n\n\t\t\tif (id !== null && agent !== null && this.__map[id] === undefined) {\n\n\t\t\t\tthis.__map[id] = agent;\n\n\t\t\t\tlet result = this.addAgent(agent);\n\t\t\t\tif (result === true) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetAgent: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tlet found = null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet num = parseInt(id, 10);\n\n\t\t\t\tif (this.__map[id] !== undefined) {\n\t\t\t\t\tfound = this.__map[id];\n\t\t\t\t} else if (isNaN(num) === false) {\n\t\t\t\t\tfound = this.agents[num] || null;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\t\tremoveAgent: function(agent) {\n\n\t\t\tagent = _validate_agent(agent) === true ? agent : null;\n\n\n\t\t\tif (agent !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tlet index = this.agents.indexOf(agent);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.agents.splice(index, 1);\n\t\t\t\t\tfound = true;\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let id in this.__map) {\n\n\t\t\t\t\tif (this.__map[id] === agent) {\n\n\t\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t\t\tfound = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn found;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAgents: function(agents) {\n\n\t\t\tagents = agents instanceof Array ? agents : null;\n\n\n\t\t\tlet all = true;\n\n\t\t\tif (agents !== null) {\n\n\t\t\t\tfor (let a = 0, al = agents.length; a < al; a++) {\n\n\t\t\t\t\tlet result = this.addAgent(agents[a]);\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tall = false;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn all;\n\n\t\t},\n\n\t\tremoveAgents: function() {\n\n\t\t\tlet agents = this.agents;\n\n\t\t\tfor (let a = 0, al = agents.length; a < al; a++) {\n\n\t\t\t\tthis.removeAgent(agents[a]);\n\n\t\t\t\tal--;\n\t\t\t\ta--;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetPosition: function(position) {\n\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tif (position !== null) {\n\n\t\t\t\tthis.position.x = typeof position.x === 'number' ? position.x : this.position.x;\n\t\t\t\tthis.position.y = typeof position.y === 'number' ? position.y : this.position.y;\n\t\t\t\tthis.position.z = typeof position.z === 'number' ? position.z : this.position.z;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.math.Mersenne":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.math.Mersenne","url":"/libraries/lychee/source/math/Mersenne.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\tconst _UPPER_MASK = 0x80000000;\n\tconst _LOWER_MASK = 0x7fffffff;\n\tconst _XOR_MATRIX = new Array(0x0, 0x9908b0df);\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _initialize = function() {\n\n\t\tlet index   = 1;\n\t\tlet N       = this.N;\n\t\tlet seed    = this.seed;\n\t\tlet twister = this.twister;\n\n\n\t\ttwister[0] = seed >>> 0;\n\n\n\t\twhile (index < N) {\n\n\t\t\tlet value = twister[index - 1] ^ (twister[index - 1] >>> 30);\n\n\t\t\ttwister[index] = (((((value & 0xffff0000) >>> 16) * 1812433253) << 16) + (value & 0x0000ffff) * 1812433253) + index;\n\t\t\ttwister[index] >>>= 0;\n\n\t\t\tindex++;\n\n\t\t}\n\n\t\tthis.index = index;\n\n\t};\n\n\tconst _random_int32 = function() {\n\n\t\tlet index   = this.index;\n\t\tlet twister = this.twister;\n\t\tlet value   = 0;\n\t\tlet M       = this.M;\n\t\tlet N       = this.N;\n\n\n\t\tif (index >= N) {\n\n\t\t\tlet i = 0;\n\n\t\t\tif (index === N + 1) {\n\t\t\t\t_initialize.call(this, 5489);\n\t\t\t}\n\n\n\t\t\twhile (i < N - M) {\n\n\t\t\t\tvalue      = (twister[i] & _UPPER_MASK) | (twister[i + 1] & _LOWER_MASK);\n\t\t\t\ttwister[i] = twister[i + M] ^ (value >>> 1) ^ _XOR_MATRIX[value & 0x1];\n\n\t\t\t\ti++;\n\n\t\t\t}\n\n\t\t\twhile (i < N - 1) {\n\n\t\t\t\tvalue      = (twister[i] & _UPPER_MASK) | (twister[i + 1] & _LOWER_MASK);\n\t\t\t\ttwister[i] = twister[i + (M - N)] ^ (value >>> 1) ^ _XOR_MATRIX[value & 0x1];\n\n\t\t\t\ti++;\n\n\t\t\t}\n\n\n\t\t\tvalue          = (twister[N - 1] & _UPPER_MASK) | (twister[0] & _LOWER_MASK);\n\t\t\ttwister[N - 1] = twister[M - 1] ^ (value >>> 1) ^ _XOR_MATRIX[value & 0x1];\n\n\t\t\tthis.index = 0;\n\n\t\t}\n\n\n\t\tvalue = twister[this.index++];\n\n\t\tvalue ^= (value >>> 11);\n\t\tvalue ^= (value  <<  7) & 0x9d2c5680;\n\t\tvalue ^= (value  << 15) & 0xefc60000;\n\t\tvalue ^= (value >>> 18);\n\n\n\t\treturn value >>> 0;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.N = 624;\n\t\tthis.M = 397;\n\n\t\tthis.twister = new Array(this.N);\n\t\tthis.index   = this.N + 1;\n\t\tthis.seed    = (Math.random() * Number.MAX_SAFE_INTEGER) | 0;\n\n\n\t\tthis.setSeed(states.seed);\n\n\t\t_initialize.call(this);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {};\n\n\n\t\t\tif (this.seed !== 0) states.seed = this.seed;\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.math.Mersenne',\n\t\t\t\t'arguments':   [ states ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\trandom: function() {\n\n\t\t\treturn (_random_int32.call(this) * (1.0 / 4294967296.0));\n\n\t\t},\n\n\t\tsetSeed: function(seed) {\n\n\t\t\tseed = typeof seed === 'number' ? (seed | 0) : null;\n\n\n\t\t\tif (seed !== null) {\n\n\t\t\t\tthis.seed = seed;\n\t\t\t\t_initialize.call(this);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.ai.Agent":{"constructor":"lychee.Definition","arguments":[{"id":"game.ai.Agent","url":"/projects/flappy-bnn/source/ai/Agent.js"}],"blob":{"attaches":{},"requires":["lychee.ai.enn.Brain","game.policy.Control","game.policy.Position"],"includes":["lychee.ai.enn.Agent"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Agent    = lychee.import('lychee.ai.enn.Agent');\n\tconst _Control  = lychee.import('game.policy.Control');\n\tconst _Position = lychee.import('game.policy.Position');\n\tconst _Brain    = lychee.import('lychee.ai.enn.Brain');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis._control = new _Control({\n\t\t\tentity: states.plane,\n\t\t\ttarget: states.goal\n\t\t});\n\n\t\tthis._sensor = new _Position({\n\t\t\tentity: states.goal,\n\t\t\tlimit:  states.limit\n\t\t});\n\n\n\t\tstates.brain = new _Brain({\n\t\t\tsensors:  [\n\t\t\t\tnew _Position({\n\t\t\t\t\tentity: states.plane,\n\t\t\t\t\tlimit:  states.limit\n\t\t\t\t}),\n\t\t\t\tthis._sensor\n\t\t\t],\n\t\t\tcontrols: [\n\t\t\t\tthis._control\n\t\t\t]\n\t\t});\n\n\n\t\t_Agent.call(this, states);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Agent.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.ai.Agent';\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\treward: function(diff) {\n\n\t\t\tdiff = typeof diff === 'number' ? (diff | 0) : 1;\n\n\t\t\tlet training = {\n\t\t\t\titerations: diff,\n\t\t\t\tinputs:     this.brain._inputs.slice(0),\n\t\t\t\toutputs:    this._control.sensor()\n\t\t\t};\n\n\t\t\treturn _Agent.prototype.reward.call(this, diff, training);\n\n\t\t},\n\n\t\tpunish: function(diff) {\n\n\t\t\tdiff = typeof diff === 'number' ? (diff | 0) : 1;\n\n\n\t\t\tlet training = {\n\t\t\t\titerations: diff,\n\t\t\t\tinputs:     this.brain._inputs.slice(0),\n\t\t\t\toutputs:    this._control.sensor()\n\t\t\t};\n\n\t\t\treturn _Agent.prototype.punish.call(this, diff, training);\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.Storage":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.Storage","url":"/libraries/lychee/source/platform/html/Storage.js"}],"blob":{"attaches":{},"tags":{"platform":"html"},"includes":["lychee.event.Emitter"],"supports":"function(lychee, global) {\n\n\tif (\n\t\ttypeof global.Storage !== 'undefined'\n\t\t&& typeof global.localStorage === 'object'\n\t\t&& typeof global.sessionStorage === 'object'\n\t) {\n\t\treturn true;\n\t}\n\n\n\treturn true;\n\n}","exports":"function(lychee, global, attachments) {\n\n\tlet   _id         = 0;\n\tconst _Emitter    = lychee.import('lychee.event.Emitter');\n\tconst _JSON       = {\n\t\tencode: JSON.stringify,\n\t\tdecode: JSON.parse\n\t};\n\tlet   _PERSISTENT = null;\n\tlet   _TEMPORARY  = null;\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\t(function() {\n\n\t\tlet local   = false;\n\t\tlet session = false;\n\n\n\t\ttry {\n\n\t\t\tlocal = 'localStorage' in global;\n\n\t\t\tif (local === true) {\n\t\t\t\t_PERSISTENT = global.localStorage;\n\t\t\t}\n\n\t\t\tsession = 'sessionStorage' in global;\n\n\t\t\tif (session === true) {\n\t\t\t\t_TEMPORARY = global.sessionStorage;\n\t\t\t}\n\n\t\t} catch (err) {\n\n\t\t\tlocal   = false;\n\t\t\tsession = true;\n\n\t\t\t_PERSISTENT = null;\n\t\t\t_TEMPORARY  = {\n\n\t\t\t\tdata: {},\n\n\t\t\t\tgetItem: function(id) {\n\t\t\t\t\treturn this.data[id] || null;\n\t\t\t\t},\n\n\t\t\t\tsetItem: function(id, data) {\n\t\t\t\t\tthis.data[id] = data;\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tlet methods = [];\n\n\t\t\tif (local)   methods.push('Persistent');\n\t\t\tif (session) methods.push('Temporary');\n\n\t\t\tif (methods.length === 0) {\n\t\t\t\tconsole.error('lychee.Storage: Supported methods are NONE');\n\t\t\t} else {\n\t\t\t\tconsole.info('lychee.Storage: Supported methods are ' + methods.join(', '));\n\t\t\t}\n\n\t\t}\n\n\t})();\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _read_storage = function(silent) {\n\n\t\tsilent = silent === true;\n\n\n\t\tlet id   = this.id;\n\t\tlet blob = null;\n\n\n\t\tlet type = this.type;\n\t\tif (type === Composite.TYPE.persistent) {\n\n\t\t\tif (_PERSISTENT !== null) {\n\t\t\t\tblob = JSON.parse(_PERSISTENT.getItem(id));\n\t\t\t}\n\n\t\t} else if (type === Composite.TYPE.temporary) {\n\n\t\t\tif (_TEMPORARY !== null) {\n\t\t\t\tblob = JSON.parse(_TEMPORARY.getItem(id));\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (blob !== null) {\n\n\t\t\tif (this.model === null) {\n\n\t\t\t\tif (blob['@model'] instanceof Object) {\n\t\t\t\t\tthis.model = blob['@model'];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (Object.keys(this.__objects).length !== Object.keys(blob['@objects']).length) {\n\n\t\t\t\tif (blob['@objects'] instanceof Object) {\n\n\t\t\t\t\tthis.__objects = {};\n\n\t\t\t\t\tfor (let o in blob['@objects']) {\n\t\t\t\t\t\tthis.__objects[o] = blob['@objects'][o];\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (silent === false) {\n\t\t\t\t\t\tthis.trigger('sync', [ this.__objects ]);\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _write_storage = function(silent) {\n\n\t\tsilent = silent === true;\n\n\n\t\tlet operations = this.__operations;\n\t\tif (operations.length !== 0) {\n\n\t\t\twhile (operations.length > 0) {\n\n\t\t\t\tlet operation = operations.shift();\n\t\t\t\tif (operation.type === 'update') {\n\n\t\t\t\t\tif (this.__objects[operation.id] !== operation.object) {\n\t\t\t\t\t\tthis.__objects[operation.id] = operation.object;\n\t\t\t\t\t}\n\n\t\t\t\t} else if (operation.type === 'remove') {\n\n\t\t\t\t\tif (this.__objects[operation.id] !== undefined) {\n\t\t\t\t\t\tdelete this.__objects[operation.id];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tlet id   = this.id;\n\t\t\tlet blob = {\n\t\t\t\t'@model':   this.model,\n\t\t\t\t'@objects': this.__objects\n\t\t\t};\n\n\n\t\t\tlet type = this.type;\n\t\t\tif (type === Composite.TYPE.persistent) {\n\n\t\t\t\tif (_PERSISTENT !== null) {\n\t\t\t\t\t_PERSISTENT.setItem(id, _JSON.encode(blob));\n\t\t\t\t}\n\n\t\t\t} else if (type === Composite.TYPE.temporary) {\n\n\t\t\t\tif (_TEMPORARY !== null) {\n\t\t\t\t\t_TEMPORARY.setItem(id, _JSON.encode(blob));\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (silent === false) {\n\t\t\t\tthis.trigger('sync', [ this.__objects ]);\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.id    = 'lychee-Storage-' + _id++;\n\t\tthis.model = {};\n\t\tthis.type  = Composite.TYPE.persistent;\n\n\t\tthis.__objects    = {};\n\t\tthis.__operations = [];\n\n\n\t\tthis.setId(states.id);\n\t\tthis.setModel(states.model);\n\t\tthis.setType(states.type);\n\n\n\t\t_Emitter.call(this);\n\n\t\tstates = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\t_read_storage.call(this);\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\tpersistent: 0,\n\t\ttemporary:  1\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tsync: function(silent) {\n\n\t\t\tsilent = silent === true;\n\n\n\t\t\tlet result = false;\n\n\n\t\t\tif (this.__operations.length > 0) {\n\t\t\t\tresult = _write_storage.call(this, silent);\n\t\t\t} else {\n\t\t\t\tresult = _read_storage.call(this, silent);\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.objects instanceof Object) {\n\n\t\t\t\tthis.__objects = {};\n\n\t\t\t\tfor (let o in blob.objects) {\n\n\t\t\t\t\tlet object = blob.objects[o];\n\n\t\t\t\t\tif (lychee.interfaceof(this.model, object)) {\n\t\t\t\t\t\tthis.__objects[o] = object;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.Storage';\n\n\t\t\tlet states = {};\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.id.startsWith('lychee-Storage-') === false) states.id    = this.id;\n\t\t\tif (Object.keys(this.model).length !== 0)            states.model = this.model;\n\t\t\tif (this.type !== Composite.TYPE.persistent)         states.type  = this.type;\n\n\n\t\t\tif (Object.keys(this.__objects).length > 0) {\n\n\t\t\t\tblob.objects = {};\n\n\t\t\t\tfor (let o in this.__objects) {\n\n\t\t\t\t\tlet object = this.__objects[o];\n\t\t\t\t\tif (object instanceof Object) {\n\t\t\t\t\t\tblob.objects[o] = _JSON.decode(_JSON.encode(object));\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = states;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tcreate: function() {\n\t\t\treturn lychee.assignunlink({}, this.model);\n\t\t},\n\n\t\tfilter: function(callback, scope) {\n\n\t\t\tcallback = callback instanceof Function ? callback : null;\n\t\t\tscope    = scope !== undefined          ? scope    : this;\n\n\n\t\t\tlet filtered = [];\n\n\n\t\t\tif (callback !== null) {\n\n\t\t\t\tfor (let o in this.__objects) {\n\n\t\t\t\t\tlet object = this.__objects[o];\n\n\t\t\t\t\tif (callback.call(scope, object, o) === true) {\n\t\t\t\t\t\tfiltered.push(object);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\n\t\t\treturn filtered;\n\n\t\t},\n\n\t\tread: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet object = this.__objects[id] || null;\n\t\t\t\tif (object !== null) {\n\t\t\t\t\treturn object;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tremove: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet object = this.__objects[id] || null;\n\t\t\t\tif (object !== null) {\n\n\t\t\t\t\tthis.__operations.push({\n\t\t\t\t\t\ttype:   'remove',\n\t\t\t\t\t\tid:     id,\n\t\t\t\t\t\tobject: object\n\t\t\t\t\t});\n\n\n\t\t\t\t\t_write_storage.call(this);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\twrite: function(id, object) {\n\n\t\t\tid     = typeof id === 'string'                    ? id     : null;\n\t\t\tobject = lychee.diff(this.model, object) === false ? object : null;\n\n\n\t\t\tif (id !== null && object !== null) {\n\n\t\t\t\tthis.__operations.push({\n\t\t\t\t\ttype:   'update',\n\t\t\t\t\tid:     id,\n\t\t\t\t\tobject: object\n\t\t\t\t});\n\n\n\t\t\t\t_write_storage.call(this);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetId: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tthis.id = id;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetModel: function(model) {\n\n\t\t\tmodel = model instanceof Object ? model : null;\n\n\n\t\t\tif (model !== null) {\n\n\t\t\t\tthis.model = _JSON.decode(_JSON.encode(model));\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetType: function(type) {\n\n\t\t\ttype = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\n\t\t\tif (type !== null) {\n\n\t\t\t\tthis.type = type;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Jukebox":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.app.Jukebox","url":"/libraries/lychee/source/app/Jukebox.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_track = function(track) {\n\n\t\tif (\n\t\t\ttrack instanceof Music\n\t\t\t|| track instanceof Sound\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _play_track = function(track) {\n\n\t\tlet volume = this.volume;\n\n\t\tif (track instanceof Music && this.music === true) {\n\n\t\t\tlet music = this.__music;\n\t\t\tif (music !== null) {\n\t\t\t\tmusic.stop();\n\t\t\t}\n\n\n\t\t\tthis.__music = track;\n\t\t\tthis.__music.setVolume(volume);\n\t\t\tthis.__music.play();\n\n\n\t\t\treturn true;\n\n\t\t} else if (track instanceof Sound && this.sound === true) {\n\n\t\t\tlet found  = false;\n\t\t\tlet sounds = this.__sounds;\n\n\t\t\tfor (let s = 0, sl = sounds.length; s < sl; s++) {\n\n\t\t\t\tlet sound = sounds[s];\n\t\t\t\tif (sound === null) {\n\n\t\t\t\t\tsounds[s] = track.clone();\n\t\t\t\t\tsounds[s].setVolume(volume);\n\t\t\t\t\tsounds[s].play();\n\t\t\t\t\tfound = true;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t} else if (sound.isIdle === true) {\n\n\t\t\t\t\tif (sound.url === track.url) {\n\n\t\t\t\t\t\tsound.setVolume(volume);\n\t\t\t\t\t\tsound.play();\n\t\t\t\t\t\tfound = true;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (found === false) {\n\n\t\t\t\tif (track.isIdle === true) {\n\n\t\t\t\t\ttrack.setVolume(volume);\n\t\t\t\t\ttrack.play();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor (let s = 0, sl = sounds.length; s < sl; s++) {\n\n\t\t\t\t\t\tlet sound = sounds[s];\n\t\t\t\t\t\tif (sound.isIdle === true) {\n\n\t\t\t\t\t\t\tsounds[s] = null;\n\t\t\t\t\t\t\tsounds[s] = track.clone();\n\t\t\t\t\t\t\tsounds[s].setVolume(volume);\n\t\t\t\t\t\t\tsounds[s].play();\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _stop_track = function(track) {\n\n\t\tlet found  = false;\n\t\tlet music  = this.__music;\n\t\tlet sounds = this.__sounds;\n\n\n\t\tlet s, sl, sound = null;\n\n\t\tif (track instanceof Music) {\n\n\t\t\tif (music === track) {\n\t\t\t\tfound = true;\n\t\t\t\tmusic.stop();\n\t\t\t}\n\n\n\t\t\tthis.__music = null;\n\n\t\t} else if (track instanceof Sound) {\n\n\t\t\tfor (s = 0, sl = sounds.length; s < sl; s++) {\n\n\t\t\t\tsound = sounds[s];\n\n\t\t\t\tif (sound !== null && sound.url === track.url && sound.isIdle === false) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tsound.stop();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if (track === null) {\n\n\t\t\tif (music !== null) {\n\t\t\t\tfound = true;\n\t\t\t\tmusic.stop();\n\t\t\t}\n\n\n\t\t\tfor (s = 0, sl = sounds.length; s < sl; s++) {\n\n\t\t\t\tsound = sounds[s];\n\n\t\t\t\tif (sound !== null && sound.isIdle === false) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tsound.stop();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (found === true) {\n\t\t\treturn true;\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.channels = 8;\n\t\tthis.music    = true;\n\t\tthis.sound    = true;\n\t\tthis.volume   = 1.0;\n\n\t\tthis.__music  = null;\n\t\tthis.__sounds = [\n\t\t\tnull, null,\n\t\t\tnull, null,\n\t\t\tnull, null,\n\t\t\tnull, null\n\t\t];\n\n\n\t\tthis.setChannels(states.channels);\n\t\tthis.setMusic(states.music);\n\t\tthis.setSound(states.sound);\n\t\tthis.setVolume(states.volume);\n\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {};\n\n\n\t\t\tif (this.channels !== 8) states.channels = this.channels;\n\t\t\tif (this.music !== true) states.music    = this.music;\n\t\t\tif (this.sound !== true) states.sound    = this.sound;\n\t\t\tif (this.volume !== 1.0) states.volume   = this.volume;\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.app.Jukebox',\n\t\t\t\t'arguments':   [ states ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tplay: function(track) {\n\n\t\t\ttrack = _validate_track(track) ? track : null;\n\n\n\t\t\tif (track !== null) {\n\n\t\t\t\tlet result = _play_track.call(this, track);\n\t\t\t\tif (result === true) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tstop: function(track) {\n\n\t\t\ttrack = _validate_track(track) ? track : null;\n\n\n\t\t\tif (track !== null) {\n\n\t\t\t\tlet result = _stop_track.call(this, track);\n\t\t\t\tif (result === true) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetChannels: function(channels) {\n\n\t\t\tchannels = typeof channels === 'number' ? channels : null;\n\n\n\t\t\tif (channels !== null) {\n\n\t\t\t\tthis.channels = channels;\n\t\t\t\tthis.__sounds.fill(null);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetMusic: function(music) {\n\n\t\t\tmusic = typeof music === 'boolean' ? music : null;\n\n\n\t\t\tif (music !== null) {\n\n\t\t\t\tthis.music = music;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetSound: function(sound) {\n\n\t\t\tsound = typeof sound === 'boolean' ? sound : null;\n\n\n\t\t\tif (sound !== null) {\n\n\t\t\t\tthis.sound = sound;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetVolume: function(volume) {\n\n\t\t\tvolume = typeof volume === 'number' ? volume : null;\n\n\n\t\t\tif (volume !== null) {\n\n\t\t\t\tthis.volume = Math.min(Math.max(0, volume), 1);\n\n\n\t\t\t\tlet music = this.__music;\n\t\t\t\tif (music !== null) {\n\t\t\t\t\tmusic.setVolume(this.volume);\n\t\t\t\t}\n\n\t\t\t\tlet sounds = this.__sounds;\n\t\t\t\tfor (let s = 0, sl = sounds.length; s < sl; s++) {\n\n\t\t\t\t\tlet sound = sounds[s];\n\t\t\t\t\tif (sound !== null) {\n\t\t\t\t\t\tsound.setVolume(this.volume);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.Client":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.Client","url":"/libraries/lychee/source/net/Client.js"}],"blob":{"attaches":{},"requires":["lychee.net.client.Debugger","lychee.net.client.Stash","lychee.net.client.Storage"],"includes":["lychee.net.Tunnel"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Debugger = lychee.import('lychee.net.client.Debugger');\n\tconst _Stash    = lychee.import('lychee.net.client.Stash');\n\tconst _Storage  = lychee.import('lychee.net.client.Storage');\n\tconst _Tunnel   = lychee.import('lychee.net.Tunnel');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\t_Tunnel.call(this, states);\n\n\t\tstates = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tthis.bind('connect', function() {\n\t\t\t\tthis.addService(new _Debugger(this));\n\t\t\t}, this);\n\n\t\t}\n\n\n\t\tthis.bind('connect', function() {\n\n\t\t\tthis.addService(new _Stash(this));\n\t\t\tthis.addService(new _Storage(this));\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Tunnel.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.Client';\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.Server":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.Server","url":"/libraries/lychee/source/platform/html/net/Server.js"}],"blob":{"attaches":{},"tags":{"platform":"html"},"requires":["lychee.Storage","lychee.codec.JSON","lychee.net.Remote"],"includes":["lychee.event.Emitter"],"supports":"function(lychee, global) {\n\n\t// TODO: Feature Detection of Raw TCP Socket API\n\n\treturn true;\n\n}","exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\tconst _JSON    = lychee.import('lychee.codec.JSON');\n\tconst _Remote  = lychee.import('lychee.net.Remote');\n\tconst _Storage = lychee.import('lychee.Storage');\n\tconst _storage = new _Storage({\n\t\tid:    'server',\n\t\ttype:  _Storage.TYPE.persistent,\n\t\tmodel: {\n\t\t\tid:   '[::ffff]:1337',\n\t\t\ttype: 'client',\n\t\t\thost: '::ffff',\n\t\t\tport: 1337\n\t\t}\n\t});\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.codec  = _JSON;\n\t\tthis.host   = null;\n\t\tthis.port   = 1337;\n\t\tthis.remote = _Remote;\n\t\tthis.type   = Composite.TYPE.WS;\n\n\n\t\tthis.__isConnected = false;\n\t\tthis.__server      = null;\n\n\n\t\tthis.setCodec(states.codec);\n\t\tthis.setHost(states.host);\n\t\tthis.setPort(states.port);\n\t\tthis.setType(states.type);\n\n\n\t\t_Emitter.call(this);\n\n\t\tstates = null;\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('connect', function(remote) {\n\n\t\t\tlet id  = (/:/g.test(remote.host) ? '[' + remote.host + ']' : remote.host) + ':' + remote.port;\n\t\t\tlet obj = _storage.create();\n\t\t\tif (obj !== null) {\n\n\t\t\t\tobj.id   = id;\n\t\t\t\tobj.type = 'client';\n\t\t\t\tobj.host = remote.host;\n\t\t\t\tobj.port = remote.port;\n\n\t\t\t\t_storage.write(id, obj);\n\n\t\t\t}\n\n\t\t}, this);\n\n\t\tthis.bind('disconnect', function(remote) {\n\n\t\t\tlet id  = (/:/g.test(remote.host) ? '[' + remote.host + ']' : remote.host) + ':' + remote.port;\n\t\t\tlet obj = _storage.read(id);\n\t\t\tif (obj !== null) {\n\t\t\t\t_storage.remove(id);\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\tWS:   0,\n\t\tHTTP: 1,\n\t\tTCP:  2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.Server';\n\n\t\t\tlet states = {};\n\n\n\t\t\tif (this.codec !== _JSON)            states.codec  = lychee.serialize(this.codec);\n\t\t\tif (this.host !== 'localhost')       states.host   = this.host;\n\t\t\tif (this.port !== 1337)              states.port   = this.port;\n\t\t\tif (this.remote !== _Remote)         states.remote = lychee.serialize(this.remote);\n\t\t\tif (this.type !== Composite.TYPE.WS) states.type   = this.type;\n\n\n\t\t\tdata['arguments'][0] = states;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tconnect: function() {\n\n\t\t\tif (this.__isConnected === false) {\n\n\t\t\t\tif (lychee.debug === true) {\n\t\t\t\t\tconsole.log('lychee.net.Server: Connected to ' + this.host + ':' + this.port);\n\t\t\t\t}\n\n\n\t\t\t\t// TODO: Setup HTTP Server\n\n\t\t\t\t// let that      = this;\n\t\t\t\t// let server = new _net.Server();\n\n\n\t\t\t\t// server.on('connection', function(socket) {\n\n\t\t\t\t// \tlet host   = socket.remoteAddress || socket.server._connectionKey.split(':')[1];\n\t\t\t\t// \tlet port   = socket.remotePort    || socket.server._connectionKey.split(':')[2];\n\t\t\t\t// \tlet remote = new that.remote({\n\t\t\t\t// \t\tcodec: that.codec,\n\t\t\t\t// \t\thost:  host,\n\t\t\t\t// \t\tport:  port,\n\t\t\t\t// \t\ttype:  that.type\n\t\t\t\t// \t});\n\n\n\t\t\t\t// \tremote.bind('connect', function() {\n\t\t\t\t// \t\tthat.trigger('connect', [ this ]);\n\t\t\t\t// \t});\n\n\t\t\t\t// \tremote.bind('disconnect', function() {\n\t\t\t\t// \t\tthat.trigger('disconnect', [ this ]);\n\t\t\t\t// \t});\n\n\n\t\t\t\t// \tremote.connect(socket);\n\n\t\t\t\t// });\n\n\t\t\t\t// server.on('error', function() {\n\t\t\t\t// \tthis.close();\n\t\t\t\t// });\n\n\t\t\t\t// server.on('close', function() {\n\t\t\t\t// \tthat.__isConnected = false;\n\t\t\t\t// \tthat.__server      = null;\n\t\t\t\t// });\n\n\t\t\t\t// server.listen(this.port, this.host);\n\n\n\t\t\t\t// this.__server      = server;\n\t\t\t\t// this.__isConnected = true;\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tdisconnect: function() {\n\n\t\t\tlet server = this.__server;\n\t\t\tif (server !== null) {\n\t\t\t\tserver.close();\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * TUNNEL API\n\t\t */\n\n\t\tsetCodec: function(codec) {\n\n\t\t\tcodec = lychee.interfaceof(_JSON, codec) ? codec : null;\n\n\n\t\t\tif (codec !== null) {\n\n\t\t\t\tlet oldcodec = this.codec;\n\t\t\t\tif (oldcodec !== codec) {\n\n\t\t\t\t\tthis.codec = codec;\n\n\n\t\t\t\t\tif (this.__isConnected === true) {\n\t\t\t\t\t\tthis.disconnect();\n\t\t\t\t\t\tthis.connect();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetHost: function(host) {\n\n\t\t\thost = typeof host === 'string' ? host : null;\n\n\n\t\t\tif (host !== null) {\n\n\t\t\t\tthis.host = host;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetPort: function(port) {\n\n\t\t\tport = typeof port === 'number' ? (port | 0) : null;\n\n\n\t\t\tif (port !== null) {\n\n\t\t\t\tthis.port = port;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetRemote: function(remote) {\n\n\t\t\tremote = lychee.interfaceof(_Remote, remote) ? remote : null;\n\n\n\t\t\tif (remote !== null) {\n\n\t\t\t\tlet oldremote = this.remote;\n\t\t\t\tif (oldremote !== remote) {\n\n\t\t\t\t\tthis.remote = remote;\n\n\n\t\t\t\t\tif (this.__isConnected === true) {\n\t\t\t\t\t\tthis.disconnect();\n\t\t\t\t\t\tthis.connect();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetType: function(type) {\n\n\t\t\ttype = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\n\t\t\tif (type !== null) {\n\n\t\t\t\tlet oldtype = this.type;\n\t\t\t\tif (oldtype !== type) {\n\n\t\t\t\t\tthis.type = type;\n\n\n\t\t\t\t\tif (this.__isConnected === true) {\n\t\t\t\t\t\tthis.disconnect();\n\t\t\t\t\t\tthis.connect();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.State":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.app.State","url":"/libraries/lychee/source/app/State.js"}],"blob":{"attaches":{},"requires":["lychee.ai.Layer","lychee.app.Layer","lychee.ui.Layer"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Ai_layer  = lychee.import('lychee.ai.Layer');\n\tconst _App_layer = lychee.import('lychee.app.Layer');\n\tconst _Ui_layer  = lychee.import('lychee.ui.Layer');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_layer = function(layer) {\n\n\t\tif (\n\t\t\tlychee.interfaceof(_Ai_layer, layer)\n\t\t\t|| lychee.interfaceof(_App_layer, layer)\n\t\t\t|| lychee.interfaceof(_Ui_layer, layer)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _get_id = function(entity) {\n\n\t\tfor (let id in this.__map) {\n\n\t\t\tif (this.__map[id] === entity) {\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn null;\n\n\t};\n\n\tconst _recursive_deserialize = function(oldlayer, newlayer) {\n\n\t\tif (typeof oldlayer.setType === 'function') {\n\t\t\toldlayer.setType(newlayer.type);\n\t\t}\n\n\t\tif (typeof oldlayer.setVisible === 'function') {\n\t\t\toldlayer.setVisible(newlayer.visible);\n\t\t}\n\n\n\t\tfor (let e = 0, el = newlayer.entities.length; e < el; e++) {\n\n\t\t\tlet entity = newlayer.entities[e];\n\t\t\tlet id     = _get_id.call(newlayer, entity);\n\t\t\tlet other  = oldlayer.getEntity(id);\n\n\t\t\tif (other === null) {\n\n\t\t\t\toldlayer.setEntity(id, entity);\n\n\t\t\t} else if (typeof other.entities !== 'undefined' && typeof entity.entities !== 'undefined') {\n\n\t\t\t\t_recursive_deserialize(other, entity);\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_key = function(key, name, delta) {\n\n\t\tlet focus = this.__focus;\n\t\tif (focus !== null) {\n\n\t\t\tlet result = focus.trigger('key', [ key, name, delta ]);\n\t\t\tif (result === true) {\n\n\t\t\t\tif (focus.state === 'default') {\n\t\t\t\t\tthis.__focus = null;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_reshape = function(orientation, rotation, width, height) {\n\n\t\tlet renderer = this.renderer;\n\t\tif (renderer !== null) {\n\n\t\t\tlet position = {\n\t\t\t\tx: 1 / 2 * renderer.width,\n\t\t\t\ty: 1 / 2 * renderer.height\n\t\t\t};\n\n\n\t\t\tfor (let id in this.__layers) {\n\n\t\t\t\tlet layer = this.__layers[id];\n\n\t\t\t\tlayer.setPosition(position);\n\t\t\t\tlayer.trigger('relayout');\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_scroll = function(id, direction, position, delta) {\n\n\t\tlet args = [ id, direction, {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t}, delta ];\n\n\n\t\tlet x = position.x;\n\t\tlet y = position.y;\n\n\n\t\tlet renderer = this.renderer;\n\t\tif (renderer !== null) {\n\n\t\t\tx -= renderer.offset.x;\n\t\t\ty -= renderer.offset.y;\n\n\t\t}\n\n\n\t\tfor (let lid in this.__layers) {\n\n\t\t\tlet layer = this.__layers[lid];\n\t\t\tif (layer.visible === false) continue;\n\n\t\t\tif (lychee.interfaceof(_Ui_layer, layer)) {\n\n\t\t\t\targs[2].x = x - layer.position.x;\n\t\t\t\targs[2].y = y - layer.position.y;\n\n\n\t\t\t\tlet result = layer.trigger('scroll', args);\n\t\t\t\tif (result !== true && result !== false && result !== null) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_swipe = function(id, type, position, delta, swipe) {\n\n\t\tlet touch = this.__touches[id];\n\t\tif (touch.entity !== null) {\n\n\t\t\tif (touch.layer.visible === false) return;\n\n\n\t\t\tlet args   = [ id, type, position, delta, swipe ];\n\t\t\tlet result = false;\n\n\t\t\tlet renderer = this.renderer;\n\t\t\tif (renderer !== null) {\n\n\t\t\t\targs[2].x -= renderer.offset.x;\n\t\t\t\targs[2].y -= renderer.offset.y;\n\n\t\t\t}\n\n\n\t\t\tif (type === 'start') {\n\n\t\t\t\t_trace_entity_offset.call(\n\t\t\t\t\ttouch.offset,\n\t\t\t\t\ttouch.entity,\n\t\t\t\t\ttouch.layer\n\t\t\t\t);\n\n\n\t\t\t\targs[2].x -= touch.offset.x;\n\t\t\t\targs[2].y -= touch.offset.y;\n\t\t\t\tresult     = touch.entity.trigger('swipe', args);\n\n\t\t\t\tif (result === false) {\n\t\t\t\t\ttouch.entity = null;\n\t\t\t\t\ttouch.layer  = null;\n\t\t\t\t}\n\n\t\t\t} else if (type === 'move') {\n\n\t\t\t\targs[2].x -= touch.offset.x;\n\t\t\t\targs[2].y -= touch.offset.y;\n\t\t\t\tresult     = touch.entity.trigger('swipe', args);\n\n\t\t\t\tif (result === false) {\n\t\t\t\t\ttouch.entity = null;\n\t\t\t\t\ttouch.layer  = null;\n\t\t\t\t}\n\n\t\t\t} else if (type === 'end') {\n\n\t\t\t\targs[2].x -= touch.offset.x;\n\t\t\t\targs[2].y -= touch.offset.y;\n\t\t\t\tresult     = touch.entity.trigger('swipe', args);\n\n\t\t\t\tif (result === false) {\n\t\t\t\t\ttouch.entity = null;\n\t\t\t\t\ttouch.layer  = null;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_touch = function(id, position, delta) {\n\n\t\tlet args = [ id, {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t}, delta ];\n\n\n\t\tlet x = position.x;\n\t\tlet y = position.y;\n\n\n\t\tlet renderer = this.renderer;\n\t\tif (renderer !== null) {\n\n\t\t\tx -= renderer.offset.x;\n\t\t\ty -= renderer.offset.y;\n\n\t\t}\n\n\n\t\tlet touch_layer  = null;\n\t\tlet touch_entity = null;\n\n\t\tfor (let lid in this.__layers) {\n\n\t\t\tlet layer = this.__layers[lid];\n\t\t\tif (layer.visible === false) continue;\n\n\t\t\tif (lychee.interfaceof(_Ui_layer, layer)) {\n\n\t\t\t\targs[1].x = x - layer.position.x;\n\t\t\t\targs[1].y = y - layer.position.y;\n\n\n\t\t\t\tlet result = layer.trigger('touch', args);\n\t\t\t\tif (result !== true && result !== false && result !== null) {\n\n\t\t\t\t\ttouch_entity = result;\n\t\t\t\t\ttouch_layer  = layer;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet old_focus = this.__focus;\n\t\tlet new_focus = touch_entity;\n\n\t\t// 1. Reset Touch trace data if no Entity was touched\n\t\tif (new_focus === null) {\n\t\t\tthis.__touches[id].entity = null;\n\t\t\tthis.__touches[id].layer  = null;\n\t\t}\n\n\n\t\t// 2. Change Focus State Interaction\n\t\tif (new_focus !== old_focus) {\n\n\t\t\tif (old_focus !== null) {\n\n\t\t\t\tif (old_focus.state !== 'default') {\n\t\t\t\t\told_focus.trigger('blur');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (new_focus !== null) {\n\n\t\t\t\tif (new_focus.state === 'default') {\n\t\t\t\t\tnew_focus.trigger('focus');\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis.__focus = new_focus;\n\n\t\t}\n\n\n\t\t// 3. Prepare UI Swipe event\n\t\tif (touch_entity !== null) {\n\n\t\t\tlet touch = this.__touches[id];\n\n\t\t\ttouch.entity = new_focus;\n\t\t\ttouch.layer  = touch_layer;\n\n\n\t\t\t_trace_entity_offset.call(\n\t\t\t\ttouch.offset,\n\t\t\t\ttouch.entity,\n\t\t\t\ttouch.layer\n\t\t\t);\n\n\t\t}\n\n\t};\n\n\tconst _trace_entity_offset = function(entity, layer, offsetX, offsetY) {\n\n\t\tif (offsetX === undefined || offsetY === undefined) {\n\n\t\t\tthis.x  = 0;\n\t\t\tthis.y  = 0;\n\t\t\toffsetX = layer.position.x;\n\t\t\toffsetY = layer.position.y;\n\n\t\t}\n\n\n\t\tif (layer === entity) {\n\n\t\t\tthis.x = offsetX;\n\t\t\tthis.y = offsetY;\n\n\t\t\treturn true;\n\n\t\t} else if (layer.entities !== undefined) {\n\n\t\t\tlet entities = layer.entities;\n\t\t\tfor (let e = entities.length - 1; e >= 0; e--) {\n\n\t\t\t\tlet dx = layer.offset.x + entities[e].position.x;\n\t\t\t\tlet dy = layer.offset.y + entities[e].position.y;\n\n\n\t\t\t\tlet result = _trace_entity_offset.call(\n\t\t\t\t\tthis,\n\t\t\t\t\tentity,\n\t\t\t\t\tentities[e],\n\t\t\t\t\toffsetX + dx,\n\t\t\t\t\toffsetY + dy\n\t\t\t\t);\n\n\t\t\t\tif (result === true) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(main) {\n\n\t\tthis.main     = main          || null;\n\t\tthis.client   = main.client   || null;\n\t\tthis.server   = main.server   || null;\n\n\t\tthis.input    = main.input    || null;\n\t\tthis.jukebox  = main.jukebox  || null;\n\t\tthis.loop     = main.loop     || null;\n\t\tthis.renderer = main.renderer || null;\n\t\tthis.storage  = main.storage  || null;\n\t\tthis.viewport = main.viewport || null;\n\n\n\t\tthis.__layers_map = [];\n\t\tthis.__layers     = {};\n\t\tthis.__focus      = null;\n\t\tthis.__touches    = [\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } }\n\t\t];\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tlet viewport = this.viewport;\n\t\tif (viewport !== null) {\n\t\t\tviewport.bind('reshape', _on_reshape, this);\n\t\t}\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * STATE API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.layers) {\n\n\t\t\t\tfor (let laid in blob.layers) {\n\n\t\t\t\t\tlet tmp1 = this.__layers[laid] || null;\n\t\t\t\t\tlet tmp2 = lychee.deserialize(blob.layers[laid]);\n\n\t\t\t\t\tif (tmp1 === null && tmp2 !== null) {\n\n\t\t\t\t\t\tthis.setLayer(laid, tmp2);\n\n\t\t\t\t\t} else if (tmp1 !== null && tmp2 !== null) {\n\n\t\t\t\t\t\t_recursive_deserialize.call(this, tmp1, tmp2);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet main = this.main !== null ? '#MAIN' : null;\n\t\t\tlet blob = {};\n\n\n\t\t\tif (Object.keys(this.__layers).length > 0) {\n\n\t\t\t\tblob.layers = {};\n\n\t\t\t\tfor (let lid in this.__layers) {\n\t\t\t\t\tblob.layers[lid] = lychee.serialize(this.__layers[lid]);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.app.State',\n\t\t\t\t'arguments':   [ main ],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\t\tenter: function(oncomplete) {\n\n\t\t\toncomplete = oncomplete instanceof Function ? oncomplete : null;\n\n\n\t\t\tlet input = this.input;\n\t\t\tif (input !== null) {\n\t\t\t\tinput.bind('key',    _on_key,    this);\n\t\t\t\tinput.bind('scroll', _on_scroll, this);\n\t\t\t\tinput.bind('swipe',  _on_swipe,  this);\n\t\t\t\tinput.bind('touch',  _on_touch,  this);\n\t\t\t}\n\n\n\t\t\tif (oncomplete !== null) {\n\t\t\t\toncomplete(true);\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tleave: function(oncomplete) {\n\n\t\t\toncomplete = oncomplete instanceof Function ? oncomplete : null;\n\n\n\t\t\tlet focus = this.__focus;\n\t\t\tif (focus !== null) {\n\t\t\t\tfocus.trigger('blur');\n\t\t\t}\n\n\n\t\t\tfor (let t = 0, tl = this.__touches.length; t < tl; t++) {\n\n\t\t\t\tlet touch = this.__touches[t];\n\t\t\t\tif (touch.entity !== null) {\n\t\t\t\t\ttouch.entity = null;\n\t\t\t\t\ttouch.layer  = null;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis.__focus = null;\n\n\n\t\t\tlet input = this.input;\n\t\t\tif (input !== null) {\n\t\t\t\tinput.unbind('touch',  _on_touch,  this);\n\t\t\t\tinput.unbind('swipe',  _on_swipe,  this);\n\t\t\t\tinput.unbind('scroll', _on_scroll, this);\n\t\t\t\tinput.unbind('key',    _on_key,    this);\n\t\t\t}\n\n\n\t\t\tif (oncomplete !== null) {\n\t\t\t\toncomplete(true);\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tquery: function(query) {\n\n\t\t\tquery = typeof query === 'string' ? query : null;\n\n\n\t\t\tif (query !== null) {\n\n\t\t\t\tlet tmp   = query.split(' > ');\n\t\t\t\tlet layer = this.getLayer(tmp[0].trim());\n\t\t\t\tif (layer !== null) {\n\n\t\t\t\t\tlet entity = layer;\n\n\t\t\t\t\tfor (let t = 1, tl = tmp.length; t < tl; t++) {\n\n\t\t\t\t\t\tentity = entity.getEntity(tmp[t].trim());\n\n\t\t\t\t\t\tif (entity === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn entity;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\trender: function(clock, delta, custom) {\n\n\t\t\tcustom = custom === true;\n\n\n\t\t\tlet renderer = this.renderer;\n\t\t\tif (renderer !== null) {\n\n\t\t\t\tif (custom === false) {\n\t\t\t\t\trenderer.clear();\n\t\t\t\t}\n\n\n\t\t\t\tlet layers_map = this.__layers_map;\n\t\t\t\tfor (let l = 0, ll = layers_map.length; l < ll; l++) {\n\n\t\t\t\t\tlet layer = this.__layers[layers_map[l]];\n\t\t\t\t\tif (layer.visible === false) continue;\n\n\t\t\t\t\tlayer.render(\n\t\t\t\t\t\trenderer,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\n\t\t\t\tif (custom === false) {\n\t\t\t\t\trenderer.flush();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tfor (let id in this.__layers) {\n\n\t\t\t\tlet layer = this.__layers[id];\n\t\t\t\tif (layer.visible === false) continue;\n\n\t\t\t\tlayer.update(clock, delta);\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * LAYER API\n\t\t */\n\n\t\tsetLayer: function(id, layer) {\n\n\t\t\tid    = typeof id === 'string'          ? id    : null;\n\t\t\tlayer = _validate_layer(layer) === true ? layer : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tif (layer !== null) {\n\n\t\t\t\t\tthis.__layers[id] = layer;\n\t\t\t\t\tthis.__layers_map = Object.keys(this.__layers).sort();\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetLayer: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.__layers[id] !== undefined) {\n\t\t\t\treturn this.__layers[id];\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tremoveLayer: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.__layers[id] !== undefined) {\n\n\t\t\t\tdelete this.__layers[id];\n\t\t\t\tthis.__layers_map = Object.keys(this.__layers).sort();\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.Input":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.Input","url":"/libraries/lychee/source/platform/html/Input.js"}],"blob":{"attaches":{},"tags":{"platform":"html"},"includes":["lychee.event.Emitter"],"supports":"function(lychee, global) {\n\n\tif (typeof global.addEventListener === 'function') {\n\t\treturn true;\n\t}\n\n\n\treturn false;\n\n}","exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter   = lychee.import('lychee.event.Emitter');\n\tconst _INSTANCES = [];\n\n\n\n\t/*\n\t * EVENTS\n\t */\n\n\tlet _mouseactive = false;\n\tlet _wheelactive = Date.now();\n\n\tconst _listeners = {\n\n\t\tkeydown: function(event) {\n\n\t\t\tlet handled = false;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\thandled = _process_key.call(_INSTANCES[i], event.keyCode, event.ctrlKey, event.altKey, event.shiftKey) || handled;\n\t\t\t}\n\n\n\t\t\tif (handled === true) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t},\n\n\t\ttouchstart: function(event) {\n\n\t\t\tlet handled = false;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tif (event.touches && event.touches.length) {\n\n\t\t\t\t\tfor (let t = 0, tl = event.touches.length; t < tl; t++) {\n\t\t\t\t\t\thandled = _process_touch.call(_INSTANCES[i], t, event.touches[t].pageX, event.touches[t].pageY) || handled;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\thandled = _process_touch.call(_INSTANCES[i], 0, event.pageX, event.pageY) || handled;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Prevent scrolling and swiping behaviour\n\t\t\tif (handled === true) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t},\n\n\t\ttouchmove: function(event) {\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tif (event.touches && event.touches.length) {\n\n\t\t\t\t\tfor (let t = 0, tl = event.touches.length; t < tl; t++) {\n\t\t\t\t\t\t_process_swipe.call(_INSTANCES[i], t, 'move', event.touches[t].pageX, event.touches[t].pageY);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t_process_swipe.call(_INSTANCES[i], 0, 'move', event.pageX, event.pageY);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\ttouchend: function(event) {\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tif (event.touches && event.touches.length) {\n\n\t\t\t\t\tfor (let t = 0, tl = event.touches.length; t < tl; t++) {\n\t\t\t\t\t\t_process_swipe.call(_INSTANCES[i], t, 'end', event.touches[t].pageX, event.touches[t].pageY);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t_process_swipe.call(_INSTANCES[i], 0, 'end', event.pageX, event.pageY);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tmousestart: function(event) {\n\n\t\t\t_mouseactive = true;\n\n\n\t\t\tlet handled = false;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\thandled = _process_touch.call(_INSTANCES[i], 0, event.pageX, event.pageY) || handled;\n\t\t\t}\n\n\n\t\t\t// Prevent drag of canvas as image\n\t\t\tif (handled === true) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t},\n\n\t\tmousemove: function(event) {\n\n\t\t\tif (_mouseactive === false) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\tlet handled = false;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\thandled = _process_swipe.call(_INSTANCES[i], 0, 'move', event.pageX, event.pageY) || handled;\n\t\t\t}\n\n\n\t\t\t// Prevent selection of canvas as content\n\t\t\tif (handled === true) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t},\n\n\t\tmouseend: function(event) {\n\n\t\t\tif (_mouseactive === false) return;\n\n\t\t\t_mouseactive = false;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t_process_swipe.call(_INSTANCES[i], 0, 'end', event.pageX, event.pageY);\n\t\t\t}\n\n\t\t},\n\n\t\tmousewheel: function(event) {\n\n\t\t\tlet time = Date.now();\n\t\t\tif (time < _wheelactive + 100) {\n\t\t\t\t_wheelactive = time;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_wheelactive = time;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t_process_scroll.call(_INSTANCES[i], 0, event.pageX, event.pageY, event.wheelDeltaX, event.wheelDeltaY);\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\t(function() {\n\n\t\tlet keyboard = 'onkeydown' in global;\n\t\tlet touch    = 'ontouchstart' in global;\n\t\tlet mouse    = 'onmousedown' in global;\n\n\n\t\tif (typeof global.addEventListener === 'function') {\n\n\t\t\tif (keyboard) {\n\t\t\t\tglobal.addEventListener('keydown',    _listeners.keydown,    true);\n\t\t\t}\n\n\t\t\tif (touch) {\n\n\t\t\t\tglobal.addEventListener('touchstart', _listeners.touchstart, true);\n\t\t\t\tglobal.addEventListener('touchmove',  _listeners.touchmove,  true);\n\t\t\t\tglobal.addEventListener('touchend',   _listeners.touchend,   true);\n\n\t\t\t} else if (mouse) {\n\n\t\t\t\tglobal.addEventListener('mousedown',  _listeners.mousestart, true);\n\t\t\t\tglobal.addEventListener('mousemove',  _listeners.mousemove,  true);\n\t\t\t\tglobal.addEventListener('mouseup',    _listeners.mouseend,   true);\n\t\t\t\tglobal.addEventListener('mouseout',   _listeners.mouseend,   true);\n\t\t\t\tglobal.addEventListener('mousewheel', _listeners.mousewheel, true);\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tlet methods = [];\n\n\t\t\tif (keyboard) methods.push('Keyboard');\n\t\t\tif (touch)    methods.push('Touch');\n\t\t\tif (mouse)    methods.push('Mouse');\n\n\t\t\tif (methods.length === 0) {\n\t\t\t\tconsole.error('lychee.Input: Supported methods are NONE');\n\t\t\t} else {\n\t\t\t\tconsole.info('lychee.Input: Supported methods are ' + methods.join(', '));\n\t\t\t}\n\n\t\t}\n\n\t})();\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _KEYMAP = {\n\n\t\t 8:  'backspace',\n\t\t 9:  'tab',\n\t\t13:  'enter',\n\t\t16:  'shift',\n\t\t17:  'ctrl',\n\t\t18:  'alt',\n\t\t19:  'pause',\n\t\t// 20:  'capslock',\n\n\t\t27:  'escape',\n\t\t32:  'space',\n\t\t33:  'page-up',\n\t\t34:  'page-down',\n\t\t35:  'end',\n\t\t36:  'home',\n\n\t\t37:  'arrow-left',\n\t\t38:  'arrow-up',\n\t\t39:  'arrow-right',\n\t\t40:  'arrow-down',\n\n\t\t45:  'insert',\n\t\t46:  'delete',\n\n\t\t65:  'a',\n\t\t66:  'b',\n\t\t67:  'c',\n\t\t68:  'd',\n\t\t69:  'e',\n\t\t70:  'f',\n\t\t71:  'g',\n\t\t72:  'h',\n\t\t73:  'i',\n\t\t74:  'j',\n\t\t75:  'k',\n\t\t76:  'l',\n\t\t77:  'm',\n\t\t78:  'n',\n\t\t79:  'o',\n\t\t80:  'p',\n\t\t81:  'q',\n\t\t82:  'r',\n\t\t83:  's',\n\t\t84:  't',\n\t\t85:  'u',\n\t\t86:  'v',\n\t\t87:  'w',\n\t\t88:  'x',\n\t\t89:  'y',\n\t\t90:  'z',\n\n\t\t96:  '0',\n\t\t97:  '1',\n\t\t98:  '2',\n\t\t99:  '3',\n\t\t100: '4',\n\t\t101: '5',\n\t\t102: '6',\n\t\t103: '7',\n\t\t104: '8',\n\t\t105: '9',\n\t\t106: '*',\n\t\t107: '+',\n\t\t109: '-',\n\t\t110: '.',\n\t\t111: '/',\n\n\t\t112: 'f1',\n\t\t113: 'f2',\n\t\t114: 'f3',\n\t\t115: 'f4',\n\t\t116: 'f5',\n\t\t117: 'f6',\n\t\t118: 'f7',\n\t\t119: 'f8',\n\t\t120: 'f9',\n\t\t121: 'f10',\n\t\t122: 'f11',\n\t\t123: 'f12'\n\n\t};\n\n\tconst _SPECIALMAP = {\n\n\t\t48:  [ '0', ')' ],\n\t\t49:  [ '1', '!' ],\n\t\t50:  [ '2', '@' ],\n\t\t51:  [ '3', '#' ],\n\t\t52:  [ '4', '$' ],\n\t\t53:  [ '5', '%' ],\n\t\t54:  [ '6', '^' ],\n\t\t55:  [ '7', '&' ],\n\t\t56:  [ '8', '*' ],\n\t\t57:  [ '9', '(' ],\n\n\t\t186: [ ';', ':' ],\n\t\t187: [ '=', '+' ],\n\t\t188: [ ',', '<' ],\n\t\t189: [ '-', '_' ],\n\t\t190: [ '.', '>' ],\n\t\t191: [ '/', '?' ],\n\t\t192: [ '`', '~' ],\n\n\t\t219: [ '[',  '{' ],\n\t\t220: [ '\\\\', '|' ],\n\t\t221: [ ']',  '}' ],\n\t\t222: [ '\\'', '\"' ]\n\n\t};\n\n\tconst _process_key = function(code, ctrl, alt, shift) {\n\n\t\tif (this.key === false) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tctrl  =  ctrl === true;\n\t\talt   =   alt === true;\n\t\tshift = shift === true;\n\n\n\t\tif (_KEYMAP[code] === undefined && _SPECIALMAP[code] === undefined) {\n\n\t\t\treturn false;\n\n\t\t} else if (this.keymodifier === false) {\n\n\t\t\tif (code === 16 && shift === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (code === 17 && ctrl === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (code === 18 && alt === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet key     = null;\n\t\tlet name    = null;\n\t\tlet tmp     = null;\n\t\tlet handled = false;\n\t\tlet delta   = Date.now() - this.__clock.key;\n\n\t\tif (delta < this.delay) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.__clock.key = Date.now();\n\t\t}\n\n\n\t\t// 0. Computation of Special Characters\n\t\tif (_SPECIALMAP[code] !== undefined) {\n\n\t\t\ttmp  = _SPECIALMAP[code];\n\t\t\tkey  = shift === true ? tmp[1] : tmp[0];\n\t\t\tname = '';\n\n\t\t\tif (ctrl  === true) name += 'ctrl-';\n\t\t\tif (alt   === true) name += 'alt-';\n\t\t\tif (shift === true) name += 'shift-';\n\n\t\t\tname += tmp[0];\n\n\t\t// 0. Computation of Normal Characters\n\t\t} else if (_KEYMAP[code] !== undefined) {\n\n\t\t\tkey  = _KEYMAP[code];\n\t\t\tname = '';\n\n\t\t\tif (ctrl  === true && key !== 'ctrl')  name += 'ctrl-';\n\t\t\tif (alt   === true && key !== 'alt')   name += 'alt-';\n\t\t\tif (shift === true && key !== 'shift') name += 'shift-';\n\n\n\t\t\tif (shift === true && key !== 'ctrl' && key !== 'alt' && key !== 'shift') {\n\n\t\t\t\ttmp = String.fromCharCode(code);\n\t\t\t\tkey = tmp.trim() !== '' ? tmp : key;\n\n\t\t\t}\n\n\n\t\t\tname += key.toLowerCase();\n\n\t\t}\n\n\n\t\t// 1. Event API\n\t\tif (key !== null) {\n\n\t\t\t// bind('key') and bind('ctrl-a');\n\t\t\t// bind('!')   and bind('shift-1');\n\n\t\t\thandled = this.trigger('key', [ key, name, delta ]) || handled;\n\t\t\thandled = this.trigger(name,  [ delta ])            || handled;\n\n\t\t}\n\n\n\t\treturn handled;\n\n\t};\n\n\tconst _process_scroll = function(id, x, y, dx, dy) {\n\n\t\tif (this.scroll === false) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tlet direction = null;\n\t\tlet position  = { x: x, y: y };\n\t\tlet handled   = false;\n\t\tlet delta     = Date.now() - this.__clock.scroll;\n\n\t\tif (delta < this.delay) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.__clock.scroll = Date.now();\n\t\t}\n\n\n\t\t// 0. Computation\n\t\tif (Math.abs(dx) > Math.abs(dy)) {\n\t\t\tdirection = dx < 0 ? 'right' : 'left';\n\t\t} else {\n\t\t\tdirection = dy < 0 ? 'down'  : 'up';\n\t\t}\n\n\n\t\t// 1. Event API\n\t\tif (direction !== null) {\n\n\t\t\thandled = this.trigger('scroll', [ id, direction, position, delta ]) || handled;\n\n\t\t}\n\n\n\t\treturn handled;\n\n\t};\n\n\tconst _process_swipe = function(id, state, x, y) {\n\n\t\tif (this.swipe === false) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tlet position = { x: x, y: y };\n\t\tlet swipe    = { x: 0, y: 0 };\n\t\tlet handled  = false;\n\t\tlet delta    = Date.now() - this.__clock.swipe;\n\n\t\tif (delta < this.delay) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.__clock.swipe = Date.now();\n\t\t}\n\n\n\t\t// 0. Computation of Swipe\n\t\tif (this.__swipes[id] !== null) {\n\n\t\t\t// FIX for touchend events\n\t\t\tif (state === 'end' && x === 0 && y === 0) {\n\t\t\t\tposition.x = this.__swipes[id].x;\n\t\t\t\tposition.y = this.__swipes[id].y;\n\t\t\t}\n\n\t\t\tswipe.x = x - this.__swipes[id].x;\n\t\t\tswipe.y = y - this.__swipes[id].y;\n\n\t\t}\n\n\n\t\t// 1. Event API\n\t\tif (state === 'start') {\n\n\t\t\thandled = this.trigger(\n\t\t\t\t'swipe',\n\t\t\t\t[ id, 'start', position, delta, swipe ]\n\t\t\t) || handled;\n\n\t\t\tthis.__swipes[id] = {\n\t\t\t\tx: x, y: y\n\t\t\t};\n\n\t\t} else if (state === 'move') {\n\n\t\t\thandled = this.trigger(\n\t\t\t\t'swipe',\n\t\t\t\t[ id, 'move', position, delta, swipe ]\n\t\t\t) || handled;\n\n\t\t} else if (state === 'end') {\n\n\t\t\thandled = this.trigger(\n\t\t\t\t'swipe',\n\t\t\t\t[ id, 'end', position, delta, swipe ]\n\t\t\t) || handled;\n\n\t\t\tthis.__swipes[id] = null;\n\n\t\t}\n\n\n\t\treturn handled;\n\n\t};\n\n\tconst _process_touch = function(id, x, y) {\n\n\t\tif (this.touch === false && this.swipe === true) {\n\n\t\t\tif (this.__swipes[id] === null) {\n\t\t\t\t_process_swipe.call(this, id, 'start', x, y);\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t} else if (this.touch === false) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\n\t\tlet position = { x: x, y: y };\n\t\tlet handled  = false;\n\t\tlet delta    = Date.now() - this.__clock.touch;\n\n\t\tif (delta < this.delay) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.__clock.touch = Date.now();\n\t\t}\n\n\n\t\t// 1. Event API\n\t\thandled = this.trigger('touch', [ id, position, delta ]) || handled;\n\n\n\t\t// 1. Event API: Swipe only for tracked Touches\n\t\tif (this.__swipes[id] === null) {\n\t\t\thandled = _process_swipe.call(this, id, 'start', x, y) || handled;\n\t\t}\n\n\n\t\treturn handled;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.delay       = 0;\n\t\tthis.key         = false;\n\t\tthis.keymodifier = false;\n\t\tthis.touch       = false;\n\t\tthis.scroll      = false;\n\t\tthis.swipe       = false;\n\n\t\tthis.__clock   = {\n\t\t\tkey:    Date.now(),\n\t\t\tscroll: Date.now(),\n\t\t\tswipe:  Date.now(),\n\t\t\ttouch:  Date.now()\n\t\t};\n\t\tthis.__swipes  = {\n\t\t\t0: null, 1: null,\n\t\t\t2: null, 3: null,\n\t\t\t4: null, 5: null,\n\t\t\t6: null, 7: null,\n\t\t\t8: null, 9: null\n\t\t};\n\n\n\t\tthis.setDelay(states.delay);\n\t\tthis.setKey(states.key);\n\t\tthis.setKeyModifier(states.keymodifier);\n\t\tthis.setScroll(states.scroll);\n\t\tthis.setSwipe(states.swipe);\n\t\tthis.setTouch(states.touch);\n\n\n\t\t_Emitter.call(this);\n\n\t\t_INSTANCES.push(this);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\tdestroy: function() {\n\n\t\t\tlet found = false;\n\n\t\t\tfor (let i = 0, il = _INSTANCES.length; i < il; i++) {\n\n\t\t\t\tif (_INSTANCES[i] === this) {\n\t\t\t\t\t_INSTANCES.splice(i, 1);\n\t\t\t\t\tfound = true;\n\t\t\t\t\til--;\n\t\t\t\t\ti--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.unbind();\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.Input';\n\n\t\t\tlet states = {};\n\n\n\t\t\tif (this.delay !== 0)           states.delay       = this.delay;\n\t\t\tif (this.key !== false)         states.key         = this.key;\n\t\t\tif (this.keymodifier !== false) states.keymodifier = this.keymodifier;\n\t\t\tif (this.touch !== false)       states.touch       = this.touch;\n\t\t\tif (this.swipe !== false)       states.swipe       = this.swipe;\n\n\n\t\t\tdata['arguments'][0] = states;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetDelay: function(delay) {\n\n\t\t\tdelay = typeof delay === 'number' ? delay : null;\n\n\n\t\t\tif (delay !== null) {\n\n\t\t\t\tthis.delay = delay;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetKey: function(key) {\n\n\t\t\tkey = typeof key === 'boolean' ? key : null;\n\n\n\t\t\tif (key !== null) {\n\n\t\t\t\tthis.key = key;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetKeyModifier: function(keymodifier) {\n\n\t\t\tkeymodifier = typeof keymodifier === 'boolean' ? keymodifier : null;\n\n\n\t\t\tif (keymodifier !== null) {\n\n\t\t\t\tthis.keymodifier = keymodifier;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetTouch: function(touch) {\n\n\t\t\ttouch = typeof touch === 'boolean' ? touch : null;\n\n\n\t\t\tif (touch !== null) {\n\n\t\t\t\tthis.touch = touch;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetScroll: function(scroll) {\n\n\t\t\tscroll = typeof scroll === 'boolean' ? scroll : null;\n\n\n\t\t\tif (scroll !== null) {\n\n\t\t\t\tthis.scroll = scroll;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetSwipe: function(swipe) {\n\n\t\t\tswipe = typeof swipe === 'boolean' ? swipe : null;\n\n\n\t\t\tif (swipe !== null) {\n\n\t\t\t\tthis.swipe = swipe;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.Renderer":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.Renderer","url":"/libraries/lychee/source/platform/html/Renderer.js"}],"blob":{"attaches":{},"tags":{"platform":"html"},"supports":"function(lychee, global) {\n\n\t/*\n\t * XXX: typeof CanvasRenderingContext2D is:\n\t * > function in Chrome, Firefox, IE10\n\t * > object in Safari, Safari Mobile\n\t */\n\n\n\tif (\n\t\ttypeof global.document !== 'undefined'\n\t\t&& typeof global.document.createElement === 'function'\n\t\t&& typeof global.CanvasRenderingContext2D !== 'undefined'\n\t) {\n\t\treturn true;\n\t}\n\n\n\treturn false;\n\n}","exports":"function(lychee, global, attachments) {\n\n\tconst _PI2  = Math.PI * 2;\n\tlet   _id   = 0;\n\tlet   _body = null;\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\t(function(global) {\n\n\t\tif (typeof global.document !== 'undefined') {\n\n\t\t\tif (typeof global.document.body !== 'undefined') {\n\t\t\t\t_body = global.document.body;\n\t\t\t}\n\n\t\t}\n\n\t})(global);\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _VENDORS = [ 'moz', 'ms', 'o', 'webkit' ];\n\tconst _fix_css = function() {\n\n\t\tlet found = null;\n\t\tlet style = this.__canvas.style;\n\n\t\tfor (let v = 0, vl = _VENDORS.length; v < vl; v++) {\n\n\t\t\tlet vendor = _VENDORS[v];\n\t\t\tif (vendor + 'UserSelect' in style) {\n\t\t\t\tfound = vendor;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tif (found !== null) {\n\t\t\tstyle[found + 'UserSelect'] = 'none';\n\t\t} else {\n\t\t\tstyle['userSelect'] = 'none';\n\t\t}\n\n\t\tstyle['display'] = 'block';\n\n\n\t\tif (_body !== null) {\n\t\t\t_body.style['margin']   = '0px';\n\t\t\t_body.style['padding']  = '0px';\n\t\t\t_body.style['overflow'] = 'hidden';\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * STRUCTS\n\t */\n\n\tconst _Buffer = function(width, height) {\n\n\t\tthis.width  = typeof width === 'number'  ? width  : 1;\n\t\tthis.height = typeof height === 'number' ? height : 1;\n\n\t\tthis.__buffer = global.document.createElement('canvas');\n\t\tthis.__ctx    = this.__buffer.getContext('2d');\n\n\n\t\tthis.resize(this.width, this.height);\n\n\t};\n\n\t_Buffer.prototype = {\n\n\t\tclear: function() {\n\n\t\t\tthis.__ctx.clearRect(0, 0, this.width, this.height);\n\n\t\t},\n\n\t\tresize: function(width, height) {\n\n\t\t\tthis.width  = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.__buffer.width  = this.width;\n\t\t\tthis.__buffer.height = this.height;\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.alpha      = 1.0;\n\t\tthis.background = '#000000';\n\t\tthis.id         = 'lychee-Renderer-' + _id++;\n\t\tthis.width      = null;\n\t\tthis.height     = null;\n\t\tthis.offset     = { x: 0, y: 0 };\n\n\t\tthis.__canvas           = global.document.createElement('canvas');\n\t\tthis.__canvas.className = 'lychee-Renderer';\n\t\tthis.__ctx              = this.__canvas.getContext('2d');\n\n\n\t\tif (_body !== null) {\n\t\t\t_body.appendChild(this.__canvas);\n\t\t}\n\n\t\t_fix_css.call(this);\n\n\n\t\tthis.setAlpha(states.alpha);\n\t\tthis.setBackground(states.background);\n\t\tthis.setId(states.id);\n\t\tthis.setWidth(states.width);\n\t\tthis.setHeight(states.height);\n\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\tdestroy: function() {\n\n\t\t\tlet canvas = this.__canvas;\n\t\t\tif (canvas.parentNode !== null) {\n\t\t\t\tcanvas.parentNode.removeChild(canvas);\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {};\n\n\n\t\t\tif (this.alpha !== 1.0)                               states.alpha      = this.alpha;\n\t\t\tif (this.background !== '#000000')                    states.background = this.background;\n\t\t\tif (this.id.startsWith('lychee-Renderer-') === false) states.id         = this.id;\n\t\t\tif (this.width !== null)                              states.width      = this.width;\n\t\t\tif (this.height !== null)                             states.height     = this.height;\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.Renderer',\n\t\t\t\t'arguments':   [ states ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * SETTERS AND GETTERS\n\t\t */\n\n\t\tsetAlpha: function(alpha) {\n\n\t\t\talpha = typeof alpha === 'number' ? alpha : null;\n\n\n\t\t\tif (alpha !== null) {\n\n\t\t\t\tif (alpha >= 0 && alpha <= 1) {\n\n\t\t\t\t\tthis.alpha = alpha;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetBackground: function(color) {\n\n\t\t\tcolor = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : null;\n\n\n\t\t\tif (color !== null) {\n\n\t\t\t\tthis.background = color;\n\t\t\t\tthis.__canvas.style.backgroundColor = color;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetId: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tthis.id = id;\n\t\t\t\tthis.__canvas.id = id;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetWidth: function(width) {\n\n\t\t\twidth = typeof width === 'number' ? width : null;\n\n\n\t\t\tif (width !== null) {\n\t\t\t\tthis.width = width | 0;\n\t\t\t} else {\n\t\t\t\tthis.width = global.innerWidth | 0;\n\t\t\t}\n\n\n\t\t\tthis.__canvas.width       = this.width;\n\t\t\tthis.__canvas.style.width = this.width + 'px';\n\t\t\tthis.offset.x             = this.__canvas.getBoundingClientRect().left;\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetHeight: function(height) {\n\n\t\t\theight = typeof height === 'number' ? height : null;\n\n\n\t\t\tif (height !== null) {\n\t\t\t\tthis.height = height | 0;\n\t\t\t} else {\n\t\t\t\tthis.height = global.innerHeight | 0;\n\t\t\t}\n\n\n\t\t\tthis.__canvas.height       = this.height;\n\t\t\tthis.__canvas.style.height = this.height + 'px';\n\t\t\tthis.offset.y              = this.__canvas.getBoundingClientRect().top;\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * BUFFER INTEGRATION\n\t\t */\n\n\t\tclear: function(buffer) {\n\n\t\t\tbuffer = buffer instanceof _Buffer ? buffer : null;\n\n\n\t\t\tif (buffer !== null) {\n\n\t\t\t\tbuffer.clear();\n\n\t\t\t} else {\n\n\t\t\t\tlet ctx = this.__ctx;\n\n\t\t\t\tctx.fillStyle = this.background;\n\t\t\t\tctx.fillRect(0, 0, this.width, this.height);\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tflush: function() {\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tcreateBuffer: function(width, height) {\n\n\t\t\twidth  = typeof width === 'number'  ? width  : 1;\n\t\t\theight = typeof height === 'number' ? height : 1;\n\n\n\t\t\treturn new _Buffer(width, height);\n\n\t\t},\n\n\t\tsetBuffer: function(buffer) {\n\n\t\t\tbuffer = buffer instanceof _Buffer ? buffer : null;\n\n\n\t\t\tif (buffer !== null) {\n\t\t\t\tthis.__ctx = buffer.__ctx;\n\t\t\t} else {\n\t\t\t\tthis.__ctx = this.__canvas.getContext('2d');\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * DRAWING API\n\t\t */\n\n\t\tdrawArc: function(x, y, start, end, radius, color, background, lineWidth) {\n\n\t\t\tx          = x | 0;\n\t\t\ty          = y | 0;\n\t\t\tradius     = radius | 0;\n\t\t\tstart      = typeof start === 'number'              ? start     : 0;\n\t\t\tend        = typeof end === 'number'                ? end       : 2;\n\t\t\tcolor      = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color     : '#000000';\n\t\t\tbackground = background === true;\n\t\t\tlineWidth  = typeof lineWidth === 'number'          ? lineWidth : 1;\n\n\n\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\tctx.globalAlpha = this.alpha;\n\t\t\tctx.beginPath();\n\n\t\t\tctx.arc(\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t\tradius,\n\t\t\t\tstart * _PI2,\n\t\t\t\tend   * _PI2\n\t\t\t);\n\n\t\t\tif (background === false) {\n\t\t\t\tctx.lineWidth   = lineWidth;\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.stroke();\n\t\t\t} else {\n\t\t\t\tctx.fillStyle   = color;\n\t\t\t\tctx.fill();\n\t\t\t}\n\n\t\t\tctx.closePath();\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tdrawBox: function(x1, y1, x2, y2, color, background, lineWidth) {\n\n\t\t\tx1         = x1 | 0;\n\t\t\ty1         = y1 | 0;\n\t\t\tx2         = x2 | 0;\n\t\t\ty2         = y2 | 0;\n\t\t\tcolor      = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\tbackground = background === true;\n\t\t\tlineWidth  = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\tctx.globalAlpha = this.alpha;\n\n\t\t\tif (background === false) {\n\t\t\t\tctx.lineWidth   = lineWidth;\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.strokeRect(x1, y1, x2 - x1, y2 - y1);\n\t\t\t} else {\n\t\t\t\tctx.fillStyle   = color;\n\t\t\t\tctx.fillRect(x1, y1, x2 - x1, y2 - y1);\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tdrawBuffer: function(x1, y1, buffer, map) {\n\n\t\t\tx1     = x1 | 0;\n\t\t\ty1     = y1 | 0;\n\t\t\tbuffer = buffer instanceof _Buffer ? buffer : null;\n\t\t\tmap    = map instanceof Object     ? map    : null;\n\n\n\t\t\tif (buffer !== null) {\n\n\t\t\t\tlet ctx    = this.__ctx;\n\t\t\t\tlet width  = 0;\n\t\t\t\tlet height = 0;\n\t\t\t\tlet x      = 0;\n\t\t\t\tlet y      = 0;\n\t\t\t\tlet r      = 0;\n\n\n\t\t\t\tctx.globalAlpha = this.alpha;\n\n\t\t\t\tif (map === null) {\n\n\t\t\t\t\twidth  = buffer.width;\n\t\t\t\t\theight = buffer.height;\n\n\t\t\t\t\tif (width > 0 && height > 0) {\n\n\t\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\t\tbuffer.__buffer,\n\t\t\t\t\t\t\tx,\n\t\t\t\t\t\t\ty,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\tx1,\n\t\t\t\t\t\t\ty1,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\twidth  = map.w;\n\t\t\t\t\theight = map.h;\n\t\t\t\t\tx      = map.x;\n\t\t\t\t\ty      = map.y;\n\t\t\t\t\tr      = map.r || 0;\n\n\t\t\t\t\tif (r === 0) {\n\n\t\t\t\t\t\tif (width > 0 && height > 0) {\n\n\t\t\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\t\t\tbuffer.__buffer,\n\t\t\t\t\t\t\t\tx,\n\t\t\t\t\t\t\t\ty,\n\t\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\t\tx1,\n\t\t\t\t\t\t\t\ty1,\n\t\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\t\theight\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tlet cos = Math.cos(r * Math.PI / 180);\n\t\t\t\t\t\tlet sin = Math.sin(r * Math.PI / 180);\n\n\t\t\t\t\t\tctx.setTransform(\n\t\t\t\t\t\t\tcos,\n\t\t\t\t\t\t\tsin,\n\t\t\t\t\t\t\t-sin,\n\t\t\t\t\t\t\tcos,\n\t\t\t\t\t\t\tx1,\n\t\t\t\t\t\t\ty1\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\t\tbuffer.__buffer,\n\t\t\t\t\t\t\tx,\n\t\t\t\t\t\t\ty,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\t-1 / 2 * width,\n\t\t\t\t\t\t\t-1 / 2 * height,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tctx.setTransform(\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tdrawCircle: function(x, y, radius, color, background, lineWidth) {\n\n\t\t\tx          = x | 0;\n\t\t\ty          = y | 0;\n\t\t\tradius     = radius | 0;\n\t\t\tcolor      = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\tbackground = background === true;\n\t\t\tlineWidth  = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\tctx.globalAlpha = this.alpha;\n\t\t\tctx.beginPath();\n\n\t\t\tctx.arc(\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t\tradius,\n\t\t\t\t0,\n\t\t\t\t_PI2\n\t\t\t);\n\n\n\t\t\tif (background === false) {\n\t\t\t\tctx.lineWidth   = lineWidth;\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.stroke();\n\t\t\t} else {\n\t\t\t\tctx.fillStyle   = color;\n\t\t\t\tctx.fill();\n\t\t\t}\n\n\t\t\tctx.closePath();\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tdrawLine: function(x1, y1, x2, y2, color, lineWidth) {\n\n\t\t\tx1        = x1 | 0;\n\t\t\ty1        = y1 | 0;\n\t\t\tx2        = x2 | 0;\n\t\t\ty2        = y2 | 0;\n\t\t\tcolor     = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\tlineWidth = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\tctx.globalAlpha = this.alpha;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x1, y1);\n\t\t\tctx.lineTo(x2, y2);\n\n\t\t\tctx.lineWidth   = lineWidth;\n\t\t\tctx.strokeStyle = color;\n\t\t\tctx.stroke();\n\n\t\t\tctx.closePath();\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tdrawTriangle: function(x1, y1, x2, y2, x3, y3, color, background, lineWidth) {\n\n\t\t\tx1         = x1 | 0;\n\t\t\ty1         = y1 | 0;\n\t\t\tx2         = x2 | 0;\n\t\t\ty2         = y2 | 0;\n\t\t\tx3         = x3 | 0;\n\t\t\ty3         = y3 | 0;\n\t\t\tcolor      = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\tbackground = background === true;\n\t\t\tlineWidth  = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\tctx.globalAlpha = this.alpha;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x1, y1);\n\t\t\tctx.lineTo(x2, y2);\n\t\t\tctx.lineTo(x3, y3);\n\t\t\tctx.lineTo(x1, y1);\n\n\t\t\tif (background === false) {\n\t\t\t\tctx.lineWidth   = lineWidth;\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.stroke();\n\t\t\t} else {\n\t\t\t\tctx.fillStyle   = color;\n\t\t\t\tctx.fill();\n\t\t\t}\n\n\t\t\tctx.closePath();\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\t// points, x1, y1, [ ... x(a), y(a) ... ], [ color, background, lineWidth ]\n\t\tdrawPolygon: function(points, x1, y1) {\n\n\t\t\tpoints = typeof points === 'number' ? points : 0;\n\t\t\tx1     = x1 | 0;\n\t\t\ty1     = y1 | 0;\n\n\n\t\t\tlet l = arguments.length;\n\n\t\t\tif (points > 3) {\n\n\t\t\t\tlet optargs = l - (points * 2) - 1;\n\t\t\t\tlet color, background, lineWidth;\n\n\t\t\t\tif (optargs === 3) {\n\n\t\t\t\t\tcolor      = arguments[l - 3];\n\t\t\t\t\tbackground = arguments[l - 2];\n\t\t\t\t\tlineWidth  = arguments[l - 1];\n\n\t\t\t\t} else if (optargs === 2) {\n\n\t\t\t\t\tcolor      = arguments[l - 2];\n\t\t\t\t\tbackground = arguments[l - 1];\n\n\t\t\t\t} else if (optargs === 1) {\n\n\t\t\t\t\tcolor      = arguments[l - 1];\n\n\t\t\t\t}\n\n\n\t\t\t\tcolor      = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\t\tbackground = background === true;\n\t\t\t\tlineWidth  = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\t\tctx.globalAlpha = this.alpha;\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(x1, y1);\n\n\t\t\t\tfor (let p = 1; p < points; p++) {\n\n\t\t\t\t\tctx.lineTo(\n\t\t\t\t\t\targuments[1 + p * 2]     | 0,\n\t\t\t\t\t\targuments[1 + p * 2 + 1] | 0\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t\tctx.lineTo(x1, y1);\n\n\t\t\t\tif (background === false) {\n\t\t\t\t\tctx.lineWidth   = lineWidth;\n\t\t\t\t\tctx.strokeStyle = color;\n\t\t\t\t\tctx.stroke();\n\t\t\t\t} else {\n\t\t\t\t\tctx.fillStyle   = color;\n\t\t\t\t\tctx.fill();\n\t\t\t\t}\n\n\t\t\t\tctx.closePath();\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tdrawSprite: function(x1, y1, texture, map) {\n\n\t\t\tx1      = x1 | 0;\n\t\t\ty1      = y1 | 0;\n\t\t\ttexture = texture instanceof Texture ? texture : null;\n\t\t\tmap     = map instanceof Object      ? map     : null;\n\n\n\t\t\tif (texture !== null && texture.buffer !== null) {\n\n\t\t\t\tlet ctx    = this.__ctx;\n\t\t\t\tlet width  = 0;\n\t\t\t\tlet height = 0;\n\t\t\t\tlet x      = 0;\n\t\t\t\tlet y      = 0;\n\t\t\t\tlet r      = 0;\n\n\n\t\t\t\tctx.globalAlpha = this.alpha;\n\n\t\t\t\tif (map === null) {\n\n\t\t\t\t\twidth  = texture.width;\n\t\t\t\t\theight = texture.height;\n\n\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\ttexture.buffer,\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\theight,\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\theight\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\twidth  = map.w;\n\t\t\t\t\theight = map.h;\n\t\t\t\t\tx      = map.x;\n\t\t\t\t\ty      = map.y;\n\t\t\t\t\tr      = map.r || 0;\n\n\t\t\t\t\tif (r === 0) {\n\n\t\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\t\ttexture.buffer,\n\t\t\t\t\t\t\tx,\n\t\t\t\t\t\t\ty,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\tx1,\n\t\t\t\t\t\t\ty1,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight\n\t\t\t\t\t\t);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tlet cos = Math.cos(r * Math.PI / 180);\n\t\t\t\t\t\tlet sin = Math.sin(r * Math.PI / 180);\n\n\t\t\t\t\t\tctx.setTransform(\n\t\t\t\t\t\t\tcos,\n\t\t\t\t\t\t\tsin,\n\t\t\t\t\t\t\t-sin,\n\t\t\t\t\t\t\tcos,\n\t\t\t\t\t\t\tx1,\n\t\t\t\t\t\t\ty1\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\t\ttexture.buffer,\n\t\t\t\t\t\t\tx,\n\t\t\t\t\t\t\ty,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\t-1 / 2 * width,\n\t\t\t\t\t\t\t-1 / 2 * height,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tctx.setTransform(\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tdrawText: function(x1, y1, text, font, center) {\n\n\t\t\tx1     = x1 | 0;\n\t\t\ty1     = y1 | 0;\n\t\t\ttext   = typeof text === 'string' ? text : null;\n\t\t\tfont   = font instanceof Font     ? font : null;\n\t\t\tcenter = center === true;\n\n\n\t\t\tif (text !== null && font !== null) {\n\n\t\t\t\tif (center === true) {\n\n\t\t\t\t\tlet dim = font.measure(text);\n\n\t\t\t\t\tx1 = (x1 - dim.realwidth / 2) | 0;\n\t\t\t\t\ty1 = (y1 - (dim.realheight - font.baseline) / 2) | 0;\n\n\t\t\t\t}\n\n\n\t\t\t\ty1 = (y1 - font.baseline / 2) | 0;\n\n\n\t\t\t\tlet margin  = 0;\n\t\t\t\tlet texture = font.texture;\n\t\t\t\tif (texture !== null && texture.buffer !== null) {\n\n\t\t\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\t\t\tctx.globalAlpha = this.alpha;\n\n\t\t\t\t\tfor (let t = 0, l = text.length; t < l; t++) {\n\n\t\t\t\t\t\tlet chr = font.measure(text[t]);\n\n\t\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\t\ttexture.buffer,\n\t\t\t\t\t\t\tchr.x,\n\t\t\t\t\t\t\tchr.y,\n\t\t\t\t\t\t\tchr.width,\n\t\t\t\t\t\t\tchr.height,\n\t\t\t\t\t\t\tx1 + margin - font.spacing,\n\t\t\t\t\t\t\ty1,\n\t\t\t\t\t\t\tchr.width,\n\t\t\t\t\t\t\tchr.height\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tmargin = margin + chr.realwidth + font.kerning;\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.Stash":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.Stash","url":"/libraries/lychee/source/platform/html/Stash.js"}],"blob":{"attaches":{},"tags":{"platform":"html"},"includes":["lychee.event.Emitter"],"supports":"function(lychee, global) {\n\n\tif (\n\t\ttypeof global.Storage !== 'undefined'\n\t\t&& typeof global.localStorage === 'object'\n\t) {\n\t\treturn true;\n\t}\n\n\n\treturn true;\n\n}","exports":"function(lychee, global, attachments) {\n\n\tlet   _id         = 0;\n\tconst _Emitter    = lychee.import('lychee.event.Emitter');\n\tconst _JSON       = {\n\t\tencode: JSON.stringify,\n\t\tdecode: JSON.parse\n\t};\n\tconst _PERSISTENT = {\n\t\tdata: {},\n\t\tread: function() {\n\t\t\treturn null;\n\t\t},\n\t\twrite: function(id, asset) {\n\t\t\treturn false;\n\t\t}\n\t};\n\tconst _TEMPORARY  = {\n\t\tdata: {},\n\t\tread: function() {\n\n\t\t\tif (Object.keys(this.data).length > 0) {\n\t\t\t\treturn this.data;\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\t\twrite: function(id, asset) {\n\n\t\t\tif (asset !== null) {\n\t\t\t\tthis.data[id] = asset;\n\t\t\t} else {\n\t\t\t\tdelete this.data[id];\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\t};\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\t(function() {\n\n\t\tlet local   = false;\n\t\tlet session = true;\n\n\n\t\ttry {\n\n\t\t\tlocal = 'localStorage' in global;\n\n\t\t\t// XXX: Security Error\n\t\t\tglobal.localStorage.getItem('lychee-Stash-PERSISTENT');\n\n\t\t} catch (err) {\n\t\t\tlocal = false;\n\t\t}\n\n\n\t\tif (local === true) {\n\n\t\t\t_PERSISTENT.read = function() {\n\n\t\t\t\tthis.data = _JSON.decode(global.localStorage.getItem('lychee-Stash-PERSISTENT'));\n\n\n\t\t\t\tlet blob = {};\n\n\t\t\t\tfor (let id in this.data) {\n\t\t\t\t\tblob[id] = lychee.deserialize(this.data[id]);\n\t\t\t\t}\n\n\t\t\t\treturn Object.keys(blob).length > 0 ? blob : null;\n\n\t\t\t};\n\n\t\t\t_PERSISTENT.write = function(id, asset) {\n\n\t\t\t\tlet path = lychee.environment.resolve(id);\n\t\t\t\tif (path.startsWith(lychee.ROOT.project)) {\n\n\t\t\t\t\tif (asset !== null) {\n\n\t\t\t\t\t\tlet data = lychee.serialize(asset);\n\n\t\t\t\t\t\tif (data !== null && data.blob instanceof Object) {\n\n\t\t\t\t\t\t\tlet buffer = data.blob.buffer || null;\n\t\t\t\t\t\t\tif (buffer instanceof Object) {\n\n\t\t\t\t\t\t\t\tlet valid = true;\n\n\t\t\t\t\t\t\t\tfor (let sub in buffer) {\n\n\t\t\t\t\t\t\t\t\tif (typeof buffer[sub] === 'string') {\n\n\t\t\t\t\t\t\t\t\t\tlet index = buffer[sub].indexOf('base64,') + 7;\n\t\t\t\t\t\t\t\t\t\tif (index <= 7) {\n\t\t\t\t\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (valid === true) {\n\t\t\t\t\t\t\t\t\tthis.data[id] = data;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else if (typeof buffer === 'string') {\n\n\t\t\t\t\t\t\t\tlet index = buffer.indexOf('base64,') + 7;\n\t\t\t\t\t\t\t\tif (index > 7) {\n\t\t\t\t\t\t\t\t\tthis.data[id] = data;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.data[id] = null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tglobal.localStorage.setItem('lychee-Stash-PERSISTENT', _JSON.encode(this.data));\n\n\n\t\t\t\treturn true;\n\n\t\t\t};\n\n\n\t\t\t(function() {\n\n\t\t\t\tlet data = _JSON.decode(global.localStorage.getItem('lychee-Stash-PERSISTENT'));\n\t\t\t\tif (data !== null) {\n\n\t\t\t\t\tfor (let id in data) {\n\t\t\t\t\t\t_PERSISTENT.data[id] = data[id];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t})();\n\n\t\t}\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tlet methods = [];\n\n\t\t\tif (local)   methods.push('Persistent');\n\t\t\tif (session) methods.push('Temporary');\n\n\n\t\t\tif (methods.length === 0) {\n\t\t\t\tconsole.error('lychee.Stash: Supported methods are NONE');\n\t\t\t} else {\n\t\t\t\tconsole.info('lychee.Stash: Supported methods are ' + methods.join(', '));\n\t\t\t}\n\n\t\t}\n\n\t})();\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_asset = function(asset) {\n\n\t\tif (asset instanceof Object && typeof asset.serialize === 'function') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n\tconst _on_batch_remove = function(stash, others) {\n\n\t\tlet keys = Object.keys(others);\n\n\t\tfor (let k = 0, kl = keys.length; k < kl; k++) {\n\n\t\t\tlet key   = keys[k];\n\t\t\tlet index = this.load.indexOf(key);\n\t\t\tif (index !== -1) {\n\n\t\t\t\tif (this.ready.indexOf(key) === -1) {\n\t\t\t\t\tthis.ready.push(null);\n\t\t\t\t\tthis.load.splice(index, 1);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (this.load.length === 0) {\n\t\t\tstash.trigger('batch', [ 'remove', this.ready ]);\n\t\t\tstash.unbind('sync', _on_batch_remove);\n\t\t}\n\n\t};\n\n\tconst _on_batch_write = function(stash, others) {\n\n\t\tlet keys = Object.keys(others);\n\n\t\tfor (let k = 0, kl = keys.length; k < kl; k++) {\n\n\t\t\tlet key   = keys[k];\n\t\t\tlet index = this.load.indexOf(key);\n\t\t\tif (index !== -1) {\n\n\t\t\t\tif (this.ready.indexOf(key) === -1) {\n\t\t\t\t\tthis.ready.push(others[key]);\n\t\t\t\t\tthis.load.splice(index, 1);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (this.load.length === 0) {\n\t\t\tstash.trigger('batch', [ 'write', this.ready ]);\n\t\t\tstash.unbind('sync', _on_batch_write);\n\t\t}\n\n\t};\n\n\tconst _read_stash = function(silent) {\n\n\t\tsilent = silent === true;\n\n\n\t\tlet blob = null;\n\n\n\t\tlet type = this.type;\n\t\tif (type === Composite.TYPE.persistent) {\n\n\t\t\tblob = _PERSISTENT.read();\n\n\t\t} else if (type === Composite.TYPE.temporary) {\n\n\t\t\tblob = _TEMPORARY.read();\n\n\t\t}\n\n\n\t\tif (blob !== null) {\n\n\t\t\tif (Object.keys(this.__assets).length !== Object.keys(blob).length) {\n\n\t\t\t\tthis.__assets = {};\n\n\t\t\t\tfor (let id in blob) {\n\t\t\t\t\tthis.__assets[id] = blob[id];\n\t\t\t\t}\n\n\n\t\t\t\tthis.trigger('sync', [ this.__assets ]);\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _write_stash = function(silent) {\n\n\t\tsilent = silent === true;\n\n\n\t\tlet operations = this.__operations;\n\t\tlet filtered   = {};\n\n\t\tif (operations.length !== 0) {\n\n\t\t\twhile (operations.length > 0) {\n\n\t\t\t\tlet operation = operations.shift();\n\t\t\t\tif (operation.type === 'update') {\n\n\t\t\t\t\tfiltered[operation.id] = operation.asset;\n\n\t\t\t\t\tif (this.__assets[operation.id] !== operation.asset) {\n\t\t\t\t\t\tthis.__assets[operation.id] = operation.asset;\n\t\t\t\t\t}\n\n\t\t\t\t} else if (operation.type === 'remove') {\n\n\t\t\t\t\tfiltered[operation.id] = null;\n\n\t\t\t\t\tif (this.__assets[operation.id] !== null) {\n\t\t\t\t\t\tthis.__assets[operation.id] = null;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tlet type = this.type;\n\t\t\tif (type === Composite.TYPE.persistent) {\n\n\t\t\t\tfor (let id in filtered) {\n\t\t\t\t\t_PERSISTENT.write(id, filtered[id]);\n\t\t\t\t}\n\n\t\t\t} else if (type === Composite.TYPE.temporary) {\n\n\t\t\t\tfor (let id in filtered) {\n\t\t\t\t\t_PERSISTENT.write(id, filtered[id]);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (silent === false) {\n\t\t\t\tthis.trigger('sync', [ this.__assets ]);\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.id   = 'lychee-Stash-' + _id++;\n\t\tthis.type = Composite.TYPE.persistent;\n\n\n\t\tthis.__assets     = {};\n\t\tthis.__operations = [];\n\n\n\t\tthis.setId(states.id);\n\t\tthis.setType(states.type);\n\n\n\t\t_Emitter.call(this);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\t_read_stash.call(this);\n\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\tpersistent: 0,\n\t\ttemporary:  1\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tsync: function(silent) {\n\n\t\t\tsilent = silent === true;\n\n\n\t\t\tlet result = false;\n\n\n\t\t\tif (Object.keys(this.__assets).length > 0) {\n\n\t\t\t\tthis.__operations.push({\n\t\t\t\t\ttype: 'sync'\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t\tif (this.__operations.length > 0) {\n\t\t\t\tresult = _write_stash.call(this, silent);\n\t\t\t} else {\n\t\t\t\tresult = _read_stash.call(this, silent);\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.assets instanceof Object) {\n\n\t\t\t\tthis.__assets = {};\n\n\t\t\t\tfor (let id in blob.assets) {\n\t\t\t\t\tthis.__assets[id] = lychee.deserialize(blob.assets[id]);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.Stash';\n\n\t\t\tlet states = {};\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.id.startsWith('lychee-Stash-') === false) states.id   = this.id;\n\t\t\tif (this.type !== Composite.TYPE.persistent)       states.type = this.type;\n\n\n\t\t\tif (Object.keys(this.__assets).length > 0) {\n\n\t\t\t\tblob.assets = {};\n\n\t\t\t\tfor (let id in this.__assets) {\n\t\t\t\t\tblob.assets[id] = lychee.serialize(this.__assets[id]);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = states;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tbatch: function(action, ids, assets) {\n\n\t\t\taction = typeof action === 'string' ? action : null;\n\t\t\tids    = ids instanceof Array       ? ids    : null;\n\t\t\tassets = assets instanceof Array    ? assets : null;\n\n\n\t\t\tif (action !== null) {\n\n\t\t\t\tlet cache  = {\n\t\t\t\t\tload:  Array.from(ids),\n\t\t\t\t\tready: []\n\t\t\t\t};\n\n\n\t\t\t\tlet result = true;\n\t\t\t\tlet that   = this;\n\n\t\t\t\tif (action === 'read') {\n\n\t\t\t\t\tfor (let i = 0, il = ids.length; i < il; i++) {\n\n\t\t\t\t\t\tlet asset = this.read(ids[i]);\n\t\t\t\t\t\tif (asset !== null) {\n\n\t\t\t\t\t\t\tasset.onload = function(result) {\n\n\t\t\t\t\t\t\t\tlet index = cache.load.indexOf(this.url);\n\t\t\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\t\t\tcache.ready.push(this);\n\t\t\t\t\t\t\t\t\tcache.load.splice(index, 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (cache.load.length === 0) {\n\t\t\t\t\t\t\t\t\tthat.trigger('batch', [ 'read', cache.ready ]);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tasset.load();\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresult = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn result;\n\n\t\t\t\t} else if (action === 'remove') {\n\n\t\t\t\t\tthis.bind('#sync', _on_batch_remove, cache);\n\n\t\t\t\t\tfor (let i = 0, il = ids.length; i < il; i++) {\n\n\t\t\t\t\t\tif (this.remove(ids[i]) === false) {\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tthis.unbind('sync', _on_batch_remove);\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn result;\n\n\t\t\t\t} else if (action === 'write' && ids.length === assets.length) {\n\n\t\t\t\t\tthis.bind('#sync', _on_batch_write, cache);\n\n\t\t\t\t\tfor (let i = 0, il = ids.length; i < il; i++) {\n\n\t\t\t\t\t\tif (this.write(ids[i], assets[i]) === false) {\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tthis.unbind('sync', _on_batch_write);\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn result;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tread: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet asset = new lychee.Asset(id, null, true);\n\t\t\t\tif (asset !== null) {\n\n\t\t\t\t\tthis.__assets[id] = asset;\n\n\t\t\t\t\treturn asset;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tremove: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tthis.__operations.push({\n\t\t\t\t\ttype: 'remove',\n\t\t\t\t\tid:   id\n\t\t\t\t});\n\n\n\t\t\t\t_write_stash.call(this);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\twrite: function(id, asset) {\n\n\t\t\tid    = typeof id === 'string'          ? id    : null;\n\t\t\tasset = _validate_asset(asset) === true ? asset : null;\n\n\n\t\t\tif (id !== null && asset !== null) {\n\n\t\t\t\tthis.__operations.push({\n\t\t\t\t\ttype:  'update',\n\t\t\t\t\tid:    id,\n\t\t\t\t\tasset: asset\n\t\t\t\t});\n\n\n\t\t\t\t_write_stash.call(this);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetId: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tthis.id = id;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetType: function(type) {\n\n\t\t\ttype = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\n\t\t\tif (type !== null) {\n\n\t\t\t\tthis.type = type;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.Viewport":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.Viewport","url":"/libraries/lychee/source/platform/html/Viewport.js"}],"blob":{"attaches":{},"tags":{"platform":"html"},"includes":["lychee.event.Emitter"],"supports":"function(lychee, global) {\n\n\tif (\n\t\ttypeof global.addEventListener === 'function'\n\t\t&& typeof global.innerWidth === 'number'\n\t\t&& typeof global.innerHeight === 'number'\n\t\t&& typeof global.document !== 'undefined'\n\t\t&& typeof global.document.querySelectorAll === 'function'\n\t) {\n\n\t\treturn true;\n\n\t}\n\n\n\treturn false;\n\n}","exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter   = lychee.import('lychee.event.Emitter');\n\tconst _CLOCK     = {\n\t\torientationchange: null,\n\t\tresize:            0\n\t};\n\tconst _INSTANCES = [];\n\n\n\n\t/*\n\t * EVENTS\n\t */\n\n\tlet _focusactive   = true;\n\tlet _reshapeactive = false;\n\tlet _reshapewidth  = global.innerWidth  | 0;\n\tlet _reshapeheight = global.innerHeight | 0;\n\n\tconst _reshape_viewport = function() {\n\n\t\tif (_reshapeactive === true || (_reshapewidth === global.innerWidth && _reshapeheight === global.innerHeight)) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\t_reshapeactive = true;\n\n\n\n\t\t/*\n\t\t * ISSUE in Mobile WebKit:\n\t\t *\n\t\t * An issue occurs if width of viewport is higher than\n\t\t * the width of the viewport of future rotation state.\n\t\t *\n\t\t * This bugfix prevents the viewport to scale higher\n\t\t * than 1.0, even if the meta tag is correctly setup.\n\t\t */\n\n\t\tlet elements = global.document.querySelectorAll('.lychee-Renderer');\n\t\tfor (let e = 0, el = elements.length; e < el; e++) {\n\n\t\t\tlet element = elements[e];\n\n\t\t\telement.style.width  = '1px';\n\t\t\telement.style.height = '1px';\n\n\t\t}\n\n\n\n\t\t/*\n\t\t * ISSUE in Mobile Firefox and Mobile WebKit\n\t\t *\n\t\t * The reflow is too slow for an update, so we have\n\t\t * to lock the heuristic to only be executed once,\n\t\t * waiting for 500ms to let the reflow finish.\n\t\t */\n\n\t\tsetTimeout(function() {\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t_process_reshape.call(_INSTANCES[i], global.innerWidth, global.innerHeight);\n\t\t\t}\n\n\t\t\t_reshapewidth  = global.innerWidth  | 0;\n\t\t\t_reshapeheight = global.innerHeight | 0;\n\t\t\t_reshapeactive = false;\n\n\t\t}, 500);\n\n\t};\n\n\tconst _listeners = {\n\n\t\torientationchange: function() {\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t_process_orientation.call(_INSTANCES[i], global.orientation);\n\t\t\t}\n\n\t\t\t_CLOCK.orientationchange = Date.now();\n\t\t\t_reshape_viewport();\n\n\t\t},\n\n\t\tresize: function() {\n\n\t\t\tif (_CLOCK.orientationchange === null || (_CLOCK.orientationchange !== null && _CLOCK.orientationchange > _CLOCK.resize)) {\n\n\t\t\t\t_CLOCK.resize = Date.now();\n\t\t\t\t_reshape_viewport();\n\n\t\t\t}\n\n\t\t},\n\n\t\tfocus: function() {\n\n\t\t\tif (_focusactive === false) {\n\n\t\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t\t_process_show.call(_INSTANCES[i]);\n\t\t\t\t}\n\n\t\t\t\t_focusactive = true;\n\n\t\t\t}\n\n\t\t},\n\n\t\tblur: function() {\n\n\t\t\tif (_focusactive === true) {\n\n\t\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t\t_process_hide.call(_INSTANCES[i]);\n\t\t\t\t}\n\n\t\t\t\t_focusactive = false;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\tlet _enterFullscreen = null;\n\tlet _leaveFullscreen = null;\n\n\t(function() {\n\n\t\tlet resize      = 'onresize' in global;\n\t\tlet orientation = 'onorientationchange' in global;\n\t\tlet focus       = 'onfocus' in global;\n\t\tlet blur        = 'onblur' in global;\n\n\n\t\tif (typeof global.addEventListener === 'function') {\n\n\t\t\tif (resize)      global.addEventListener('resize',            _listeners.resize,            true);\n\t\t\tif (orientation) global.addEventListener('orientationchange', _listeners.orientationchange, true);\n\t\t\tif (focus)       global.addEventListener('focus',             _listeners.focus,             true);\n\t\t\tif (blur)        global.addEventListener('blur',              _listeners.blur,              true);\n\n\t\t}\n\n\n\t\tif (global.document && global.document.documentElement) {\n\n\t\t\tlet element = global.document.documentElement;\n\n\t\t\tif (typeof element.requestFullscreen === 'function' && typeof element.exitFullscreen === 'function') {\n\n\t\t\t\t_enterFullscreen = function() {\n\t\t\t\t\telement.requestFullscreen();\n\t\t\t\t};\n\n\t\t\t\t_leaveFullscreen = function() {\n\t\t\t\t\telement.exitFullscreen();\n\t\t\t\t};\n\n\t\t\t}\n\n\n\t\t\tif (_enterFullscreen === null || _leaveFullscreen === null) {\n\n\t\t\t\tlet prefixes = [ 'moz', 'ms', 'webkit' ];\n\t\t\t\tlet prefix   = null;\n\n\t\t\t\tfor (let p = 0, pl = prefixes.length; p < pl; p++) {\n\n\t\t\t\t\tif (typeof element[prefixes[p] + 'RequestFullScreen'] === 'function' && typeof document[prefixes[p] + 'CancelFullScreen'] === 'function') {\n\t\t\t\t\t\tprefix = prefixes[p];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (prefix !== null) {\n\n\t\t\t\t\t_enterFullscreen = function() {\n\t\t\t\t\t\telement[prefix + 'RequestFullScreen']();\n\t\t\t\t\t};\n\n\t\t\t\t\t_leaveFullscreen = function() {\n\t\t\t\t\t\tglobal.document[prefix + 'CancelFullScreen']();\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tlet methods = [];\n\n\t\t\tif (resize)      methods.push('Resize');\n\t\t\tif (orientation) methods.push('Orientation');\n\t\t\tif (focus)       methods.push('Focus');\n\t\t\tif (blur)        methods.push('Blur');\n\n\t\t\tif (_enterFullscreen !== null && _leaveFullscreen !== null) {\n\t\t\t\tmethods.push('Fullscreen');\n\t\t\t}\n\n\t\t\tif (methods.length === 0) {\n\t\t\t\tconsole.error('lychee.Viewport: Supported methods are NONE');\n\t\t\t} else {\n\t\t\t\tconsole.info('lychee.Viewport: Supported methods are ' + methods.join(', '));\n\t\t\t}\n\n\t\t}\n\n\t})();\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _process_show = function() {\n\n\t\treturn this.trigger('show');\n\n\t};\n\n\tconst _process_hide = function() {\n\n\t\treturn this.trigger('hide');\n\n\t};\n\n\tconst _process_orientation = function(orientation) {\n\n\t\torientation = typeof orientation === 'number' ? orientation : null;\n\n\t\tif (orientation !== null) {\n\t\t\tthis.__orientation = orientation;\n\t\t}\n\n\t};\n\n\tconst _process_reshape = function(width, height) {\n\n\t\tif (width === this.width && height === this.height) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tthis.width  = width;\n\t\tthis.height = height;\n\n\n\t\tlet orientation = null;\n\t\tlet rotation    = null;\n\n\n\n\t\t/*\n\t\t *    TOP\n\t\t *  _______\n\t\t * |       |\n\t\t * |       |\n\t\t * |       |\n\t\t * |       |\n\t\t * |       |\n\t\t * [X][X][X]\n\t\t *\n\t\t *  BOTTOM\n\t\t */\n\n\t\tif (this.__orientation === 0) {\n\n\t\t\tif (width > height) {\n\n\t\t\t\torientation = 'landscape';\n\t\t\t\trotation    = 'landscape';\n\n\t\t\t} else {\n\n\t\t\t\torientation = 'portrait';\n\t\t\t\trotation    = 'portrait';\n\n\t\t\t}\n\n\n\n\t\t/*\n\t\t *  BOTTOM\n\t\t *\n\t\t * [X][X][X]\n\t\t * |       |\n\t\t * |       |\n\t\t * |       |\n\t\t * |       |\n\t\t * |_______|\n\t\t *\n\t\t *    TOP\n\t\t */\n\n\t\t} else if (this.__orientation === 180) {\n\n\t\t\tif (width > height) {\n\n\t\t\t\torientation = 'landscape';\n\t\t\t\trotation    = 'landscape';\n\n\t\t\t} else {\n\n\t\t\t\torientation = 'portrait';\n\t\t\t\trotation    = 'portrait';\n\n\t\t\t}\n\n\n\n\t\t/*\n\t\t *    ____________    B\n\t\t * T |            [x] O\n\t\t * O |            [x] T\n\t\t * P |____________[x] T\n\t\t *                    O\n\t\t *                    M\n\t\t */\n\n\t\t} else if (this.__orientation === 90) {\n\n\t\t\tif (width > height) {\n\n\t\t\t\torientation = 'portrait';\n\t\t\t\trotation    = 'landscape';\n\n\t\t\t} else {\n\n\t\t\t\torientation = 'landscape';\n\t\t\t\trotation    = 'portrait';\n\n\t\t\t}\n\n\n\n\t\t/*\n\t\t * B    ____________\n\t\t * O [x]            | T\n\t\t * T [x]            | O\n\t\t * T [x]____________| P\n\t\t * O\n\t\t * M\n\t\t */\n\n\t\t} else if (this.__orientation === -90) {\n\n\t\t\tif (width > height) {\n\n\t\t\t\torientation = 'portrait';\n\t\t\t\trotation    = 'landscape';\n\n\t\t\t} else {\n\n\t\t\t\torientation = 'landscape';\n\t\t\t\trotation    = 'portrait';\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn this.trigger('reshape', [ orientation, rotation, width, height ]);\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.fullscreen = false;\n\t\tthis.width      = global.innerWidth  | 0;\n\t\tthis.height     = global.innerHeight | 0;\n\n\t\tthis.__orientation = typeof global.orientation === 'number' ? global.orientation : 0;\n\n\n\t\t_Emitter.call(this);\n\n\t\t_INSTANCES.push(this);\n\n\n\t\tthis.setFullscreen(states.fullscreen);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tsetTimeout(function() {\n\n\t\t\tthis.width  = 0;\n\t\t\tthis.height = 0;\n\n\t\t\t_process_reshape.call(this, global.innerWidth | 0, global.innerHeight | 0);\n\n\t\t}.bind(this), 100);\n\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\tdestroy: function() {\n\n\t\t\tlet found = false;\n\n\t\t\tfor (let i = 0, il = _INSTANCES.length; i < il; i++) {\n\n\t\t\t\tif (_INSTANCES[i] === this) {\n\t\t\t\t\t_INSTANCES.splice(i, 1);\n\t\t\t\t\tfound = true;\n\t\t\t\t\til--;\n\t\t\t\t\ti--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.unbind();\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.Viewport';\n\n\t\t\tlet states = {};\n\n\n\t\t\tif (this.fullscreen !== false) states.fullscreen = this.fullscreen;\n\n\n\t\t\tdata['arguments'][0] = states;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetFullscreen: function(fullscreen) {\n\n\t\t\tfullscreen = typeof fullscreen === 'boolean' ? fullscreen : null;\n\n\n\t\t\tif (fullscreen !== null) {\n\n\t\t\t\tif (fullscreen === true && this.fullscreen === false) {\n\n\t\t\t\t\tif (_enterFullscreen !== null) {\n\n\t\t\t\t\t\t_enterFullscreen();\n\t\t\t\t\t\tthis.fullscreen = true;\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if (fullscreen === false && this.fullscreen === true) {\n\n\t\t\t\t\tif (_leaveFullscreen !== null) {\n\n\t\t\t\t\t\t_leaveFullscreen();\n\t\t\t\t\t\tthis.fullscreen = false;\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Loop":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.app.Loop","url":"/libraries/lychee/source/app/Loop.js"}],"blob":{"attaches":{},"includes":["lychee.event.Emitter"],"supports":"function(lychee, global) {\n\n\tif (typeof global.setInterval === 'function') {\n\t\treturn true;\n\t}\n\n\treturn false;\n\n}","exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter   = lychee.import('lychee.event.Emitter');\n\tconst _INSTANCES = [];\n\tlet   _id        = 0;\n\n\n\n\t/*\n\t * EVENTS\n\t */\n\n\tconst _listeners = {\n\n\t\tinterval: function() {\n\n\t\t\tlet now = Date.now();\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tlet instance = _INSTANCES[i];\n\t\t\t\tlet clock    = now - instance.__start;\n\n\t\t\t\t_update_loop.call(instance, clock);\n\t\t\t\t_render_loop.call(instance, clock);\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function() {\n\n\t\t\tlet now = Date.now();\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tlet instance = _INSTANCES[i];\n\t\t\t\tlet clock    = now - instance.__start;\n\n\t\t\t\t_update_loop.call(instance, clock);\n\n\t\t\t}\n\n\t\t},\n\n\t\t// XXX: render loop is inlined for maximum performance\n\t\trender: function() {\n\n\t\t\tlet now = Date.now();\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tlet instance = _INSTANCES[i];\n\t\t\t\tif (instance.__state === 1) {\n\n\t\t\t\t\tlet clock = now   - instance.__start;\n\t\t\t\t\tlet delta = clock - instance.__renderclock;\n\t\t\t\t\tif (delta >= instance.__renderdelay) {\n\t\t\t\t\t\tinstance.trigger('render', [ clock, delta ]);\n\t\t\t\t\t\tinstance.__renderclock = clock;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tglobal.requestAnimationFrame(_listeners.render);\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\t(function(delta) {\n\n\t\tlet interval = typeof global.setInterval === 'function';\n\t\tlet raf      = typeof global.requestAnimationFrame === 'function';\n\n\t\tif (raf === true && interval === true) {\n\t\t\tglobal.setInterval(_listeners.update, delta);\n\t\t\tglobal.requestAnimationFrame(_listeners.render);\n\t\t} else if (interval === true) {\n\t\t\tglobal.setInterval(_listeners.interval, delta);\n\t\t}\n\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tlet methods = [];\n\n\t\t\tif (interval) methods.push('setInterval');\n\t\t\tif (raf)      methods.push('requestAnimationFrame');\n\n\t\t\tif (methods.length === 0) {\n\t\t\t\tconsole.error('lychee.app.Loop: Supported methods are NONE');\n\t\t\t} else {\n\t\t\t\tconsole.info('lychee.app.Loop: Supported methods are ' + methods.join(', '));\n\t\t\t}\n\n\t\t}\n\n\t})((1000 / 60) | 0);\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _update_loop = function(clock) {\n\n\t\tif (this.__state !== 1) return;\n\n\n\t\tlet delta = clock - this.__updateclock;\n\t\tif (delta >= this.__updatedelay) {\n\n\t\t\tthis.trigger('update', [ clock, delta ]);\n\n\n\t\t\tfor (let iid in this.__intervals) {\n\n\t\t\t\tlet interval = this.__intervals[iid];\n\n\t\t\t\tif (clock >= interval.clock) {\n\n\t\t\t\t\tinterval.callback.call(\n\t\t\t\t\t\tinterval.scope,\n\t\t\t\t\t\tclock,\n\t\t\t\t\t\tclock - interval.clock,\n\t\t\t\t\t\tinterval.step++\n\t\t\t\t\t);\n\n\t\t\t\t\tinterval.clock = clock + interval.delta;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tfor (let tid in this.__timeouts) {\n\n\t\t\t\tlet timeout = this.__timeouts[tid];\n\t\t\t\tif (clock >= timeout.clock) {\n\n\t\t\t\t\ttimeout.callback.call(\n\t\t\t\t\t\ttimeout.scope,\n\t\t\t\t\t\tclock,\n\t\t\t\t\t\tclock - timeout.clock\n\t\t\t\t\t);\n\n\t\t\t\t\tdelete this.__timeouts[tid];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis.__updateclock = clock;\n\n\t\t}\n\n\t};\n\n\tconst _render_loop = function(clock) {\n\n\t\tif (this.__state !== 1) return;\n\n\n\t\tlet delta = clock - this.__renderclock;\n\t\tif (delta >= this.__renderdelay) {\n\n\t\t\tthis.trigger('render', [ clock, delta ]);\n\n\n\t\t\tthis.__renderclock = clock;\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.update = 40;\n\t\tthis.render = 40;\n\n\t\tthis.__timeouts  = {};\n\t\tthis.__intervals = {};\n\n\t\tthis.__pause       = 0;\n\t\tthis.__start       = Date.now();\n\t\tthis.__state       = 1;\n\t\tthis.__renderclock = 0;\n\t\tthis.__renderdelay = 1000 / this.update;\n\t\tthis.__updateclock = 0;\n\t\tthis.__updatedelay = 1000 / this.render;\n\n\n\t\tthis.setUpdate(states.update);\n\t\tthis.setRender(states.render);\n\n\n\t\t_Emitter.call(this);\n\n\t\t_INSTANCES.push(this);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\tdestroy: function() {\n\n\t\t\tlet found = false;\n\n\t\t\tfor (let i = 0, il = _INSTANCES.length; i < il; i++) {\n\n\t\t\t\tif (_INSTANCES[i] === this) {\n\t\t\t\t\t_INSTANCES.splice(i, 1);\n\t\t\t\t\tfound = true;\n\t\t\t\t\til--;\n\t\t\t\t\ti--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.unbind();\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (typeof blob.state === 'number') {\n\n\t\t\t\tthis.__state = blob.state;\n\t\t\t\tthis.__pause = blob.pause;\n\n\t\t\t}\n\n\t\t\tif (typeof blob.updateclock === 'number') this.__updateclock = blob.updateclock;\n\t\t\tif (typeof blob.renderclock === 'number') this.__renderclock = blob.renderclock;\n\n\n\t\t\tif (blob.timeouts instanceof Array) {\n\t\t\t\t// TODO: deserialize timeouts\n\t\t\t}\n\n\t\t\tif (blob.intervals instanceof Array) {\n\t\t\t\t// TODO: deserialize intervals\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.app.Loop';\n\n\n\t\t\tlet states = {};\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.update !== 40) states.update = this.update;\n\t\t\tif (this.render !== 40) states.render = this.render;\n\n\n\t\t\tif (Object.keys(this.__timeouts).length > 0) {\n\n\t\t\t\tblob.timeouts = [];\n\n\t\t\t\tfor (let tid in this.__timeouts) {\n\n\t\t\t\t\tlet timeout = this.__timeouts[tid];\n\n\t\t\t\t\tblob.timeouts.push({\n\t\t\t\t\t\tdelta:    timeout.clock - this.__updateclock,\n\t\t\t\t\t\tcallback: lychee.serialize(timeout.callback),\n\t\t\t\t\t\t// scope:    lychee.serialize(timeout.scope)\n\t\t\t\t\t\tscope:    null\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (Object.keys(this.__intervals).length > 0) {\n\n\t\t\t\tblob.intervals = [];\n\n\t\t\t\tfor (let iid in this.__intervals) {\n\n\t\t\t\t\tlet interval = this.__intervals[iid];\n\n\t\t\t\t\tblob.intervals.push({\n\t\t\t\t\t\tclock:    interval.clock - this.__updateclock,\n\t\t\t\t\t\tdelta:    interval.delta,\n\t\t\t\t\t\tstep:     interval.step,\n\t\t\t\t\t\tcallback: lychee.serialize(interval.callback),\n\t\t\t\t\t\t// scope:    lychee.serialize(interval.scope)\n\t\t\t\t\t\tscope:    null\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (this.__state !== 1) {\n\n\t\t\t\tblob.pause = this.__pause;\n\t\t\t\tblob.state = this.__state;\n\n\t\t\t}\n\n\t\t\tblob.updateclock = this.__updateclock;\n\t\t\tblob.renderclock = this.__renderclock;\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.app.Loop',\n\t\t\t\t'arguments':   [ states ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tstart: function() {\n\n\t\t\tthis.__state = 1;\n\t\t\tthis.__start = Date.now();\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tstop: function() {\n\n\t\t\tthis.__state = 0;\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tpause: function() {\n\n\t\t\tthis.__state = 0;\n\t\t\tthis.__pause = Date.now() - this.__start;\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tresume: function() {\n\n\t\t\tthis.__state = 1;\n\t\t\tthis.__start = Date.now() - this.__pause;\n\t\t\tthis.__pause = 0;\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetTimeout: function(delta, callback, scope) {\n\n\t\t\tdelta    = typeof delta === 'number'    ? delta    : null;\n\t\t\tcallback = callback instanceof Function ? callback : null;\n\t\t\tscope    = scope !== undefined          ? scope    : global;\n\n\n\t\t\tif (delta === null || callback === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\n\t\t\tlet id = _id++;\n\n\t\t\tthis.__timeouts[id] = {\n\t\t\t\tclock:    this.__updateclock + delta,\n\t\t\t\tcallback: callback,\n\t\t\t\tscope:    scope\n\t\t\t};\n\n\n\t\t\treturn id;\n\n\t\t},\n\n\t\tremoveTimeout: function(id) {\n\n\t\t\tid = typeof id === 'number' ? id : null;\n\n\n\t\t\tif (id !== null && this.__timeouts[id] !== undefined) {\n\n\t\t\t\tdelete this.__timeouts[id];\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetInterval: function(delta, callback, scope) {\n\n\t\t\tdelta    = typeof delta === 'number'    ? delta    : null;\n\t\t\tcallback = callback instanceof Function ? callback : null;\n\t\t\tscope    = scope !== undefined          ? scope    : global;\n\n\n\t\t\tif (delta === null || callback === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\n\t\t\tlet id = _id++;\n\n\t\t\tthis.__intervals[id] = {\n\t\t\t\tclock:    this.__updateclock + delta,\n\t\t\t\tdelta:    delta,\n\t\t\t\tstep:     1,\n\t\t\t\tcallback: callback,\n\t\t\t\tscope:    scope\n\t\t\t};\n\n\n\t\t\treturn id;\n\n\t\t},\n\n\t\tremoveInterval: function(id) {\n\n\t\t\tid = typeof id === 'number' ? id : null;\n\n\n\t\t\tif (id !== null && this.__intervals[id] !== undefined) {\n\n\t\t\t\tdelete this.__intervals[id];\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetUpdate: function(update) {\n\n\t\t\tupdate = typeof update === 'number' ? update : null;\n\n\n\t\t\tif (update !== null && update > 0) {\n\n\t\t\t\tthis.update        = update;\n\t\t\t\tthis.__updatedelay = 1000 / update;\n\n\t\t\t\treturn true;\n\n\t\t\t} else if (update === 0) {\n\n\t\t\t\tthis.update        = update;\n\t\t\t\tthis.__updatedelay = Infinity;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetRender: function(render) {\n\n\t\t\trender = typeof render === 'number' ? render : null;\n\n\n\t\t\tif (render !== null && render > 0) {\n\n\t\t\t\tthis.render        = render;\n\t\t\t\tthis.__renderdelay = 1000 / render;\n\n\t\t\t\treturn true;\n\n\t\t\t} else if (render === 0) {\n\n\t\t\t\tthis.render        = render;\n\t\t\t\tthis.__renderdelay = Infinity;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.Agent":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.ai.Agent","url":"/libraries/lychee/source/ai/Agent.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_brain = function(brain) {\n\n\t\tif (brain instanceof Object) {\n\n\t\t\tif (typeof brain.update === 'function' && typeof brain.setControls === 'function' && typeof brain.setSensors === 'function') {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _train_brain = function() {\n\n\t\tlet brain = this.brain;\n\t\tif (brain !== null) {\n\n\t\t\tlet trainings = this.trainings;\n\n\t\t\tfor (let t = 0, tl = trainings.length; t < tl; t++) {\n\n\t\t\t\tlet training   = trainings[t];\n\t\t\t\tlet iterations = training.iterations || 1;\n\n\t\t\t\tfor (let i = 0; i < iterations; i++) {\n\t\t\t\t\tbrain.learn(training.inputs, training.outputs);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.alive     = true;\n\t\tthis.brain     = null;\n\t\tthis.fitness   = 0;\n\t\tthis.trainings = [];\n\n\n\t\tthis.setAlive(states.alive);\n\t\tthis.setBrain(states.brain);\n\t\tthis.setFitness(states.fitness);\n\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tlet brain = lychee.deserialize(blob.brain);\n\t\t\tif (brain !== null) {\n\t\t\t\tthis.setBrain(brain);\n\t\t\t}\n\n\t\t\tif (blob.trainings instanceof Array) {\n\t\t\t\tthis.trainings = blob.trainings.map(lychee.deserialize);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {};\n\t\t\tlet blob   = {};\n\n\n\t\t\tif (this.fitness !== 0) states.fitness = this.fitness;\n\n\n\t\t\tif (this.brain !== null)       blob.brain     = lychee.serialize(this.brain);\n\t\t\tif (this.trainings.length > 0) blob.trainings = this.trainings.map(lychee.serialize);\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.ai.Agent',\n\t\t\t\t'arguments':   [ states ],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet brain = this.brain;\n\t\t\tif (brain !== null) {\n\t\t\t\tbrain.update(clock, delta);\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tcrossover: function(agent) {\n\n\t\t\tagent = agent instanceof Composite ? agent : null;\n\n\n\t\t\tif (agent !== null) {\n\n\t\t\t\t// XXX: This is implemented by AI Agents\n\n\t\t\t\tlet zw_agent = lychee.deserialize(lychee.serialize(this));\n\t\t\t\tlet zz_agent = lychee.deserialize(lychee.serialize(agent));\n\n\t\t\t\treturn [ zw_agent, zz_agent ];\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\treward: function(diff, training) {\n\n\t\t\tdiff     = typeof diff === 'number'   ? Math.abs(diff | 0) : 1;\n\t\t\ttraining = training instanceof Object ? training           : null;\n\n\n\t\t\tthis.fitness += diff;\n\n\n\t\t\tif (training !== null) {\n\n\t\t\t\ttraining.iterations = diff;\n\t\t\t\tthis.trainings.push(training);\n\t\t\t\t_train_brain.call(this);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tpunish: function(diff, training) {\n\n\t\t\tdiff     = typeof diff === 'number'   ? Math.abs(diff | 0) : 1;\n\t\t\ttraining = training instanceof Object ? training           : null;\n\n\n\t\t\tthis.fitness -= diff;\n\n\n\t\t\tif (training !== null) {\n\n\t\t\t\ttraining.iterations = diff;\n\t\t\t\tthis.trainings.push(training);\n\t\t\t\t_train_brain.call(this);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAlive: function(alive) {\n\n\t\t\talive = typeof alive === 'boolean' ? alive : null;\n\n\n\t\t\tif (alive !== null) {\n\n\t\t\t\tthis.alive = alive;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetBrain: function(brain) {\n\n\t\t\tbrain = _validate_brain(brain) === true ? brain : null;\n\n\n\t\t\tif (brain !== null) {\n\n\t\t\t\tthis.brain = brain;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetFitness: function(fitness) {\n\n\t\t\tfitness = typeof fitness === 'number' ? (fitness | 0) : null;\n\n\n\t\t\tif (fitness !== null) {\n\n\t\t\t\tthis.fitness = fitness;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ui.Entity":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.ui.Entity","url":"/libraries/lychee/source/ui/Entity.js"}],"blob":{"attaches":{},"includes":["lychee.event.Emitter"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_effect = function(effect) {\n\n\t\tif (effect instanceof Object) {\n\n\t\t\tif (\n\t\t\t\ttypeof effect.update === 'function'\n\t\t\t\t&& typeof effect.render === 'function'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.width  = typeof states.width  === 'number' ? states.width  : 0;\n\t\tthis.height = typeof states.height === 'number' ? states.height : 0;\n\t\tthis.depth  = typeof states.depth === 'number'  ? states.depth  : 0;\n\t\tthis.radius = typeof states.radius === 'number' ? states.radius : 0;\n\n\t\tthis.alpha     = 1;\n\t\tthis.collision = Composite.COLLISION.none;\n\t\tthis.effects   = [];\n\t\tthis.shape     = Composite.SHAPE.rectangle;\n\t\tthis.state     = 'default';\n\t\tthis.states    = { 'default': null, 'active': null };\n\t\tthis.position  = { x: 0, y: 0, z: 0 };\n\t\tthis.visible   = true;\n\n\n\t\tthis.setAlpha(states.alpha);\n\t\tthis.setShape(states.shape);\n\t\tthis.setStates(states.states);\n\t\tthis.setState(states.state);\n\t\tthis.setPosition(states.position);\n\t\tthis.setVisible(states.visible);\n\n\n\t\t_Emitter.call(this);\n\n\t\tstates = null;\n\n\t};\n\n\n\t// Same ENUM values as lychee.app.Entity\n\tComposite.COLLISION = {\n\t\tnone: 0,\n\t\tA:    1,\n\t\tB:    2,\n\t\tC:    3,\n\t\tD:    4\n\t};\n\n\n\t// Same ENUM values as lychee.app.Entity\n\tComposite.SHAPE = {\n\t\tcircle:    0,\n\t\trectangle: 1,\n\t\tsphere:    2,\n\t\tcuboid:    3\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ui.Entity';\n\n\t\t\tlet states = {};\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.width  !== 0) states.width  = this.width;\n\t\t\tif (this.height !== 0) states.height = this.height;\n\t\t\tif (this.depth !== 0)  states.depth  = this.depth;\n\t\t\tif (this.radius !== 0) states.radius = this.radius;\n\n\t\t\tif (this.alpha !== 1)                         states.alpha   = this.alpha;\n\t\t\tif (this.shape !== Composite.SHAPE.rectangle) states.shape   = this.shape;\n\t\t\tif (this.state !== 'default')                 states.state   = this.state;\n\t\t\tif (Object.keys(this.states).length > 0)      states.states  = this.states;\n\t\t\tif (this.visible !== true)                    states.visible = this.visible;\n\n\n\t\t\tif (this.position.x !== 0 || this.position.y !== 0) {\n\n\t\t\t\tstates.position = {};\n\n\t\t\t\tif (this.position.x !== 0) states.position.x = this.position.x;\n\t\t\t\tif (this.position.y !== 0) states.position.y = this.position.y;\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = states;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\t\t\t\teffects[e].render(renderer, offsetX, offsetY);\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\tlet effect = effects[e];\n\t\t\t\tif (effect.update(this, clock, delta) === false) {\n\t\t\t\t\tthis.removeEffect(effect);\n\t\t\t\t\tel--;\n\t\t\t\t\te--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tisAtPosition: function(position) {\n\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tif (position !== null) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tlet ax = position.x;\n\t\t\t\t\tlet ay = position.y;\n\t\t\t\t\tlet bx = this.position.x;\n\t\t\t\t\tlet by = this.position.y;\n\n\n\t\t\t\t\tlet shape = this.shape;\n\t\t\t\t\tif (shape === Composite.SHAPE.circle) {\n\n\t\t\t\t\t\tlet dist = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n\t\t\t\t\t\tif (dist < this.radius) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (shape === Composite.SHAPE.rectangle) {\n\n\t\t\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\t\t\tlet hheight = this.height / 2;\n\t\t\t\t\t\tlet colX    = (ax >= bx - hwidth)  && (ax <= bx + hwidth);\n\t\t\t\t\t\tlet colY    = (ay >= by - hheight) && (ay <= by + hheight);\n\n\n\t\t\t\t\t\treturn colX && colY;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tcollidesWith: function(entity) {\n\n\t\t\tentity = lychee.interfaceof(lychee.ui.Entity, entity) ? entity : null;\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\n\t\t\talpha = typeof alpha === 'number' ? alpha : null;\n\n\n\t\t\tif (alpha !== null) {\n\n\t\t\t\tthis.alpha = Math.min(Math.max(alpha, 0), 1);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taddEffect: function(effect) {\n\n\t\t\teffect = _validate_effect(effect) ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.effects.push(effect);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffect: function(effect) {\n\n\t\t\teffect = _validate_effect(effect) ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.effects.splice(index, 1);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffects: function() {\n\n\t\t\tlet effects = this.effects;\n\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\teffects[e].update(this, Infinity, 0);\n\t\t\t\tthis.removeEffect(effects[e]);\n\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetPosition: function(position) {\n\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tif (position !== null) {\n\n\t\t\t\tthis.position.x = typeof position.x === 'number' ? position.x : this.position.x;\n\t\t\t\tthis.position.y = typeof position.y === 'number' ? position.y : this.position.y;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetShape: function(shape) {\n\n\t\t\tshape = lychee.enumof(Composite.SHAPE, shape) ? shape : null;\n\n\n\t\t\tif (shape !== null) {\n\n\t\t\t\tthis.shape = shape;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetStates: function(states) {\n\n\t\t\tstates = states instanceof Object ? states : null;\n\n\n\t\t\tif (states !== null) {\n\n\t\t\t\tthis.states = {\n\t\t\t\t\t'default': null,\n\t\t\t\t\t'active':  null\n\t\t\t\t};\n\n\t\t\t\tfor (let id in states) {\n\n\t\t\t\t\tif (states.hasOwnProperty(id)) {\n\n\t\t\t\t\t\tlet state = states[id];\n\t\t\t\t\t\tif (state instanceof Object) {\n\t\t\t\t\t\t\tthis.states[id] = states[id];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.states[id] !== undefined) {\n\n\t\t\t\tthis.state = id;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetVisible: function(visible) {\n\n\t\t\tvisible = typeof visible === 'boolean' ? visible : null;\n\n\n\t\t\tif (visible !== null) {\n\n\t\t\t\tthis.visible = visible;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.enn.Agent":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.ai.enn.Agent","url":"/libraries/lychee/source/ai/enn/Agent.js"}],"blob":{"attaches":{},"requires":["lychee.ai.enn.Brain","lychee.ai.enn.Genome"],"includes":["lychee.ai.Agent"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Agent          = lychee.import('lychee.ai.Agent');\n\tconst _Brain          = lychee.import('lychee.ai.enn.Brain');\n\tconst _Genome         = lychee.import('lychee.ai.enn.Genome');\n\tconst _MUTATION_RANGE = 0.25;\n\tconst _MUTATION_RATE  = 0.1;\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.genome = null;\n\n\n\t\tstates.brain  = states.brain  || new _Brain();\n\t\tstates.genome = states.genome || new _Genome();\n\n\t\t_Agent.call(this, states);\n\n\n\t\tthis.setGenome(states.genome);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Agent.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ai.enn.Agent';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tcrossover: function(agent) {\n\n\t\t\tagent = lychee.interfaceof(Composite, agent) ? agent : null;\n\n\n\t\t\tif (agent !== null) {\n\n\t\t\t\tlet zw_brain  = this.brain;\n\t\t\t\tlet zw_genome = this.genome;\n\t\t\t\tlet zz_brain  = agent.brain;\n\t\t\t\tlet zz_genome = agent.genome;\n\n\n\t\t\t\tif (zw_brain !== null && zz_brain !== null) {\n\t\t\t\t\tzw_genome.setGene('weights', zw_brain.getWeights());\n\t\t\t\t\tzz_genome.setGene('weights', zz_brain.getWeights());\n\t\t\t\t}\n\n\n\t\t\t\tlet zw_dna = zw_genome.getGene('weights');\n\t\t\t\tlet zz_dna = zz_genome.getGene('weights');\n\n\t\t\t\tif (zw_dna.length === zz_dna.length) {\n\n\t\t\t\t\tlet zw0_dna   = [];\n\t\t\t\t\tlet zw1_dna   = [];\n\t\t\t\t\tlet dna_split = (Math.random() * zw_dna.length) | 0;\n\n\n\t\t\t\t\tfor (let d = 0, dl = zw_dna.length; d < dl; d++) {\n\n\t\t\t\t\t\tif (d <= dna_split) {\n\t\t\t\t\t\t\tzw0_dna.push(zw_dna[d]);\n\t\t\t\t\t\t\tzw1_dna.push(zz_dna[d]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tzw0_dna.push(zz_dna[d]);\n\t\t\t\t\t\t\tzw1_dna.push(zw_dna[d]);\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif (Math.random() <= _MUTATION_RATE) {\n\t\t\t\t\t\t\tzw0_dna[d] += (Math.random() * _MUTATION_RANGE * 2) - _MUTATION_RANGE;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Math.random() <= _MUTATION_RATE) {\n\t\t\t\t\t\t\tzw1_dna[d] += (Math.random() * _MUTATION_RANGE * 2) - _MUTATION_RANGE;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tlet zw0_brain = null;\n\t\t\t\t\tlet zw1_brain = null;\n\n\t\t\t\t\tif (zw_brain !== null && zz_brain !== null) {\n\n\t\t\t\t\t\tzw0_brain = lychee.deserialize(lychee.serialize(zw_brain));\n\t\t\t\t\t\tzw0_brain.setWeights(zw0_dna);\n\n\t\t\t\t\t\tzw1_brain = lychee.deserialize(lychee.serialize(zz_brain));\n\t\t\t\t\t\tzw1_brain.setWeights(zw1_dna);\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tlet zw0_genome = lychee.deserialize(lychee.serialize(zw_genome));\n\t\t\t\t\tlet zw1_genome = lychee.deserialize(lychee.serialize(zz_genome));\n\n\t\t\t\t\tzw0_genome.setGene('weights', zw0_dna);\n\t\t\t\t\tzw1_genome.setGene('weights', zw1_dna);\n\n\t\t\t\t\tlet zw0_baby = new Composite({ brain: zw0_brain, genome: zw0_genome });\n\t\t\t\t\tlet zw1_baby = new Composite({ brain: zw1_brain, genome: zw1_genome });\n\n\n\t\t\t\t\treturn [ zw0_baby, zw1_baby ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tsetGenome: function(genome) {\n\n\t\t\tgenome = genome instanceof _Genome ? genome : null;\n\n\n\t\t\tif (genome !== null) {\n\n\t\t\t\tthis.genome = genome;\n\n\n\t\t\t\tlet brain = this.brain;\n\t\t\t\tif (brain !== null) {\n\n\t\t\t\t\tlet gene = genome.getGene('weights');\n\t\t\t\t\tif (gene !== null && gene.length > 0) {\n\n\t\t\t\t\t\tbrain.setWeights(gene);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgenome.setGene('weights', brain.getWeights());\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.enn.Brain":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.ai.enn.Brain","url":"/libraries/lychee/source/ai/enn/Brain.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _random = function() {\n\t\treturn (Math.random() * 2) - 1;\n\t};\n\n\tconst _sigmoid = function(value) {\n\t\treturn (1 / (1 + Math.exp((-1 * value) / 1)));\n\t};\n\n\tconst _init_network = function() {\n\n\t\tlet input_size = this.__sensors_map.reduce(function(a, b) {\n\t\t\treturn a + b;\n\t\t}, 0);\n\n\t\tlet output_size = this.__controls_map.reduce(function(a, b) {\n\t\t\treturn a + b;\n\t\t}, 0);\n\n\n\t\tif (input_size === 0 || output_size === 0) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tlet layers_size = 3;\n\t\tlet hidden_size = 1;\n\t\tlet weight_size = 0;\n\n\t\tif (input_size > output_size) {\n\t\t\thidden_size = input_size;\n\t\t\tlayers_size = Math.max(input_size - output_size, 3);\n\t\t} else {\n\t\t\thidden_size = output_size;\n\t\t\tlayers_size = Math.max(output_size - input_size, 3);\n\t\t}\n\n\n\t\tfor (let l = 0; l < layers_size; l++) {\n\n\t\t\tlet prev = hidden_size;\n\t\t\tlet size = hidden_size;\n\n\t\t\tif (l === 0) {\n\t\t\t\tprev = 0;\n\t\t\t\tsize = input_size;\n\t\t\t} else if (l === 1) {\n\t\t\t\tprev = input_size;\n\t\t\t\tsize = hidden_size;\n\t\t\t} else if (l === layers_size - 1) {\n\t\t\t\tprev = hidden_size;\n\t\t\t\tsize = output_size;\n\t\t\t}\n\n\n\t\t\tlet layer = new Array(size);\n\n\t\t\tfor (let n = 0, nl = layer.length; n < nl; n++) {\n\n\t\t\t\tlet neuron = {\n\t\t\t\t\tvalue:   _random(),\n\t\t\t\t\tweights: []\n\t\t\t\t};\n\n\t\t\t\tfor (let p = 0; p < prev; p++) {\n\t\t\t\t\tneuron.weights.push(_random());\n\t\t\t\t}\n\n\t\t\t\tlayer[n] = neuron;\n\n\t\t\t}\n\n\t\t\tthis.__layers[l]  = layer;\n\t\t\tweight_size      += layer.length;\n\n\t\t}\n\n\n\t\tthis.__size.input  = input_size;\n\t\tthis.__size.hidden = hidden_size;\n\t\tthis.__size.output = output_size;\n\t\tthis.__size.weight = weight_size;\n\n\t\tthis._inputs  = null;\n\t\tthis._outputs = null;\n\n\t\tthis._inputs  = new Array(input_size);\n\t\tthis._outputs = new Array(output_size);\n\n\t};\n\n\tconst _update_network = function(inputs, outputs) {\n\n\t\tlet layers = this.__layers;\n\n\n\t\t// Update Input Layer\n\t\tlet input_layer = layers[0];\n\n\t\tfor (let il = 0, ill = input_layer.length; il < ill; il++) {\n\t\t\tinput_layer[il].value = inputs[il];\n\t\t}\n\n\n\t\t// Update Hidden Layers\n\t\tlet prev_layer = layers[0];\n\n\t\tfor (let l = 1, ll = layers.length; l < ll; l++) {\n\n\t\t\tlet current_layer = layers[l];\n\n\t\t\tfor (let n = 0, nl = current_layer.length; n < nl; n++) {\n\n\t\t\t\tlet neuron = current_layer[n];\n\t\t\t\tlet value  = 0;\n\n\t\t\t\tfor (let p = 0, pl = prev_layer.length; p < pl; p++) {\n\t\t\t\t\tvalue += prev_layer[p].value * neuron.weights[p];\n\t\t\t\t}\n\n\t\t\t\tvalue        += neuron.bias;\n\t\t\t\tneuron.value  = _sigmoid(value);\n\n\t\t\t}\n\n\t\t\tprev_layer = current_layer;\n\n\t\t}\n\n\n\t\t// Update Output Layer\n\t\tlet output_layer = layers[layers.length - 1];\n\n\t\tfor (let o = 0, ol = output_layer.length; o < ol; o++) {\n\t\t\toutputs[o] = output_layer[o].value;\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.controls = [];\n\t\tthis.sensors  = [];\n\n\t\tthis.__controls_map = [];\n\t\tthis.__layers       = [];\n\t\tthis.__sensors_map  = [];\n\n\t\t// cache structures\n\t\tthis._inputs  = [];\n\t\tthis._outputs = [];\n\t\tthis.__size   = {\n\t\t\tinput:  0,\n\t\t\thidden: 0,\n\t\t\toutput: 0,\n\t\t\tweight: 0\n\t\t};\n\n\n\t\tthis.setSensors(states.sensors);\n\t\tthis.setControls(states.controls);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.layers instanceof Array) {\n\t\t\t\tthis.__layers = lychee.deserialize(blob.layers);\n\t\t\t}\n\n\t\t\tif (blob.size instanceof Object) {\n\t\t\t\tthis.__size = lychee.deserialize(blob.size);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {};\n\t\t\tlet blob   = {};\n\n\n\t\t\tif (this.controls.length > 0) states.controls = lychee.serialize(this.controls);\n\t\t\tif (this.sensors.length > 0)  states.sensors  = lychee.serialize(this.sensors);\n\n\n\t\t\tif (this.__layers.length > 0) {\n\t\t\t\tblob.layers = lychee.serialize(this.__layers);\n\t\t\t}\n\n\t\t\tif (this.__size.input !== 0 || this.__size.output !== 0) {\n\t\t\t\tblob.size = lychee.serialize(this.__size);\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.ai.enn.Brain',\n\t\t\t\t'arguments':   [ states ],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet controls     = this.controls;\n\t\t\tlet controls_map = this.__controls_map;\n\t\t\tlet sensors      = this.sensors;\n\t\t\tlet inputs       = this._inputs;\n\t\t\tlet outputs      = this._outputs;\n\n\n\t\t\t// 1. Transform Policies to Inputs\n\t\t\tfor (let i = 0, s = 0, sl = sensors.length; s < sl; s++) {\n\n\t\t\t\tlet sensor = sensors[s];\n\t\t\t\tlet values = sensor.sensor();\n\n\t\t\t\tfor (let v = 0, vl = values.length; v < vl; v++) {\n\t\t\t\t\tinputs[i++] = values[v];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// 2. Update Network\n\t\t\t_update_network.call(this, inputs, outputs);\n\n\n\t\t\t// 3. Transform Outputs to Policies\n\t\t\tlet offset = 0;\n\n\t\t\tfor (let c = 0, cl = controls_map.length; c < cl; c++) {\n\n\t\t\t\tlet control = controls[c];\n\t\t\t\tlet length  = controls_map[c];\n\t\t\t\tlet values  = outputs.slice(offset, length);\n\n\t\t\t\tif (values.length > 0) {\n\t\t\t\t\tcontrol.control(values);\n\t\t\t\t}\n\n\t\t\t\toffset += length;\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tlearn: function(inputs, outputs) {\n\n\t\t\tinputs  = inputs instanceof Array  ? inputs  : null;\n\t\t\toutputs = outputs instanceof Array ? outputs : null;\n\n\n\t\t\tif (inputs !== null && outputs !== null) {\n\n\t\t\t\t// XXX: Feed Forward NN cannot learn\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetControls: function(controls) {\n\n\t\t\tcontrols = controls instanceof Array ? controls : null;\n\n\n\t\t\tif (controls !== null) {\n\n\t\t\t\tthis.controls = controls;\n\n\t\t\t\tthis.__controls_map = controls.map(function(control) {\n\t\t\t\t\treturn (control.sensor() || [ 1 ]).length;\n\t\t\t\t});\n\n\n\t\t\t\tlet size = this.__controls_map.reduce(function(a, b) {\n\t\t\t\t\treturn a + b;\n\t\t\t\t}, 0);\n\n\t\t\t\tif (size !== this.__size.output) {\n\t\t\t\t\t_init_network.call(this);\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetSensors: function(sensors) {\n\n\t\t\tsensors = sensors instanceof Array ? sensors : null;\n\n\n\t\t\tif (sensors !== null) {\n\n\t\t\t\tthis.sensors = sensors;\n\n\t\t\t\tthis.__sensors_map = sensors.map(function(sensor) {\n\t\t\t\t\treturn (sensor.sensor() || [ 1 ]).length;\n\t\t\t\t});\n\n\n\t\t\t\tlet size = this.__sensors_map.reduce(function(a, b) {\n\t\t\t\t\treturn a + b;\n\t\t\t\t}, 0);\n\n\t\t\t\tif (size !== this.__size.input) {\n\t\t\t\t\t_init_network.call(this);\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetWeights: function() {\n\n\t\t\tlet layers  = this.__layers;\n\t\t\tlet weights = [];\n\n\n\t\t\tfor (let l = 0, ll = layers.length; l < ll; l++) {\n\n\t\t\t\tlet layer = layers[l];\n\n\t\t\t\tfor (let n = 0, nl = layer.length; n < nl; n++) {\n\n\t\t\t\t\tlet neuron = layer[n];\n\t\t\t\t\tif (neuron.weights.length !== 0) {\n\n\t\t\t\t\t\tfor (let w = 0, wl = neuron.weights.length; w < wl; w++) {\n\t\t\t\t\t\t\tweights.push(neuron.weights[w]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis.__size.weight = weights.length;\n\n\n\t\t\treturn weights;\n\n\t\t},\n\n\t\tsetWeights: function(weights) {\n\n\t\t\tweights = weights instanceof Array ? weights : null;\n\n\n\t\t\tif (weights !== null) {\n\n\t\t\t\tlet size = this.__size.weight;\n\t\t\t\tif (size === weights.length) {\n\n\t\t\t\t\tlet count  = 0;\n\t\t\t\t\tlet layers = this.__layers;\n\n\t\t\t\t\tfor (let l = 0, ll = layers.length; l < ll; l++) {\n\n\t\t\t\t\t\tlet layer = layers[l];\n\n\t\t\t\t\t\tfor (let n = 0, nl = layer.length; n < nl; n++) {\n\n\t\t\t\t\t\t\tlet neuron = layer[n];\n\t\t\t\t\t\t\tif (neuron.weights.length !== 0) {\n\n\t\t\t\t\t\t\t\tfor (let w = 0, wl = neuron.weights.length; w < wl; w++) {\n\t\t\t\t\t\t\t\t\tneuron.weights[w] = weights[count++];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.policy.Control":{"constructor":"lychee.Definition","arguments":[{"id":"game.policy.Control","url":"/projects/flappy-bnn/source/policy/Control.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = lychee.assignsafe({\n\t\t\tentity: null,\n\t\t\ttarget: null\n\t\t}, data);\n\n\n\t\tthis.entity = states.entity instanceof Object ? states.entity : null;\n\t\tthis.target = states.target instanceof Object ? states.target : null;\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {\n\t\t\t\tentity: null,\n\t\t\t\ttarget: null\n\t\t\t};\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'game.policy.Control',\n\t\t\t\t'arguments':   [ states ]\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsensor: function() {\n\n\t\t\tlet entity = this.entity;\n\t\t\tlet target = this.target;\n\t\t\tlet values = [ 0.5 ];\n\n\n\t\t\tif (entity !== null && target !== null) {\n\n\t\t\t\tlet ey = entity.position.y;\n\t\t\t\tlet ty = target.position.y;\n\n\t\t\t\tif (ty < ey) {\n\t\t\t\t\tvalues[0] = 1;\n\t\t\t\t} else {\n\t\t\t\t\tvalues[0] = 0;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn values;\n\n\t\t},\n\n\t\tcontrol: function(values) {\n\n\t\t\tlet entity = this.entity;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet val = values[0];\n\t\t\t\tif (val > 0.5) {\n\n\t\t\t\t\tif (typeof entity.flap === 'function') {\n\n\t\t\t\t\t\tentity.flap();\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.policy.Position":{"constructor":"lychee.Definition","arguments":[{"id":"game.policy.Position","url":"/projects/flappy-bnn/source/policy/Position.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = lychee.assignsafe({\n\t\t\tentity: null,\n\t\t\tlimit:  {\n\t\t\t\tx: Infinity,\n\t\t\t\ty: Infinity,\n\t\t\t\tz: Infinity\n\t\t\t}\n\t\t}, data);\n\n\n\t\tthis.entity = states.entity instanceof Object ? states.entity : null;\n\t\tthis.limit  = states.limit instanceof Object  ? states.limit  : { x: Infinity, y: Infinity, z: Infinity };\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {\n\t\t\t\tentity: null,\n\t\t\t\tlimit:  this.limit\n\t\t\t};\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'game.policy.Position',\n\t\t\t\t'arguments':   [ states ]\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsensor: function() {\n\n\t\t\tlet entity = this.entity;\n\t\t\tlet limit  = this.limit;\n\t\t\tlet values = [ 0.5 ];\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet hly = limit.y / 2;\n\n\t\t\t\tvalues[0] = (hly + entity.position.y) / (hly * 2);\n\n\t\t\t}\n\n\n\t\t\treturn values;\n\n\t\t},\n\n\t\tcontrol: function(values) {\n\n\t\t\tlet entity = this.entity;\n\t\t\tlet limit  = this.limit;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet hly = limit.y / 2;\n\n\t\t\t\tentity.position.y = (values[0] * (hly * 2)) - hly;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.app.sprite.Goal":{"constructor":"lychee.Definition","arguments":[{"id":"game.app.sprite.Goal","url":"/projects/flappy-bnn/source/app/sprite/Goal.js"}],"blob":{"attaches":{"json":{"constructor":"Config","arguments":["/projects/flappy-bnn/source/app/sprite/Goal.json"],"blob":{"buffer":"data:application/json;base64,ewoJIndpZHRoIjogNDAsCgkiaGVpZ2h0IjogMjU2LAoJImNvbGxpc2lvbiI6IDEsCgkic2hhcGUiOiAxLAoJInN0YXRlIjogImRlZmF1bHQiLAoJInN0YXRlcyI6IHsKCQkiZGVmYXVsdCI6IHsKCQkJImFuaW1hdGlvbiI6IGZhbHNlCgkJfQoJfSwKCSJtYXAiOiB7CgkJImRlZmF1bHQiOiBbCgkJCXsKCQkJCSJ4IjogMCwKCQkJCSJ5IjogMCwKCQkJCSJ3IjogNDAsCgkJCQkiaCI6IDI1NgoJCQl9CgkJXQoJfQp9"}},"png":{"constructor":"Texture","arguments":["/projects/flappy-bnn/source/app/sprite/Goal.png"],"blob":{"buffer":"data:image/png;base64,PNG\r\n\u001a\n\u0000\u0000\u0000\rIHDR\u0000\u0000\u0000(\u0000\u0000\u0001\u0000\b\u0006\u0000\u0000\u0000v4\u0000\u0000\u0000\u0006bKGD\u0000\u0000\u0000\u0000\u0000\u0000\tpHYs\u0000\u0000\u000e\u0000\u0000\u000e\u0001od\u0000\u0000\u0000\u0007tIME\u0007\u000b\u0015\u0013\u0013(\u0000\u0000\nIDATxo\u001bE\u001e?3k{$m6\rU6B\u0003\u0004\bZNwR\u000b-\u0001\u0018\u0017\u0003\u001e\u0001\u001eDjBC\u001d)\u0007n~^;!p|(f<|g3/\u0003r,\u0003\\< w-TXJ~9l\u00050<\u0010;ZZ?x~aHf$\u000f4\u0015\u00177?Qtc-\"fw+:\u001fG\u0011BWfTY7~ujq=T\u001fn!N\n.&znR\n\u0014R\b\u001a\u0014,M\t[-X\u0015Z}~a\r0HT.h\n~.H\b\u0005\u0007&\t-4\b0\b9;g\u001b.\u0017`2;q$?K|o7-\u001b\u0001~ZQ5t\u00069P(363C/;\u0016%lkj<\\tlCWhlohi\rB`cZe,a3{\u0013`\u0015\u0016,\u001a\n\r)t'7F`b\u0011\u0019\u001c<:Y<A\u000b\n!H\u0013\"y\u0015 \u0018Z\u001cVe$Q7]rey0\bl{om\\v\u001clF\bA;IlK)R[R!MRD\u0013\u0005\u0001*W%(4\u0004 \u0010AH\u001ch@Zjiiw&rENJ\u0015\r7EuDo*\\\u001cRUN}\u0016or\u001d-\u001cTc\u0012klkww?uMg.\u0017'\roH<LV\u0002~\u0006D9aic8]k\u000b<]F\u000e{[It^\\\u0013ek^(TwY7\u0019ct,ABOP\u0003\n\u00115)FV_eF+)sD\u0010(\n\u0017']\u0006\u00160\u001b\\H*DID^ \u0016\nq\u0014qy%z\u0004\u001a\u0014s@T\\\u0019fD\u0005O\u0004K\u0012q%fks\u0003Z\u000fI5~Z\u001c3CZ\u0012\u000b\u001f\u0017d\u0011N\rIpo\u0012Gg.}c$\n:\u0012'\u001e~x~<rij,\nJkDVQQZs8j,\u0005Kl\u0016ss#%\u0007\nJ)9y{=r\u0014\u000f>\n(]9\u0014\u000f>/O\"\"I[b6<J2yB\u000b\\<If*Fr$B\bVI\u0019\u001ek)~\u0002w<h\u0005-\u0006r'N\u0014>FY\u001b$qeA\u0000\u001as8\u0000SZ-!|\u0016G~wm70jA5M$\f\u001d;8[{*S]qMO~\u000eVO'v|'\u00065pz\u0007-b\u0014\u0018K]~Eg_[Hw\u0012/(wz$(\u000b-mUE\u0001 = z`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\u0006`0\u0018\f\f\u0002p~\u001d\u0001y{nWa+8\u001f\u0017y*\u000b\u000b\u0017F\n.\u001c4/$q|.'\u0016M.\u0003\u001fkq\u0014\u00114/,zrONR\bR_\u0012+;a+lJ)RL=;rQ>p\u0006\u0018$W*w4rse6=\u0000Fk}}GRG\u001f!l4<p\bt\u00051'Jg_J0l9\t\u0006\u000bG7]q^}j\u001awu>\\5Xj\u001d'\u0019dIsXG\u0016\u001fu{#q\u0001eY\u001cG)5QSrPtm^5+\u0003+Vu,-d]\u0003+\u0010v\u001e\u0012am\r\u0014|irECD~\u000fnD\u0019!\u0006~ICD\u000er7nBN+E[u\u0013\u0010v#\u0010u\u0013>g]d$\u000b$\u0017o\u0010,M!b>v\u0010\u0002T!)8C\bh\u001d>!-=6\u0005{v?\u000fg\u0004n\nBt\u0006\f pS>;=\u0013OI/h\u001d\u0010tgUm\u000bd@;N\u0006^>Q\u000fz\u0015L\\57\u0017\\|EK&x\u0015ozP\u0000\u0012\u001d (\u0011Rl|\f!\u0005A\u001d@\"\nv)l\u001d'C.D\b[\"3M, :\"\u001cm8Nw%\u0006@8\u0016i5vk_\u0005s\u0014,\r!\\\u0000/}*RJt\u000b\u0006!%y<\u000fH[H\u000ej=\u000bJKb\u001dJBR\u00106zCV240+z7Te$d{\u0014;aG`6B\bIB\u001c\u0014u+\u0015hJ\u0010'q8(Zwo[6\u0005QMlN\u001bM\u00051nz\u001c((\u001cs\u0007=yq6a\u001f@\t\u0000[\"WeK.\u00034dC>#']%uhgd/\u0003&\u0012lQTm6}A\r1j\u0006\r49t,(\u0004]*a;\u000ea\u001eC@\u000bp,DW'?5r;\u001a\u0014T*dMN=A4>hYVmT<H'Ilu\u0019t\u0019`x\u001a.YZ?\u001b`\"]/~\u0004<\u000b^~C\u0013F_@ni/.\nP\u0006\u0001q\u0015c\u001f\u0011sJ\u0000\u0000\u0000\u0000IENDB`"}}},"requires":["game.app.sprite.Plane"],"includes":["lychee.app.Sprite"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Plane   = lychee.import('game.app.sprite.Plane');\n\tconst _Sprite  = lychee.import('lychee.app.Sprite');\n\tconst _CONFIG  = attachments[\"json\"].buffer;\n\tconst _TEXTURE = attachments[\"png\"];\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, _CONFIG, data);\n\n\n\t\tstates.texture  = _TEXTURE;\n\t\tstates.position = {\n\t\t\tx: -4096,\n\t\t\ty: 0\n\t\t};\n\t\tstates.velocity = {\n\t\t\tx: -256\n\t\t};\n\n\n\t\t_Sprite.call(this, states);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Sprite.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.app.sprite.Goal';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tcollidesWith: function(plane) {\n\n\t\t\tplane = plane instanceof _Plane ? plane : null;\n\n\n\t\t\tif (plane !== null) {\n\n\t\t\t\tlet px = plane.position.x;\n\t\t\t\tlet py = plane.position.y;\n\t\t\t\tlet pw = plane.width;\n\t\t\t\tlet ph = plane.height;\n\n\t\t\t\tlet x1 = this.position.x - this.width / 2;\n\t\t\t\tlet x2 = this.position.x + this.width / 2;\n\n\t\t\t\t// XXX: Let planes go 8px into the boxes (40px bb w/h)\n\t\t\t\tlet y1 = this.position.y - (this.height - 32 * 2) / 2;\n\t\t\t\tlet y2 = this.position.y + (this.height - 32 * 2) / 2;\n\n\n\t\t\t\tif (px + pw / 2 > x1 && px - pw / 2 < x2) {\n\n\t\t\t\t\tif (py - ph / 2 > y1 && py + ph / 2 < y2) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Sprite":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.app.Sprite","url":"/libraries/lychee/source/app/Sprite.js"}],"blob":{"attaches":{},"includes":["lychee.app.Entity"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Entity = lychee.import('lychee.app.Entity');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _start_animation = function(settings) {\n\n\t\tlet duration = typeof settings.duration === 'number' ? settings.duration : 1000;\n\t\tlet frame    = typeof settings.frame === 'number'    ? settings.frame    : 0;\n\t\tlet frames   = typeof settings.frames === 'number'   ? settings.frames   : 25;\n\t\tlet loop     = settings.loop === true;\n\n\n\t\tlet animation = this.__animation;\n\n\t\tanimation.start    = null;\n\t\tanimation.active   = true;\n\t\tanimation.duration = duration;\n\t\tanimation.frames   = frames;\n\t\tanimation.loop     = loop;\n\n\t\tthis.frame = frame;\n\n\t};\n\n\tconst _stop_animation = function() {\n\n\t\tlet animation = this.__animation;\n\n\t\tanimation.active = false;\n\n\t\tthis.frame = 0;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.frame   = 0;\n\t\tthis.texture = null;\n\n\t\tthis.__animation = {\n\t\t\tactive:   false,\n\t\t\tstart:    null,\n\t\t\tframes:   0,\n\t\t\tduration: 0,\n\t\t\tloop:     false\n\t\t};\n\t\tthis.__map = {\n\t\t\t'default': []\n\t\t};\n\n\n\t\tthis.setTexture(states.texture);\n\t\tthis.setMap(states.map);\n\n\t\tdelete states.texture;\n\t\tdelete states.map;\n\n\n\t\t_Entity.call(this, states);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tlet texture = lychee.deserialize(blob.texture);\n\t\t\tif (texture !== null) {\n\t\t\t\tthis.setTexture(texture);\n\t\t\t}\n\n\t\t\tif (blob.animation instanceof Object) {\n\t\t\t\t_start_animation.call(this, blob.animation);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Entity.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.app.Sprite';\n\n\t\t\tlet states = data['arguments'][0];\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (Object.keys(this.__map).length > 0) {\n\n\t\t\t\tstates.map = {};\n\n\n\t\t\t\tfor (let state in this.__map) {\n\n\t\t\t\t\tstates.map[state] = [];\n\n\n\t\t\t\t\tlet frames = this.__map[state];\n\t\t\t\t\tfor (let f = 0, fl = frames.length; f < fl; f++) {\n\n\t\t\t\t\t\tlet frame  = frames[f];\n\t\t\t\t\t\tlet sframe = {};\n\n\t\t\t\t\t\tif (frame.x !== 0) sframe.x = frame.x;\n\t\t\t\t\t\tif (frame.y !== 0) sframe.y = frame.y;\n\t\t\t\t\t\tif (frame.w !== 0) sframe.w = frame.w;\n\t\t\t\t\t\tif (frame.h !== 0) sframe.h = frame.h;\n\n\n\t\t\t\t\t\tstates.map[state].push(sframe);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (this.__animation.active === true) {\n\n\t\t\t\tblob.animation = {};\n\n\t\t\t\tif (this.__animation.duration !== 1000) blob.animation.duration = this.__animation.duration;\n\t\t\t\tif (this.frame !== 0)                   blob.animation.frame    = this.frame;\n\t\t\t\tif (this.__animation.frames !== 25)     blob.animation.frames   = this.__animation.frames;\n\t\t\t\tif (this.__animation.loop !== false)    blob.animation.loop     = true;\n\n\t\t\t}\n\n\t\t\tif (this.texture !== null) blob.texture = lychee.serialize(this.texture);\n\n\n\t\t\tdata['blob'] = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tlet texture = this.texture;\n\t\t\tif (texture !== null) {\n\n\t\t\t\tlet alpha    = this.alpha;\n\t\t\t\tlet position = this.position;\n\n\t\t\t\tlet x1 = 0;\n\t\t\t\tlet y1 = 0;\n\n\n\t\t\t\tif (alpha !== 1) {\n\t\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t\t}\n\n\n\t\t\t\tlet map = this.__map[this.state][this.frame] || null;\n\t\t\t\tif (map !== null) {\n\n\t\t\t\t\tx1 = position.x + offsetX - map.w / 2;\n\t\t\t\t\ty1 = position.y + offsetY - map.h / 2;\n\n\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\ttexture,\n\t\t\t\t\t\tmap\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet hw = (this.width / 2)  || this.radius;\n\t\t\t\t\tlet hh = (this.height / 2) || this.radius;\n\n\t\t\t\t\tx1 = position.x + offsetX - hw;\n\t\t\t\t\ty1 = position.y + offsetY - hh;\n\n\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\ttexture\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\n\t\t\t\tif (alpha !== 1) {\n\t\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t_Entity.prototype.render.call(this, renderer, offsetX, offsetY);\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\t_Entity.prototype.update.call(this, clock, delta);\n\n\n\t\t\tlet animation = this.__animation;\n\t\t\tif (animation.active === true) {\n\n\t\t\t\tif (animation.start === null) {\n\t\t\t\t\tanimation.start = clock;\n\t\t\t\t}\n\n\t\t\t\tif (animation.start !== null) {\n\n\t\t\t\t\tlet t = (clock - animation.start) / animation.duration;\n\t\t\t\t\tif (t <= 1) {\n\n\t\t\t\t\t\tthis.frame = Math.max(0, Math.ceil(t * animation.frames) - 1);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (animation.loop === true) {\n\t\t\t\t\t\t\tanimation.start = clock;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.frame = animation.frames - 1;\n\t\t\t\t\t\t\tanimation.active = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tlet result = _Entity.prototype.setState.call(this, id);\n\t\t\tif (result === true) {\n\n\t\t\t\tlet map = this.__map[this.state] || null;\n\t\t\t\tif (map !== null) {\n\n\t\t\t\t\tif (map instanceof Array) {\n\n\t\t\t\t\t\tlet statemap = this.states[this.state] || null;\n\t\t\t\t\t\tif (statemap !== null) {\n\n\t\t\t\t\t\t\t_stop_animation.call(this);\n\n\t\t\t\t\t\t\tif (statemap.animation === true) {\n\n\t\t\t\t\t\t\t\t_start_animation.call(this, {\n\t\t\t\t\t\t\t\t\tduration: statemap.duration || 1000,\n\t\t\t\t\t\t\t\t\tframe:    0,\n\t\t\t\t\t\t\t\t\tframes:   map.length,\n\t\t\t\t\t\t\t\t\tloop:     statemap.loop === true\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tmap = map[0];\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (map.width !== undefined && typeof map.width === 'number') {\n\t\t\t\t\t\tthis.width = map.width;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (map.height !== undefined && typeof map.height === 'number') {\n\t\t\t\t\t\tthis.height = map.height;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (map.radius !== undefined && typeof map.radius === 'number') {\n\t\t\t\t\t\tthis.radius = map.radius;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tsetTexture: function(texture) {\n\n\t\t\ttexture = texture instanceof Texture ? texture : null;\n\n\n\t\t\tthis.texture = texture;\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetMap: function(map) {\n\n\t\t\tmap = map instanceof Object ? map : null;\n\n\n\t\t\tlet valid = false;\n\n\t\t\tif (map !== null) {\n\n\t\t\t\tfor (let state in map) {\n\n\t\t\t\t\tlet frames = map[state];\n\t\t\t\t\tif (frames instanceof Array) {\n\n\t\t\t\t\t\tthis.__map[state] = [];\n\n\n\t\t\t\t\t\tfor (let f = 0, fl = frames.length; f < fl; f++) {\n\n\t\t\t\t\t\t\tlet frame = frames[f];\n\t\t\t\t\t\t\tif (frame instanceof Object) {\n\n\t\t\t\t\t\t\t\tframe.x = typeof frame.x === 'number' ? frame.x : 0;\n\t\t\t\t\t\t\t\tframe.y = typeof frame.y === 'number' ? frame.y : 0;\n\t\t\t\t\t\t\t\tframe.w = typeof frame.w === 'number' ? frame.w : 0;\n\t\t\t\t\t\t\t\tframe.h = typeof frame.h === 'number' ? frame.h : 0;\n\n\n\t\t\t\t\t\t\t\tthis.__map[state].push(frame);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tvalid = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn valid;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.app.sprite.Plane":{"constructor":"lychee.Definition","arguments":[{"id":"game.app.sprite.Plane","url":"/projects/flappy-bnn/source/app/sprite/Plane.js"}],"blob":{"attaches":{"json":{"constructor":"Config","arguments":["/projects/flappy-bnn/source/app/sprite/Plane.json"],"blob":{"buffer":"data:application/json;base64,ewoJIndpZHRoIjogNDAsCgkiaGVpZ2h0IjogMzIsCgkiY29sbGlzaW9uIjogMSwKCSJzaGFwZSI6IDEsCgkic3RhdGUiOiAiZGVmYXVsdCIsCgkic3RhdGVzIjogewoJCSJkZWZhdWx0IjogewoJCQkiYW5pbWF0aW9uIjogZmFsc2UKCQl9Cgl9LAoJIm1hcCI6IHsKCQkiZGVmYXVsdCI6IFsKCQkJewoJCQkJIngiOiAwLAoJCQkJInkiOiAwLAoJCQkJInciOiA0MCwKCQkJCSJoIjogMzIKCQkJfQoJCV0KCX0KfQ=="}},"png":{"constructor":"Texture","arguments":["/projects/flappy-bnn/source/app/sprite/Plane.png"],"blob":{"buffer":"data:image/png;base64,PNG\r\n\u001a\n\u0000\u0000\u0000\rIHDR\u0000\u0000\u0000(\u0000\u0000\u0000 \b\u0006\u0000\u0000\u0000`:\u0000\u0000\u0000\u0000\u0006bKGD\u0000\u0000\u0000\u0000\u0000\u0000\tpHYs\u0000\u0000\u000b\u0013\u0000\u0000\u000b\u0013\u0001\u0000\u0018\u0000\u0000\u0000\u0007tIME\u0007\u000b\u0016\u000e\r\t\u001ec\u0000\u0000\tIDATX{pU\u0019-m\\^iZZlI\f\u0002SFh(Bg(cAr0^\u0014\u0004t@\u0001Q@J\u0007(H\u0019i$m\u0018z&If7l9ihK39y{\"8\t<yHN\tMu!1!:,l[[\u001a8Bk\u001b\u001aM\u000fOM$b:\u0010\u0005\\^,\u000fD\u001e_[[G\u0019Ys9UUnm\"'ji i\u0018JB=)Un\bMC\bP\b8j'&\u0010\u0002\u0001\u0016/fsw\u000b<`\u0001^|A41t\u001d1\u0006Y@b8J4\u001aD\u0018\u0015\u0011<4@V\u0010^7;gk>ll!TjUN\u001b\u001c\f \f_!\b\u0002:lnSr2\u001b7]\u001a_BG\u0004Fv\u0004\u0011\u0012Xc_\\IA\u001e={Q\u0010]>p3\b\u0017\u0004RfK;k\u001bMpR*M**9\u000e\u0001KriKWueKf`3\u0013^\u001bX|\u0006\"\u001aJ\u0007yK\u0013n7\u001fQ\u00183{q\u000b%;zfuS(r\u001b6a\tq\nD0FD_,KWAu\u001cu\u001a\u00031zB#$:8h\u000fR\u0010xU\u0015{\u001f1njGG!Sf}\u000bR1m]'x\u0019!\u0014'9\u001e]\u0006=\u00043k\u0013a\u0005UTR*E,;^nE\b\u001dTolG\u0003/\f~8i>[O7\u0017jjj\r20|6Tr\u0004\u00143h\u0014?a{l\u0012Bh1\u0000\u0002\u0004m\u0013W\\IY\u0000,\u0016j~xw>p~,2Sx5J=XI\u0018\u0014]\bCoX> %\\\u0015\u0019\u001a\u0001`\u0010:\u0012s!JaY\u0016Ja>e\u000e{n)%R\\)0p7xyq:{sAJ*\\5eeM\u001b:\f%\n\b|0\fR\u00159oP^:'6\u000f})QC$1\u0014\u0010T\u001eO^)T\u001e\f\u00035c\u000eR7| \u00000m&h:hL&Cp\u0011B\u0010F1-\u0007\u000bP\u0012\u001aS\u0003\u00032;0@uRNBj\u0018\u00040o\u0001\u0014za7@\u0011\u00128M$@p\u00110\fGk\u0000R+[ZYP)\"iB\u001d\u0000Di\u0000u\nB,Jd(G8.q\n'\u001f\">y\nR1HQ5--\u001d`;|\f$S1ta\u00103\fbu^VkH\u001a\u0015E4\u0018\u0006w!Dg;E!QQX\u0014=mX=\u0014\u0002\u0001J;c\u001ejmP\u0013\u0001\u0012_J \u000f\u0002Jt)\f\u0014voZ(v\u001008+%~\u0012S{\u0017)FQQ\u001c\u0001~m,l\toSc\u0005c~2.\u0004E)\tG!(0g\fsT\rW\u001eS`\u0018/\u0010 40LWi\u0012{XC\u000b9pgiG\bjiy\u000f]ar\u0000B\u0011G\t\r=1\nQ7\u001c(W42$m$\u0013J\u0012t@3K\u0012F\u001f\u0007bD\u0006\u0001\u001c[M\u0013\u001677\u0003G\u0016.a\u001b,\u000b\u0018I(%\u001fC\"q^4G\t63jv\u0004\u0002MO\u000f\"IUn%K987'n\u0018DuA%\u0018BJYsYGE-*#\u00162Dxe0\u0003u\u0001\u0017cP\bP:\u0004\u001fnh Ja\u0018\\\u0017[\u0015\f\u0018\u0006\b=6\u0007\u0014\u0001fU4\r%09\u0000\t\u001cr\u0018a=wZ:\u001a=wZ,y\fayXA\u0018QSIFb\u001cuHT|^s\f<\u0018\tX\bn;4xqJ1%\u001e'T\n'\bF/p\u000f^$xy+55u;mjpp\u0010%FeWw6L^\u0005\u000b.\u0001Mq\u001b\u001e\u0007{\u001e6`\u0001\u0011D+s#Bul\\}\\<\u0000.vG>\\E~50\\RaB@\u00134\u0014Mel2\u0012\u0004B\bn}Gku]_\u0011FrB\u0018koogln5+z\u000b3\u000e\u000e\u000ea_Ok\u000f\u001f;r\u0004};g7QW}\u000e?\t\bd)qzd\u0016J)\u0000i\u0018F[GGG9x'k4F\"ssfHH)\u0011B0i$\n\u0002J)t]W\\sQ]fF\u001e\u0001a\u001aV$38x\"N\u001aW[KOODs\u001eN$\u0011\u0010nlvm\r\u001bs;\u001f\u0001Ll6K&&\u001cdgg'yi8LbEt:E]iZB)uDJa\u0018[0?f \u0000\u0000\u0000\u0000IENDB`"}}},"includes":["lychee.app.Sprite"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Sprite  = lychee.import('lychee.app.Sprite');\n\tconst _CONFIG  = attachments[\"json\"].buffer;\n\tconst _TEXTURE = attachments[\"png\"];\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, _CONFIG, data);\n\n\n\t\tthis.alive = true;\n\n\t\tthis.__canflap = true;\n\t\tthis.__timeout = null;\n\n\n\t\tstates.texture = _TEXTURE;\n\t\tstates.position = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\t\tstates.velocity = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\n\n\t\t_Sprite.call(this, states);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Sprite.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.app.sprite.Plane';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tflap: function() {\n\n\t\t\tif (this.__canflap === true) {\n\n\t\t\t\tthis.velocity.y = -256;\n\n\t\t\t\tthis.__canflap  = false;\n\t\t\t\tthis.__timeout  = null;\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tif (this.__timeout === null) {\n\t\t\t\tthis.__timeout = clock + 250;\n\t\t\t} else if (clock > this.__timeout) {\n\t\t\t\tthis.__canflap = true;\n\t\t\t}\n\n\t\t\tif (this.alive === true) {\n\n\t\t\t\t_Sprite.prototype.update.call(this, clock, delta);\n\n\t\t\t\tthis.velocity.y += (delta / 1000) * 256 * 3;\n\n\t\t\t} else {\n\n\t\t\t\tlet effects = this.effects;\n\t\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\t\tlet effect = effects[e];\n\t\t\t\t\tif (effect.update(this, clock, delta) === false) {\n\t\t\t\t\t\tthis.removeEffect(effect);\n\t\t\t\t\t\tel--;\n\t\t\t\t\t\te--;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.alive === true) {\n\n\t\t\t\t_Sprite.prototype.render.call(this, renderer, offsetX, offsetY);\n\n\t\t\t} else {\n\n\t\t\t\tlet effects = this.effects;\n\t\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\t\t\t\t\teffects[e].render(renderer, offsetX, offsetY);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ui.sprite.Background":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.ui.sprite.Background","url":"/libraries/lychee/source/ui/sprite/Background.js"}],"blob":{"attaches":{},"includes":["lychee.ui.Sprite"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Sprite = lychee.import('lychee.ui.Sprite');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _render_buffer = function(renderer) {\n\n\t\tif (this.__buffer !== null) {\n\t\t\tthis.__buffer.resize(this.width, this.height);\n\t\t} else {\n\t\t\tthis.__buffer = renderer.createBuffer(this.width, this.height);\n\t\t}\n\n\n\t\trenderer.clear(this.__buffer);\n\t\trenderer.setBuffer(this.__buffer);\n\t\trenderer.setAlpha(1.0);\n\n\n\t\tlet color = this.color;\n\t\tif (color !== null) {\n\n\t\t\trenderer.drawBox(\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tthis.width,\n\t\t\t\tthis.height,\n\t\t\t\tcolor,\n\t\t\t\ttrue\n\t\t\t);\n\n\t\t}\n\n\n\t\tlet texture = this.texture;\n\t\tlet map     = this.__map[this.state][this.frame] || null;\n\t\tif (texture !== null && map !== null) {\n\n\t\t\tif (map.w !== 0 && map.h !== 0 && (map.w <= this.width || map.h <= this.height)) {\n\n\t\t\t\tlet px = this.origin.x - map.w;\n\t\t\t\tlet py = this.origin.y - map.h;\n\n\n\t\t\t\twhile (px < this.width) {\n\n\t\t\t\t\tpy = this.origin.y - map.h;\n\n\t\t\t\t\twhile (py < this.height) {\n\n\t\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\ttexture,\n\t\t\t\t\t\t\tmap\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tpy += map.h;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tpx += map.w;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttexture,\n\t\t\t\t\tmap\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\n\t\trenderer.setBuffer(null);\n\t\tthis.__isDirty = false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.color  = null;\n\t\tthis.origin = { x: 0, y: 0 };\n\n\t\tthis.__buffer  = null;\n\t\tthis.__isDirty = true;\n\n\n\t\tthis.setColor(states.color);\n\n\n\t\tdelete states.color;\n\n\n\t\tstates.width  = typeof states.width === 'number'  ? states.width  : 512;\n\t\tstates.height = typeof states.height === 'number' ? states.height : 512;\n\t\tstates.shape  = lychee.ui.Entity.SHAPE.rectangle;\n\n\n\t\t_Sprite.call(this, states);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('reshape', function(orientation, rotation, width, height) {\n\n\t\t\tif (typeof width === 'number' && typeof height === 'number') {\n\n\t\t\t\tthis.width     = width;\n\t\t\t\tthis.height    = height;\n\t\t\t\tthis.__isDirty = true;\n\n\t\t\t}\n\n\t\t}, this);\n\n\n\t\tthis.setOrigin(states.origin);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Sprite.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ui.sprite.Background';\n\n\t\t\tlet states = data['arguments'][0];\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.color !== null) states.color = this.color;\n\n\n\t\t\tif (this.origin.x !== 0 || this.origin.y !== 0) {\n\n\t\t\t\tstates.origin = {};\n\n\t\t\t\tif (this.origin.x !== 0) states.origin.x = this.origin.x;\n\t\t\t\tif (this.origin.y !== 0) states.origin.y = this.origin.y;\n\n\t\t\t}\n\n\n\t\t\tdata['blob'] = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.visible === false) return;\n\n\n\t\t\tlet alpha    = this.alpha;\n\t\t\tlet position = this.position;\n\t\t\tlet x        = position.x + offsetX;\n\t\t\tlet y        = position.y + offsetY;\n\t\t\tlet hwidth   = this.width  / 2;\n\t\t\tlet hheight  = this.height / 2;\n\n\n\t\t\tif (this.__isDirty === true) {\n\t\t\t\t_render_buffer.call(this, renderer);\n\t\t\t}\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t}\n\n\t\t\tif (this.__buffer !== null) {\n\n\t\t\t\trenderer.drawBuffer(\n\t\t\t\t\tx - hwidth,\n\t\t\t\t\ty - hheight,\n\t\t\t\t\tthis.__buffer\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetColor: function(color) {\n\n\t\t\tcolor = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : null;\n\n\n\t\t\tif (color !== null) {\n\n\t\t\t\tthis.color     = color;\n\t\t\t\tthis.__isDirty = true;\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetOrigin: function(origin) {\n\n\t\t\torigin = origin instanceof Object ? origin : null;\n\n\n\t\t\tif (origin !== null) {\n\n\t\t\t\tthis.origin.x = typeof origin.x === 'number' ? origin.x : this.origin.x;\n\t\t\t\tthis.origin.y = typeof origin.y === 'number' ? origin.y : this.origin.y;\n\n\n\t\t\t\tlet map = this.__map[this.state][this.frame] || null;\n\t\t\t\tif (map !== null) {\n\t\t\t\t\tthis.origin.x %= map.w;\n\t\t\t\t\tthis.origin.y %= map.h;\n\t\t\t\t}\n\n\t\t\t\tthis.__isDirty = true;\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.client.Stash":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.client.Stash","url":"/libraries/lychee/source/net/client/Stash.js"}],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(client) {\n\n\t\t_Service.call(this, 'stash', client, _Service.TYPE.client);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.client.Stash';\n\t\t\tdata['arguments']   = [ data['arguments'][1] ];\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsync: function(assets) {\n\n\t\t\tassets = assets instanceof Object ? assets : null;\n\n\n\t\t\tif (assets !== null && this.tunnel !== null) {\n\n\t\t\t\tlet data = {};\n\n\t\t\t\tfor (let id in assets) {\n\t\t\t\t\tdata[id] = lychee.serialize(assets[id]);\n\t\t\t\t}\n\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\tassets:    data\n\t\t\t\t}, {\n\t\t\t\t\tid:    'stash',\n\t\t\t\t\tevent: 'sync'\n\t\t\t\t});\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.client.Debugger":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.client.Debugger","url":"/libraries/lychee/source/net/client/Debugger.js"}],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _resolve_reference = function(identifier) {\n\n\t\tlet pointer = this;\n\n\t\tlet ns = identifier.split('.');\n\t\tfor (let n = 0, l = ns.length; n < l; n++) {\n\n\t\t\tlet name = ns[n];\n\n\t\t\tif (pointer[name] !== undefined) {\n\t\t\t\tpointer = pointer[name];\n\t\t\t} else {\n\t\t\t\tpointer = null;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\treturn pointer;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(client) {\n\n\t\t_Service.call(this, 'debugger', client, _Service.TYPE.client);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('define', function(data) {\n\n\t\t\tif (typeof data.construtor === 'string' || typeof data.reference === 'string') {\n\n\t\t\t\tlet environment = (lychee.environment !== null ? lychee.environment        : null);\n\t\t\t\tlet value       = false;\n\t\t\t\tlet definition  = lychee.deserialize(data);\n\n\t\t\t\tif (environment !== null) {\n\t\t\t\t\tvalue = environment.define(definition);\n\t\t\t\t}\n\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\ttid:   data.receiver,\n\t\t\t\t\t\tvalue: value === true\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\tevent: 'define-value'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t\tthis.bind('execute', function(data) {\n\n\t\t\tif (typeof data.reference === 'string') {\n\n\t\t\t\tlet scope    = (lychee.environment !== null ? lychee.environment.global : global);\n\t\t\t\tlet value    = null;\n\t\t\t\tlet instance = _resolve_reference.call(scope, data.reference);\n\t\t\t\tlet bindargs = Array.from(data.arguments).map(function(value) {\n\n\t\t\t\t\tif (typeof value === 'string' && value.charAt(0) === '#') {\n\n\t\t\t\t\t\tif (lychee.debug === true) {\n\t\t\t\t\t\t\tconsole.log('lychee.net.client.Debugger: Injecting \"' + value + '\" from global');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet resolved_injection = _resolve_reference.call(scope, value.substr(1));\n\t\t\t\t\t\tif (resolved_injection !== null) {\n\t\t\t\t\t\t\tvalue = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn value;\n\n\t\t\t\t});\n\n\n\t\t\t\tif (typeof instance === 'object') {\n\n\t\t\t\t\tvalue = lychee.serialize(instance);\n\n\t\t\t\t} else if (typeof resolved === 'function') {\n\n\t\t\t\t\tvalue = instance(bindargs);\n\n\t\t\t\t}\n\n\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\tvalue = null;\n\t\t\t\t}\n\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\ttid:   data.receiver,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\tevent: 'execute-value'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t\tthis.bind('expose', function(data) {\n\n\t\t\tif (typeof data.reference === 'string') {\n\n\t\t\t\tlet scope       = (lychee.environment !== null ? lychee.environment.global : global);\n\t\t\t\tlet environment = _resolve_reference.call(scope, data.reference);\n\t\t\t\tlet value       = lychee.Debugger.expose(environment);\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\ttid:   data.receiver,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\tevent: 'expose-value'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t\tthis.bind('snapshot', function(data) {\n\n\t\t\tif (typeof data.reference === 'string') {\n\n\t\t\t\tlet scope    = (lychee.environment !== null ? lychee.environment.global : global);\n\t\t\t\tlet instance = _resolve_reference.call(scope, data.reference);\n\t\t\t\tlet value    = lychee.serialize(instance);\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\ttid:   data.receiver,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\tevent: 'snapshot-value'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.client.Debugger';\n\t\t\tdata['arguments']   = [ data['arguments'][1] ];\n\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * DEBUGGER API\n\t\t */\n\n\t\treport: function(message, blob) {\n\n\t\t\tmessage = typeof message === 'string' ? message : null;\n\t\t\tblob    = blob instanceof Object      ? blob    : null;\n\n\n\t\t\tif (message !== null) {\n\n\t\t\t\tlet tunnel = this.tunnel;\n\t\t\t\tif (tunnel !== null) {\n\n\t\t\t\t\ttunnel.send({\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t\tblob:    blob\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    this.id,\n\t\t\t\t\t\tevent: 'error'\n\t\t\t\t\t});\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tdefine: function(tid, data) {\n\n\t\t\ttid  = typeof tid === 'string' ? tid  : null;\n\t\t\tdata = data instanceof Object  ? data : null;\n\n\n\t\t\tif (data !== null && this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttid:         tid,\n\t\t\t\t\tconstructor: data.constructor || null,\n\t\t\t\t\treference:   data.reference   || null,\n\t\t\t\t\targuments:   data.arguments   || null\n\t\t\t\t}, {\n\t\t\t\t\tid:    'debugger',\n\t\t\t\t\tevent: 'define'\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\texecute: function(tid, data) {\n\n\t\t\ttid  = typeof tid === 'string' ? tid  : null;\n\t\t\tdata = data instanceof Object  ? data : null;\n\n\n\t\t\tif (data !== null && this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttid:       tid,\n\t\t\t\t\treference: data.reference || null,\n\t\t\t\t\targuments: data.arguments || null\n\t\t\t\t}, {\n\t\t\t\t\tid:    'debugger',\n\t\t\t\t\tevent: 'execute'\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\texpose: function(tid, data) {\n\n\t\t\ttid  = typeof tid === 'string' ? tid  : null;\n\t\t\tdata = data instanceof Object  ? data : null;\n\n\n\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttid:       tid,\n\t\t\t\t\treference: data.reference || null\n\t\t\t\t}, {\n\t\t\t\t\tid:    'debugger',\n\t\t\t\t\tevent: 'expose'\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsnapshot: function(tid, data) {\n\n\t\t\ttid  = typeof tid === 'string' ? tid  : null;\n\t\t\tdata = data instanceof Object  ? data : null;\n\n\n\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttid:       tid,\n\t\t\t\t\treference: data.reference || null\n\t\t\t\t}, {\n\t\t\t\t\tid:    'debugger',\n\t\t\t\t\tevent: 'snapshot'\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.client.Storage":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.client.Storage","url":"/libraries/lychee/source/net/client/Storage.js"}],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(client) {\n\n\t\t_Service.call(this, 'storage', client, _Service.TYPE.client);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.client.Storage';\n\t\t\tdata['arguments']   = [ data['arguments'][1] ];\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsync: function(objects) {\n\n\t\t\tobjects = objects instanceof Array ? objects : null;\n\n\n\t\t\tif (objects !== null && this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\tobjects:   objects\n\t\t\t\t}, {\n\t\t\t\t\tid:    'storage',\n\t\t\t\t\tevent: 'sync'\n\t\t\t\t});\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.Remote":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.Remote","url":"/libraries/lychee/source/net/Remote.js"}],"blob":{"attaches":{},"requires":["lychee.net.remote.Debugger","lychee.net.remote.Stash","lychee.net.remote.Storage"],"includes":["lychee.net.Tunnel"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Debugger = lychee.import('lychee.net.remote.Debugger');\n\tconst _Stash    = lychee.import('lychee.net.remote.Stash');\n\tconst _Storage  = lychee.import('lychee.net.remote.Storage');\n\tconst _Tunnel   = lychee.import('lychee.net.Tunnel');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\t_Tunnel.call(this, states);\n\n\t\tstates = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tthis.bind('connect', function() {\n\t\t\t\tthis.addService(new _Debugger(this));\n\t\t\t}, this);\n\n\t\t}\n\n\n\t\tthis.bind('connect', function() {\n\n\t\t\tthis.addService(new _Stash(this));\n\t\t\tthis.addService(new _Storage(this));\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Tunnel.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.Remote';\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ui.entity.Label":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.ui.entity.Label","url":"/libraries/lychee/source/ui/entity/Label.js"}],"blob":{"attaches":{"fnt":{"constructor":"Font","arguments":["/libraries/lychee/source/ui/entity/Label.fnt"],"blob":{"buffer":"data:application/json;base64,ewoJInRleHR1cmUiOiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUJOWUFBQUFTQ0FZQUFBQ1hRMU1PQUFBZ0FFbEVRVlI0WHUzZEIveGtTVlV2Y05jY01LQmlGbmNWREpnSVpoRm1RY0dFQ1ZCTU9DZ0lCa1FscUlBNml3RkJFWkFnS3VJZzZEUGpVekNIV1VIRWhJZ1BBVUVkZUVZTTRETWc3ejFZZjkrbWJ0dmR0NnJ1N1o3Ly9HZDI5dGJuVTUvdXZwWFByWERPNzV4VGZka2JMR0dod0VLQmhRSUxCUllLTEJSWUtMQlFZS0hBUW9HRkFnc0ZGZ29zRkZnb3NGQmdvY0JDZ2IwcGNObmVKWllDQ3dVV0Npd1VXQ2l3VUdDaHdFS0JoUUlMQlJZS0xCUllLRENpd0RYWFhQTkdlZmpiaWQ5LzJXV1hQV2toMFVLQmhRSUxCUllLWFBvVXVHU0F0UnhpWDV2WDlhZ2NZSys3OUYvYk1zS0ZBZ3NGRmdvc0ZGZ29zRkJnb2NCQ2dZVUNDd1V1UmdwRUxubmY5T3NaaVI4YTJlUS9Mc1krTG4xYUtMQlFZS0hBcFVTQnN1OStXUGJjSDcwUTQ3cVVnTFcvQ2dFdkR5SC8vNFVnNUZHMW1RbnhJYW5yS1lrMzJ3VUprM2J6UEtmNXV2a0NJQjRWeFpkNkZnb3NGRmdvc0ZCZ29jQkNnWVVDQ3dVV0Npd1VXQ2l3VUdDaHdFS0JheXNGZ3BWOGF2cCtyK0FrUG84OTdBMnNwY1B2a1Y3Kzc4UTNhb0U3eVFQa2V2L0V2MHFldDVzenFwVDVrZVI3V3ZML2xQeWxEbHFlZitxVlQ3NjdKdjIraVFDcFZ5WCtXdUkzcHR5TGF1V1MvN1B5L05zUzN6VHhwNUx2NjRaOFNmUHN0eElmbHVkUGE3V2JmSGRMMm4wU3IwalV2eHNuLzJ1bnhqblFKWG4vclZQM3p5YnRSNUxuSnh2OWwvNmpTZitKR2UwOU0zbStQWGwvY1NydnRUVTlOTDFmK3Y0ZUdlTlhkMmo2N2tsN2RPTHRFODM1WDAyOGQ4cVlwODJRdW0rVXhOOUkvT0hrZmZCRVh2V2FFL2RJdkR6eGJDSUx5aCtZS1BmMHBOOXlKODliNXZkelUvYWo1cnlYOVBQVGtzKzgrT1NVK2FVT0hkNG5hUzlKM05XY2ZrbksvZmhFUDIrZDlHOU0vTWhFYy8yM1UrWlRhbVhTbnkvTTg4ZFUwdDQ0ei80MTVkNjEwOGNUU2JzcTBYcit2NG5QU3Z6NmxOSHZha2g3YVA4VkpkNHduOWIrdDZRTW1peWhVQ0IwZXNkOC9ZNUVoODFiSmY1QjRnTkNwOTgvTGlLbEQ5N05YNmJOVDVwcU0zbS9JSGxPSi81bnljc2ErYzhUSHpoM1Qwc2RINXo4em9mYkpyNVQ0ajhrR3U4UHBnNXJyeG9xYlY5VHl0b1BIcDJ5ZjlMcmY2WDhrUDAvVTlaN21OdnVrTzl4bTJkVnJYRGEvSUF5MXR2bDg1MFQvem54dVluTzFoL3JLV05LZjA4bXo4YzM2bmF1UGpYcHB4dnAzbFd6L0dhWnRQV1ArZjNtaVcrb2o2a1RUOUdqeDZqZTFQSERLZkM2bEQxNXJ2M1o2WnQ5NXVkU3J6bXpGZEttL3Y1WjRrOGsvWUVUZlg1czBtK2FmR2NyOWRpWGZpMXA4blJEMm55L1pOQVg3OVMrK2NwRTU3bzVhRytjS3IrN2h1VFhwMGVtL0EvT0tIK1QwdjRuNU5PY09wZjJyU0hoYnhOL0lPMS9aNi85c3E5L1pmSjhXU0plNnhXSi96UFIzbTRkYjRYa2YzRWVPT3VINEJ4OVRlSW1iM2FuMmhtWnN0K2FmTytTdEx2WCtwUjBmWC9YcFA5ZHBkMG41cGx6N1dzYVpmRzBmNXIwYjlwTVQ1WE9WT3R5Nnp6TWMydndseE52a0RScmVCWHkvRzN5Z2QrOElzKzNlSmVTWm0rOVQ5TFd2R09ldjFtZS9hOUV2TWpqS24wM3R6NDM4U04yOTRlVU5UL2VKTS94MktPUWRQeDJMVGhiL2tlbm5MMzR4eEpmbkR5N3ZJOXhPaHZ1bjdUYk5PcGZQMDdlejhnUHZNWkxrLy9LR2ZtNVoxcmo5MDMrSm84L1ZjL0ZrcDd4MjB0K0tXTjV3b1hxVS9yZ2ZMN1I3cHc4MS82azNqdW1qb2NtWGo5MTMrQmM2OXNzZnlqZFVnNS8vZlRXM3AxMFBJWDNVZDNiRDJrM1plenoxdTlLTmw3Q1FvSHJNZ1d5SHQ3ZStaTG9iS3FlRWNuVEJkYVNUazUvUU9KWHBZNGp4MGNPQWRiZUxaMzU2OFEzVEljR1JtbnJQYWZUaHdCckwwZ2xuNUU2WDVMeUJBL0FBaUc1R1pMdmk4ckdlektmTmg4TWltZC9rYktuZHdzbVArRHNaWWtzdnpEM0NQcWR5WXVKY2FBN25GNlYzMS9mYWpSNWdCaXN4ajRuOFRmbDIyVklPbVZYZEVuK0tyQ1d1dDhsNmM5TGZNL2srWCsxZXBMbkRubitsVWtIRW8xQ0dlUEhsYjRaSHhEeFR4Tlo4eEdrTDZtUThmNWVCdlRWR2R1ekcvUjRpenpIV1A1QzRpTVNnVXFZeWM5T3ZFbkt2YnBSamtCRG1QeVh4SjlOdmlsZzdmdVQ3d01UQVgyRXI0OUpORSsrSVdVeDNyTkN4b001L043RVQwazVJRUkzSkQrQnc5eTNGdStlTWoxZzdVVHlQQ1o1Z0EyelE5cTRVeklid3pjbllrYlI4TDFTengvT3JrUUhYeThNLzEzSzJkQkdJZWtmbElmZTQ1Y25FcUFJUnZkUDFQNEhwdHkvTjhvQng0RjVoQ0w3eUNjbmVoL1dDZXZQSmJ5ZS90Zkx4NzBUQ1Y0RXRDOUpmRkRpQjRWTzl2VHpHdEwrUjZlQnB5YmEzejhnYmY1TnI4SGszd0pyOHR0NVpkL1RmNExnQ3lmS096eS9xMFFITVlXUXRoM0c1c3hEVWtkVlFiSGJ0bmJ5N0wzeW9VL21wQVBaZks2R1d2azV4RDJIY3M0OXlnTjdIS0gxNVdXc0owcC9UNlcvVGFCNXF0MmtIeG13TnRBaGRWSWNVRzd0QmF5bEhHSGNXTXloRWNCUzN0VnNvRy96dmFSdVlJRzk5SXJVdlFVY0pJMmdoN2FuazJadTlkNDlFTU5lZEt2azNiS2lUejJ6Z0xYQzM2akhlVUJCZzNjQkRnTVRLRG1lMU9OVmFuUkluY0JCeWhFdUV0L1dPNXVTOTR1VDUzc1NBUmRBRnVzSHVQYnBoN1pmK25TTGZGckQzNXIybTNkUHBYMUExT2NsM2l2eGp4UGZPNUVDQldoRE9kWU5LUTlvY2dhWXUxTjV6d1ZZYzlaN3ArKyt5N2VsRDRRQSs1enphK3M4TDd3YTRPekROL2V5UEFjNE9nTy9PTS9YQ3E4OFIvZnZ5RE1BK2lnay9jNTUrTWpFTlkrWlo2ZnkreE1UUHlibFJ0ZWtKSjJ5QzgvNTJLU3Z3Wm15TnZHUDZ2cjdLZm9ONlNsM3MzeW5mUGpZbE1OMzF2cXBQM2cybjdYME44bEQ1OUVIejJrN2JYNVk4ajRoZVgxMlEvTGkyeWxBcjBuK2o1M0tmN0dubDcza2tnUFdNaTc3M0VzVFB6M3ZhU1ZuSFdVNGxHNHBoNGZCdy81bFkrNDYwLzYrazc0M0VKbzJGMkR0S0YvK2VhaXI4RTkzeVh1L0lCWlM1MkZJRjIyVm9UVWU5eTFEYXdxM2FraWVTWXUxNU1FSC9Wd2l3NXdxM25Jb0VRNEIxb0JYZjVPT05NdW13OStkUE4rUVNDdUtRZWlHNUtlOWRualRUTHd1djJuc2FONkFTTTJRZkZjbmtYVVhJWG95SkQ5dEZlWVVPSVpKZFBmQjE2YjhzNUpHSzNjeThSUHl1Mmw5bG53WU1DQVZ4bjJ2TU5BbFpXbFJSeUhwMnI5ZDBqR1QxVkNZTVVJeGJlWmd5YkhPbTNUTUp6QUJBQXBJcEdHbDdTRU1iR2xNTzIzOGJ2S2FkQmQxeUZpQlNtZksrMmlCdkJqeHUrMHlYU25MYWdWTlJscGNnMDc2NytTRDFzbEJDbXlkQXRadWxYeC9rSHhyYTdEVW9lM1BtOHZBSlQrQmtRRDFxU2t6QjFTampYWTVMdERybm9sQXZCNndCbnl5K1ZjdHpXb3ZPMzJ5M2dtSW41OXlCeVA3cVFlWWgwRjRuOVFEMUI2RjVMRm5zUExBL0s1RG5nT2swWkUxYWEyYzlZQm0zdGtxcEl3MS9rT0poSjNST3FuVmMxMThGanF4YUhwRWFNU3FxUm1TNzYyVHlIcUV4ZTk3SnRvanpRdEE3Yy9Qb1YzcStMN2tBMlN6bkh4V3lqMXNvczBxT0pKNnRQZnJLZitvVnZua3NSN3Q3N2RPUG1QY0Nra252TDNXZVZPcm96QktWUXVzamJvL011VmJ3dU9od003ZTVkSWZleFRsMEpYcHp3anNkdTcxempUajc0MjNwRjhVd0ZvNXc3MVA4NjZwc0pnYVQrT2RteE9zWk0yYlorN096OVQ1bkR4bk5jVlNEcmhWRGFWdFp6Z0xvek83WjBmU0o0RzE1Q0gwby9uSHA3dzlmbmYrQWlQMWgvV1dkZFhyUzgzaUR3Z0RiS1VNR29WeUZnR3Z6Q250dE5vSGpqV3RaVnJ2SWMrQkczaWQ1bG1VUE1EaEwwcWVnd1RybEQ4V1lBMWhTbHRmbDc1U0NLMURudHN6V2NtZGFORFptZnJ6U1gvOGtKNHl6ODkzWjltYjVqbnZpRlhJY3dDbnVZZDIxWkE4RklndlRKNzc1anVMK3o5S0JIS3BzMVdHNWR4UEo3NWY4djFUeWdGZjhVZFB6bS9BNnF5UWNpdEwrOFRIOThvbFh4ZFlLMk8xdHY4bzlWVDVzODBPcGI1OWdMWGZUVm04a3JNRHY3VG1HV1lOOGlMTFZQYVNTeEZZWTZINzBMd2ZJUHlSaHd0RnQwUGFUWmtGV0R2eUdmRDZDa1BiVExHNmdkQStUWlp6YmdIVzlpSGFnWGxEYS93QXZvY0NweHFTWnhKWUsrOGZIb1RIK1lzRHUxTXRkZ2l3Um1QNXQrbUl3L2VjUWdiUHdvUjFtQU1aRXpxWTJiOUR2dFB5c2hiNnc3UzFKV2dQamFZOEFlc2xTZmZIQmJOQ3lyRG1BbzY5YmVJVFUvYXhlWGJUZkdlNWNNdjh4amczUS9KK2VCSzFTd0Q2cmVUSGlGdWdwL1BCSEYzZEI0WENPTEcybzNYczlZR1ZGbGRHVEVJMXBDN2dwREZ4ajhCWXpmNVRoNVRscmdUc3ZLaEQrbW51QUJoSGJqdER4NU1Iby90N3ljTnlieDN5bktVT3F4ZGE0RkZJK3BzbDdUWDVCSzVOQW11Tk9rN21PYzJzK2RVTmFRZVF5U3JnMCtZdThwVEJqRjh2K2UrYTc3VE9YQ1o3d0pveFErZWJTUDl1Snd1ZGdCTVluWU5ENnNHNHZ5ajE2RU0xSkE4cndsUGx2YXlzT2d1VGIwM2EvRWJ1ZDBubmFzNDk2YTJTdnVYaW1qU2I1ajFiTkVrNkJwOVpQNjE5cTA4MGtKanZ0MDYrcGd0M2hXNWNwd2hBZHpTUERpWmN1MTgwTFlRUC9aKzl0amVyeS9pdGNaclh1NmFPcGdWSThnRkY3WG1FUU91QndBckk1cTVMcUg1d3luZXRRa3BiWE1CWUU3clEyVnl0V2w0TWZTek1TZzBVTU1kL01lVlphTFhlMjY4bjRUY1AzWTliYlcvMHpWcTFUd0xQUjJHcWZLZmZod0JyNk1FMSsxdGE5VTQ5bitwdjBpOFdZSTNMUHd2V2o4dDRxOG9VWTUwYVQrT2RVVVpSdUxGb1pPRklnVGFjNy9nRzRETnJXMmR2MDlxbHRNMkNrRklSUU1FUy84ekczSmtEckptL3owNDVsbW5Wa0hhY1haU0tsQWRiVm5FYmJiWEFhV3RYL2F4WVJ5RjFZMXF2VGpxMy9GNzdGRUh2ZGtEN3JENC9LdVZZQWJicUI5enpLRGpkeXRON25qRWNKN0NHRjhGUFVEeXNRL3JnL2JNR2UzS0R6bmdYZEFCMG1yZm1vSE9Pa28zeXdPOVZLT1Bod2dqNGJkR01zaEV2QUd5bnVIaEI4amM5TURicU5yZi9MWG52bVhid0I4Q25XK1QzNUJVbkczWGdSNEI1dDU5WW0zT0FOZWVuY3dYbzF3M3A3eXhnTGZuVWRWWHFQSkh2Z1BFdjdNMi9xWGFQT3IzMHovNkNGeVNiNFR0WVhKN3R2Rzk3aWJYS21wcWNkUDFFcnVMMnFPYjFHZW9yN1ZFWWYwU2k5MHllUUo4UmtMN3hqc2xhck43SmFPWXA5MmNHRHE3RDJYSlAzdXh6MnVMZTYzemlxbTFQUGUxM2JkOUlYandDYTNES1BCYkorRWJ5ekNna0wyT0poeVFDb01tUSttVFB3aC8wakQ5V2xtT0pMQ1B0c1Z6ZVdaWUNXL0dxMVpEMnVoWm4rNlluUHdXd2RjTnFGWDlVRzJNWFdDdHRja0dsUVBZK0tWMjhTNHAwY2pwd25QdjEvMGxrN01Md3BUYytkVkZXcXd1UDVyMTI2YUt5OUlPM2pTc1N6Q2M4cWZuTEs2QTNuOUFUYjRuSHRBZmk1K2ZPMzJFdU1oeWhPUEFiajhyU3RUb1hOMmhsWC8wcU1YbEhGOXduSHprZitNNkxCdDlQbHFZNFdmRURteUY1ZVg2d011WWRoVzc0VHJRZmhlVGxOVWFodFhVTlNaNDd2OGxtdGFzR1dLei9lOUo0UTYxRHlsQzRmVitlYjNsTzVEbUxyamZQOHpWdm1tY1VXTnJFMDVDTFZpSFBlUWlwWSt0OHluUGVjOWJTblpOMnB1UTFUdWMyNDRjdFk0WGs1NG5DVW5OTEZzOXppcEUzem5QbnlXYmZLZWQzcjZDaDJHVGhUZDZzR2xHVWZwaFA1T3JldkpvTHJPRVJLTDU0dFIxWk9BUllZNklMV0xPaEhVa0k4VzJLbUpLVndGOWVFaTNlMUwxUEJEUXZIUlBxTHJHdWExQ3RzMm5MUVdSeTNhMzNvblltQlRjaWR4Vmg3RzFXQW5EUTRmU2ExR056MkR1a0wzem91Y1p3TjJtRzVBTVdjUVBaMG80T0JaTHVIZGxZM1oxaE1XS3V1UEhOQ2lsL2JRSFdhRWUvTEdQckFZeGNTR2pWMS9lT0lFTEdlSmQ4T0N3K2RJTFdCd0ZycWQ5OE1LL2NoL2Z3S2NJbnY0UGg4a1JNOGNOM045N2Q4c252M1pxSEg1MjhyODd2T2NBYUVPUkVJb2JGQm1ZenNXNTY5d25hdkJ4V0Rtc1dwQTVxeis2WGNseGVKMFA2Um9qRGZMMTN5Z0RCbWlGNU1SbEFQQUMxZFVBd2RBY2NRYUVhVWthZG1IbUE4enJrT1dzaTJ2UFdmUmZXS1JlZGtVWElVRW5xUUN0emhCRGFCYkRLTzNlZ09yQlo1UkdvdHViZFR2KzRFUDFNaHh6R1pQNk9RamtvdGNOQzFmaCtLSG1IdmFoVDVldVRVdDcremJLVm9vUlZUTXZpMC81b25tQXFucHB5QkQ2TUtNYkVmc2UxOGhlUzlxVzlSc3Q4TmRldXlIY01NQXZsRXhOcmR3c1VTRG5uMWVDSzcvN05GdlBFVWhmSTZ0MVNMT3dkMGxZWDRFbzZFTmord2ZWcEZLYkt0enEwYjdua3g0eHdrZjZROUFXVGNGQ1lhamZwRnh4WVN4OHdlK2JpbFJucm5EdnVadDM1TmhBczlWdm43ajY3UWI0VFp0ekR4K3JWZWdGazR6UHNzKzRIdzN0VXd5WXQ4eDNBUnFtenZpODJ6N3JBV3RJQjNwaDVGa1JOeStYa3N4ZFRQbHEvMVRPdzlWN3puRVVkY052ZXZCVTIyaWNzVjEyZUNrMkc5bG41VjVuYzNmWkxueWtyN0l1dUxtaGFRU2V2Y3dEZzQweGdvVmkxZE82OGgrTUUxdXlITDAyODRkRFA5SjgxSUxxNHU2MTFqY0ZxemlXK2t6MDRBUy9zcnRRNzV6dmFjNFY3ZnI0N2Y4MkZ0Mi9WTmRBaGVRRnBQRERNSTN0ZzlicUxUYnFsRE10MDV5VUJ6UHo4ekpScm5vdVZPUU1NY1o3WWg3clhDcVN0T2NDYTgwazkvcWhyNnNxQXVjQWFBUjdmL0xReUQ4MFB0UGJlTG5oSW45RFFPVXlvSkdqek1IRkc5a0I4N3dwdlJJQUZvS0NiY3M1SmJyd3Q3eGlBTmt0WGdyQTZ0T2ZkK3llOTFsVWRsS0xtNStjbjRyWFFuWUxwL1JQeGRxM3plT1Uxa2dqSWZHSEdpYWN3VjFoV0V0UkhJWGtBbjNoTS9FWXpKQjhRelZqeFhjNTZmVEl1NE1vVXNJWldGQXRrSkxLamVpZ0tYTVh6cWthL2pneFlTOStkSVVBa2E3d0hFc3dCMW5pdkFEdUFudmhoWUl6MUQrais5a1J6SDJBTFRHUnBYejAveTlsa1g4ZjM3a01YOGhRK2RKaFA2c0Fqa1pPL0lPMVZsUUdsUFNDV2Q3YlAvRzNOeFJ1bm5pYklXOW96TnRiUXZOV3E4a2p5MlhQc28rWXBIdmV6a3JkbkdYNHllUUEwWFZmUTFIc0lzSVkrUUxHMXkyTHFNVTdBRktYV3JrRUJZTk04bFg4bHN5VC82WHdBcHdHcmdEZlBnTnoyUHVjVFBtSXJKTjA3QlliakVSZ2ltVE04ZzBhOFJ2SmFkNytTU01tM09tL3l6RjJiNk1oZ2FZcGZzMWJKUXU0cXJkN3BPWFF1OWVxejk5R3p3cDRMckxIbzVoM1pCUEoyNlRMbjl5SEFta2tHV01QUUgwa0lvU0RvTExWV0FuQitZMTR0eGtrVU1Ya0p4elpuZ2gwM0dIOWNzSXVFVnZ1WnNzYS9zc1JJbVVtVDg5STNEQ2xONEwwU0lkT3JTVjBtN3JsYXJHSGVDY2pkUzFYVEZ2VDhKNU92S3JRWEp1ektwRDhsMzJtV29NNU5kNDFkNHFUTVJRK3NsWTNsVnpJdUd0cG1LSXZRd3RuYTJQT2NCZzNvTWxWK2IyQXRkVitldXIwam00b05ZSlpGVWNvNUNHMEl3LzFnSTAxS21Xc1lHY3c0cG12RkZKWTFNMld4Tmx4YXI2dytBY3BZL1VEL1d4cDFXalJhR211TUVHVGRzOFFBNm1EYXEzY2NiYjZROU0yRytmemtQVFh4cnN4VjJsZldVd0FmV212cm0zVktjMDJuZm9jc2JTMk5pcjJEOWhhUWpIbDBDZktzdGQzcjIwUy9hVjlXYnIrSlhIRmNOTjg5U0E1dGE3ZGNXUWZhWmlsaDN5Q0FkZ1dGc3UrWm54Z01GblZWb1U5YnlRdmd4S2g4VHI0NzRLMGpaVENFMHJrNk9UZ2R3czJRZkZ3VldSL1RhQ3BISy95Sy9PN2Rrd0Rjd3JnUHpBL20wWHh3enhDMzRXcEkzVFNZckJ6Zkx2bEdERU92bjBOYTZwZ0MxbWhuWGVhL2VWbjZ1dXBTSGlpelM5dDNTSm5lVlFQYTNTMzM4cFFaQVNDRmp1YzgxbEpQcmQxTlVtR1M3cEYrbks3UmI0cGVqVElBbGpsM3JBMzBzUGNBdU8wTDNYQmdmekNlMzVQNmI1THk5a3JuUEkyMSt6Yk45OHNUN1Myc0F3bUgxYkRiZG40RGgxZ1dyNnlqODNzS1dGdGR0NUU0c3NMZGJUQjFzVW9oSU9CalJxSFNGelFrck5KeXN3Z2E3ZnNwczAvN2xDdXNxSHJ0Yjg1bmF4aEF4cExZWHRrTjZRdDZVeUN4WnJEM1hKVnlUYkJ2czdLVVBUWmdyYnhYNCtHV3QzS2ZUUHVzR0FCaHpxVnFLSHN4S3dYZ0pBQ05NZ200KzhSOEo4ajllYjQvUE44QkV5eUw3VHRUTkFQMlV6bytKZm03UXNvT3ZWZ2ZuVXIwSjJJbnA5b1owc3QrNjd4ai9WRzlzM0tublVsZ3JkQVB6K3BQSDdydXFHbC9FbGhMSG12WSszbmZZZi9OTTlhdnpyYXExZkhjOFordmZPa2ZmdEQ1NFJ6NzExbzdaUy9oNnIrK05xZk1LUUk4UG1SMGgySFM3UUdzVnI0ODZmYWl5WkF5dzdwMTkrOWFDTTN6d1JJR0dEVUMxa281ODV2MTQ5cmRLczlkQjJHT0d0dElxWmYwU1dDdGpBTUFodjhnSUs5Q251UDduQ3RUd0JyZ0d4QzhCcDVUVmg4QmdGVlF1ZEM3NlhvN056MXRzUEFCVUh4WDJsb3BiMW9oZGM0QjFzZ0V4akpZV09QVmdKK1VGM2lvZ1RiV3dFOXZQdHRzdC9TZjlaNjYxbFpKUGJva2phVVdTMjl1Kzd0eUZwNFl1QVo0SFZsVkh6aC9ENXFMWlc2WTc4Ym5mdFlxSDVZK0FWenhqYTRxcU43ZHZmdXVVdVprbnAwWFlLMzBtNEtkcGRzS0cwaDd3Rks4NUpZbDJNWjdObys5ajJjbUwwVXpKUVZlL1d2eUROK2xEakxjYmZPNzZyVlY4dGpQenlhU2sza0hydmozV2lqejFQVktUeXhsWVRLdThEblJLclBSMzFQNUR0am1YVmRWQktWK25rWGtCZUF4MmJONUwxcnl6Z1hXeUltOEVlQk5JMnZCTWc3OEVEN0pKd3Y2bFlWZzJpQVQvMHQrajY0aU93UllJL3dDMXJ5c0l3bnBJRUhhUmJwbnlxUW1TSmswc3krVVN6a1dRb2hPZzRFQjZWbUNyUHFkTWpRN0RscEN4YXlRTXJRaUFJd3Q4Q3ZQRWQ2L0hKbndCNFhVNFlYOVJ1bzQzYXNnK1FpcE51VEpDM3puZENUMTBkSnMzbWNIMU5pOHNCYndpTEU3S0tUK3oweEJyaldid2FYT1d4WkcrMVNlT3BrcHYwM3FxR3JYaHJxU0Q5QmlidTFhckxINDhoNlAxR0l0N2Jud21ZVWFacENsM0N4UWJYUHNwUTVNNmsxM2FWTG11UVA1UVVrSHhLNUNHV2NYV0t2Uk4rVm9IMW5JdFFBQzg4Qm12QVh5cFJ3Tnl1Z2Vva3AvMFJkWTVtRHRnaHlwODNUeWNidkY4Qm9UMElCMWxJMmZ1MHpMVko1MnpLSGhrTGxoSW1IVHBmWGVBd0d1NlRwVG84ayt6OUpIekpsRHo0SE5zdTRnSUdlZk5odnZFZkFCSkRYL21GS3ZnSzlHWHZSRUgxcmRMWlB1M2Z3WkgrV0dlZlgwZkhlQU1QZGV1NmZsMlNTd2xqem1GZzBocTUyVnNpVFBDTXJxODA5NzFUNGt6d2pjeWpOYVhzSW41bkRMdlh2b2UvSTQxeHpPM0NzT0FqaHJiVy9TcHZTL2QwZFZGNWpydkp1OXlxVWY1ajc2b2UzSVlqdnBRRmJXTHBoRkdzek5mWDNkalJuanZSZ3MxcHhMckdvd3NOMTd0NmJHMDFnWHpnUi8wWDdyTW9lc2E2Q084OHU5c3FmeW5EVTRHcnIvcXNxZjdMYWQzeXcwQ1g3Zm5US1B5KzhwWUExdlJaRDJUcHRXaUttSGdQelBpZFY3Qk1zNk01L3dKa05mQ1JQbUJNMzE2UVlkaHZhNWZEUzlBRXI3ZURWbk9TRjVGQ3EwSU5SUWt1Qzd1cFpObTVXbEhocHpyajcyR3dxbHlYV2RNc2NOck5uVDdKVzNTTnZXRzJIenMvT2JZTndNeVlzM1lySHltRVFLQVZaYUw4OXp5aEt1Z0xmSmQrQXN6NE11ZjFubXJmWjRNN0FlWVhrMlZ6Z2t1RkFVczFwcVdnUHNEcVRNWjVZR1ZmZW5TdjY1d0JvUWtidmdsTlhTSEdETldZTS9YMWxyQ0dWZDR1ZjllUThYcmdzYXl0NWlqbk5GdDJjSXpqdTgwOWxhNXdydDhXSHJjWld4QVhYOWE5NktsOW9NS2JPeXdFOTB2Y1VzL2pSbEtIYnc2eTROWDVmSmN5QUg4SStMV1ExWXUwWFM4S3MxYXpaS01oYWVJMHY3MURzSFdFT2I1NlU4Mlc4ZFVoWVlmemJQcDRDMVAwNldMVStlbEFWSWZuT2U5eXlzemhWWU02L3R3MytXZGxZZ1J5K2tUM09BTlhRNE5kU1RNaXpWN0g4VU9wc0FtYk9Ba250cnZteVVjelp0MVNXdFI1ZWtHUU92QlY0d1d5RnA5aFJubVQzbEJaVjA3ZTA3ZncrYWkyVWMydk92OUpRSXpaQitrNHNZL0pBYldhaFhQVWMyNkhZeTM4OG5zR1lkQThIdWtMN2grZkRUakRhcU1uVHlBRFBmSXVuM3lYZmd0MnRwN0x2V0lTK25sK1U1Z055ZnZsUU5PQXE5R0ZMaHVleVArSkdSSyt3R0RlNlU3K1RTbFJkSDZzY1Q4RkxoaWRlak5ld0IrSXRmQi9oWFExblhlQmY0emk2ZXNGVW1lZWNDYTJSTS9YUXRHT3hvRkZJWDR4cUt6a2Ntbms1MHRqSU1JR005SU9YTzdCWTZCRmlqcVFXczBhWWNITXJDeDZ3TEdIOGR0MkZqRmczV2I1b013aCszaUZraDlYSzlZS1ZDMDl3TXlYZjdKTkpJYzhkeU9OQ09RZmxOb2k5TitaSDVlWm5RVUhkYXJpMFhqYVF4c2ZYWDZhZG5kYlNTS1hWNHNjNERnRit2NzRBRGJtSkhldUhlMEdENmNXMndXTVA0K2Rjc0IyR1BWaGJCM25lc2JkQmlsc1ZhWVdocG1LSGZVUHExQm0zZitaQzZiRXhYcDQ2QnVWcFhrVFRnc1ExLzE4U2Y5UkV3NFdVcEIreVpGVklmVFlSNVpCTWVBUnhKcDduNzNxVFJzRzMyNDZINThZNTVmbzhKK2dPZ1dTcXhmT3FHdEVWZ3ZjUHVZWkhuTE9WWWlVeldzZkhlckdVYm56djRxdHJlcWY3TVNTL3ZuZldqZzR1ckdyY2xsa3hOSzdDTlBuTGhhTHFLSm8yYlNsZkFTZnYyWWRaNnRPN2VQMERYdjlqMnJLTGNTZUxkc1R5Y2VpY09WQWY2ODlJV0FONC9ZdTBMckxFdTArYW04T0xzY1doYksxV1gvN1JYQlpueW5NVVN6VmdWRERhZzVMSHUzYzBDR05rN3ROcmVlSGUwY202K3JjNy9xZkt0RGgxU3Jwdzl2NU8rVkJtRFFnOXJtL0RUMHNwTldlaWRFN0NXUG1McS9BdXp2V3NWOG16bEVwaG5MRDZyWVpjZStRMDRwalhGRnpSZDNBNmtJdzB1a0FpRHFIK1lhKzI1LzBYZi96SFBBQ2FZU3lCbEMraXZBY0xjY0NqQ3VIVnhyMkNWVkhWUkwyMVRYQUFDdHU0czJTUlMrZ0xJSVNCNXIxVUIrUkE2YkxSUHdLTEEyZ3FwMHg3RFFzMTdJNWhlc1UvN0tZOHBmdVdjL2FmU3R2RUM0MWxDZEVQYTJRZFlzMGR4a1NMUTc0NTNBRk1wOHBwblNkb0RTSm9USndwdEhwWDhoUCtwZnJKb0kxdzRVKzFyN2pVeS80Q0orRkRuQ3A2UEc4NFV2ME81aEVjQWFKaTc1alNnYnBhU0d1K1gvQURWSnFDN09aamt0LytaSXl4Y1ppbVZ5bDdRL0ZmUW9mN2tJMEFTQkYwVFUzVXpMSFNhQk5hbTNzR0ZUczlZOFhyQVlnQWdRZjRWWmZ6Mm1odmw5OWxhSDVNSFVPQVBVaDYxODE0b0ZkODJ6MGNXTFNsRFlRdXNNWi9uQW12bU1YQ0JGZTB1c0FhTTlTL3hOV0ROdTZFRTBWYnpUc3pkc2FXUGM0QTFWbS9BbWwyd3ozUGVRMVBBMmdnZ1M3dFZWNzJOT1hra3JxQ3BEMUJPeVFnNHIxcjdiclE1QjFqNzVkVEQvWE1WTWc3QW1qOVRBMTZ1UTU2ZjFtNmVVNnlPUXBsUGU5RWxaZkN4akMrMjJpcjlJTThQd05ySUE2MjBOem9MODd3M2Z3K2FpNlUvM2gvamxhNFZiTWtMS0dUeFM1bERsbUQ5MTdKeU81bjBnNEMxakpYQ0VGL21YR3Z4Wnd5YWdHbmVLMkNjWVUwVDQwaWRaRWlHRnd3TldFUzZELzVKNWV3R1hwSG5ZQmphN0oxcCtCWG50ZmZvbjZWN1YwUGdqZFNKYjRLVEFKL3dKaU5MUmZRdE5QWXUzY1ZIQWVXcWpXNUkvOGwxREl2VTI3ejZKdm5tQW12b1FDNXhIcld1dzhHTHNjcC9jZW9sYitIYnlQblB5RE9La0ZIWUcxZ3J4TEM1VGdxT1UwUXFkWm04ZjVMNlZrSlNZUlpwMmVZd1RqUXlXd3hEeXA5SU5aaVR5MXZ0SncrTmhzMGVPUFdTL01hc3ZUcmZINXp2WER4cFJLdXVUVWszdWFHVXJDWldJYzlZaTV4Ti9NUTg1NDU2VUVnOW1DdDNocmxyb1JvS3MrWFFBRDZlbDRDNVN2M25CSnllbDQ3OU43MHhuaTV0ZDRCMlE4WUNjSERYanN2S050c0FBQTFWU1VSQlZBVzVEbmtPNlg5eW5uZmRCSk52THJER0g5K0d3aXg5Rm9PcE02bWY1bjdycnJJOHd3eC9icDQzN3hYYkhYVEtzTXliY2dYRmFHMzFMZVVjSERSMFZWb21mYVgxVGlSd2JqSlV3QzV1V1lURTFsekZ3QkVtYVZ3bndhMjB4VHFDaHNPOUJwdnZpbER2SW1lQ3gyUklQUmh5Wldna3U1cXB5Y3IyeUpCMm1lTjdkMHlhYVdtNFloQ0lqanlVUFl3QVpjNmg4YVBUVmxlck5uUWlaZTBkeWQ3L294YjVreGZqYXI5N1JyNERRakNCQlBxcjh5eVBabG1zRWRMY043Y0ZKSlMxNVY5aUFaT2prUFFXc01abHo5cnRBV3Z1bVdBcCtVbkpON0xlUzkyRVlOcHlHckRaYlJlYVlEYmNKMEh6VndVK1czMmZtZ2lIbEV1WjFTR2Z5SEpwQk9nbmZYVjlReUozblFzRnJBRi96U01DL3lxa1g1NjV1Ky9tTGJyVTZKRm4xdlp6VTY1cHJYd2dIZTFsQU9maHJsZU1JbUdYMExBR3VGSTNWOGJiN1B2dVV3NTRZKzFnVGwwajBRUFdNTWFVR3NBVTgzZ3JwQzUzS3c0YVUwSmFOUnhDaC9KdXZKT3JFNjJmTFl1cjFNbnF6SHlqelBtS3BEZnZ3bTI4UCtjM0xiRTdvSG9hYWhjd2J5bDdVcC85SE8wM0xleGJZOThIV0R1UlN1elpxMy9HM0t3d2JlSUpqUlBBMmczSnkrcE1uKzFOQk5oSkQ0YVVJZnc0djFrY1h6OWwxbFpHU1RNSFZveDlvbnZZbWtCSThnNFduWlJUejg1di9MMTNoMWVhZTNiT0J0WlNQeUVQditzUGw4eVZXU0hsWmxtc3FheWNFZHhoV1F1MDN2T2xBS3loQ1N2U0ZhaGF4bjRpbitTVUsvTDhiRzN3b1ErZ29PVUs2bEx5a1p0U09mdFlVM0x0WDNzOTlGNWV5ckE4WXAxS3hsbTdTZWE1c3hqLzBYTUZkZlp3cjV6dE9aQjY1d0JyOW1kcjFSMWw2L21Yc3ZqVm44bXppeFpZUzllZWtIN2VMdjFrUWRhMW1FeStPY0RhRmhoVzF1WnhBV3NNVThqRlBEYnNWZXVRZnBEamVSYmc4MFo3VjVtL1h0WGFIYkhzV3dETzF2dzlhQzZXTmRVRlJodHJqS3NyUHBqck5BT2FVVWlmblVjUFRIcFhaaXU4aSt1ZTFtZDJudUZqR1BrMGdiWFNkMHA0K3kzZTREbTlQYkhrWjQxTDhhR2NzL2FWYVV2L0Jzc3JkN091bElpTk1iRUVKVk00ZXhoZ1dKUE8zaVpBbnZydlYvckg4TU8rWGZVcUtmMjdYajdKNGU2eXJWcFFOdnFsVCtaYVU4bVVmc3dGMXJ4WExyTmRoVldMUnEzbmV3TnI2YkJGaE1HZ3pXd2lrWE03a3ZwT0pDOUF3TUhpSUdYWjhCLzV6WlN4RzVMWFptcWlNU09FbEVJL2ZZZUFWKy9nU1JtQUVZYVVteDZyaHVId2RvK051eXhzQk80a3N6bVBRdEw1RGVzajV2dE1JbTBtcG9WcmlKZDVjRWpkQURxTUp1MVBGYmhNSHNJbTMrL1pkMmZzMjZHMHNSZXdsdndXTHZQaUpzaXlUeDlTSDhiOXRhblB4bEI3QjZmeTBMOTJOdTlaR2dxbHJtRlQ5SzVaUzJBY01lZmVNei83N3NXK2hiR2IvRmZRNU9QV3d0SnhIK2JCM0RGR0dnVU1FQ1lCS0dQamM0L1ZiRmZmdE44RjFncGpCTGh5NTRaTm5TYVVpYkFOVGIrcmQ2T1U5Y0oxaDVEQytvZjFxTTBhVXM5cVpHVFp1VUY3aHhoTEdvZkdaRWhickUzMWh5RGpMZ2lDbTQzNlpDSXo1R3BiS1FjNEFCWmhGakdtSzR1c3hDdFRwbW50bW5KQWZXTm9DZ1ZsZjdLSnozSnpNY2lVb2JsamhjQWlqS1hMcm5YaEpDMm1NcVFONzlKN3hIeE0zbk8zV1YvS0V1UXc0NU4zRlNVdndmQ0s1T1VtWjJ5M3pRZUwyc3Y5VEFSUVlYUWM5T2J1VmlnSCtYQ3A2WmFHS1dtQVNNQ0YvYTVtSVZ5ei9MbHhHVGNObkxuUkRLbmZPd05lRUZneHNQWlc3NXpGRzZ1blgwMGRJMWVaTXM2dHRsT1hzOUtZN1JzWUllN1JvL3RyaHM2VWZYcXZ5L05yN2ZiR3Q1bVc5cHhIM3BXemlOTEhmdVJPQ0F5ZjllU09vUXRwc1lidXptaldqcXo5V0R1NXJzR2Z1elNGL2hvZDg0d1NBSUJvZlZjVldZZlFQMlZZcmJ2M2I4cGkzTnBqYVZEVnNMYmF6bk9BdjdVQTlNV0VONEcxTWhlQWNPYVlzNEVsclBVS1BMRVdUeVc2NzZONzVoNUNCMjJYOWlrWDBjVDZjVTNGMmRLK3RlRXN3UDhCUzYydGF1alF3dDZGejJ0WmZHSzZNYjM0T1djVFFCamR0R1h0clJXYm5iWm5BMnRsdkRUc0FERm5tL25GaXNnN1lDbE5vKzdkZFVQR0M1REVEemtEbW4rd3NsdEp5bEhBMkVjSmI1UldxNURuNWlLckkrNVNWV1h2Umw0MHhiczVlNGJ5M0tZSTVqZkw4eTB2aTlwQTB0NHNZQzM1Z0JvQUZ2ZmNkdGRMWmF6N0FHdVVCcTZxYUFxczZjdWxBS3c1QysxbHJNT2ZrekhacjFtSXMwNHhqODQyM2hjZXk3cGdzV2FQOEY3c0NYZzdWb1F0T2NKY0FnS3p0RmNISGdWSVJvZ0dwbzhzYzlLbkJ5WE4ycWNRY1c2YjY2eWtXTTVRRUZldENsT09yTUlDeVZySDF6bExLZE1ZTUZRdGNsTm1FbGhEaitTelZwMTkrb1ZQTmQvdGw5ektMbXBncmZUZldjZ2xGMDJySVdNRVZ2SDYySEpiSFRJbmZRUVc1ZG14V2F5VmNaaHZ6aXJ6aWF6bHJQUG5CU3pqdUN4V2VlelNkMTVqWEplZE0rUzFPZk8zTlJldEZ5QmVheTVPQW12cGt6TUFyVjNkOEtKQ1MxWlZGQlpjOWtjaGVmQmFsTFNNZ3ByblJQTGgwU2htQVZyMjJyc2xBbGh2bFdnTlZSV2ZoY2IyVGVzSTd5UnZsKzlQVytpb2Jqek5XaEdWNXp5VVhDSHhzRHh2ZXN3a0gvNkVvdkV1aFhkeGp2eDRmbnRQMVpCOHJLekp0UFloOTZDNTJxQkdMMnVUSW90Qms3VTdPNlFONytDUysxZFFDeFlUMEVWWDUxSXBSTHEzaVJMaXJyVFArWTNaNXU4NjUySmJBaUlCeVNidHV3bHpPdkdoS1Y4Ri9WSy9qZXdma3I0R1pmS01xVDByR1dNajRFRXdxNVlNcFkvUWRlMENnQ3dPaTlVLzJNeTJWR3JSSjMxaG1ramdxektyU2Jkb0g1RjA1cERuSldDdVV2OHNpN1hrSlZoejRXdit4ZkcrblV5ZG1HWi8vWDczV3Rta1k3aGROampMM2JKc2xFeC9iVElXTk1ES0hXYUFtRkZJZnNMTG9Fbkg3QXFyK1ZTalM5bDBwTE9lcktINTdndHNNVGdzRDdoUzJEUXg0OUI0ZjhEQkttTjJTQi9tV0t3QkpRZ0pWeVlDY1pWeC8xeDNyYVZ1SUJWd3pPYU1IalpZcHJGTmE2eVVZYTFHdStPUW0yM2RtbklPNC9zbmNtZDlWZUtaUkg3N1BSTmtnRGJMUSsvdGJLSU4yd1gzVFZBTllkTVdtdFBtRCs5NFJPOXl1Tmd2cnByOU1rcEc4eUxsWnJsYUhGQTNZS3pwN3RtckwvMGlMTHQ3WS9KQVMxNkFDQk4rN3ZWTnk1aFdlNlV0SUhuMWd1aXluN0ZHSElHdlNkTS8rK0JnbFd4dDBYNFQ4czNiU2ZlbTFHRWVBYzhJRFpnZjRMVjlnelhoV29EZDdYK2xiVmt3TW1jU01WemR2YWRSZm1pRzRGSzlJNnlVMnh1UUsvT1pnRW5Rd0tSeEhYQ1dBZm94YzBBR1dzc0xZckZXK3NkYWpkSkFQOUdTQU9Tczdsbmh0S3dXOFF0QVRuZTNqTTc2RHYyZEsvYXpVVWdad01yVlNlKzZpU1NmdTBtNHgxZnYrZWk5dzZTWmc2d2NyMHI1THJCV2FBWkVCQ0RqY1pSbE5YSUdIVlBlM1VYZGNDN3pxYlR2ekxBZnV6b0RuNFRIc2Y5VFV1RzM4RDRzbHZhYVYra1g0TUJaaC9tdUFqN0pRMGhtQ2U2OHdyRGp5ZkErVFNCdmt4Z3B2eSt3NWh3ZzZGUHdvRHZlamtEMWtMVDU3Q2xhRCtubExPWXl2MUlXendrcEF4VGh1dW5QRHJqV3JVS2VjeUVtU0ZEdTlJQjgreHZMUVJaM0xDclhJWFVRV3JsM1VpaDBRL0xPQmRZSTBnVCsxdG5PeWhNb09RcmwzSjEwQlMzang2K3hodUVKVUxWdVRIM1hlbUN0ak5WZVIvR0FEelRYblpuNFFIdmMyUVl0VjBCQkltT0hPeWF5TWxIR0gzWlYrZHVobnRETm5DSEhBTWpzb2M2MDFWM1hqYmFBSlFBSEFCa0F4UHAxM3JDb1pYVlZCVFBLMk93ZndCREFoN2JzWGRwYVc3OXR0cG0relFYV3pBLzdFMXBScnJySzUxU2k2ekI2ZkYwVllFbTd4K0lLbXI3aHdZWjcvdkJYVzE1UU83U2d6Q1FYY2kydjhVa1hIRmdyWXpHUDhCcEFjTHdhQXhiL25HNTgxUkI2Nnp2UWpWR00rV3RlRGZQWHVtK1YyNXlMNXJ3ejFWelU1dFMvZ2pidnlDdmpNRzhHaGY3QU0xSmlyVjF0YTUzS1dJQmxESUx3dTg2M1VVaWU2K2Nod056YVk5U0I1M0RHT1QrNWZQZUFOV00rbS9qN3lZZFczWkMyQU40QWNMTHlwb1djUG5KdlpRRzlQbXMySzB0Wjl6dzZUOWJnV0o0eFduQU91akpoeTh0cXB5eU1oZUZMMHhnaGRmSEt3NXVTOFhibEdQS2VhNVdxb2NnTWxDMU5HVGw1NWxxczRaR05wN3RYVHRGNk4zMXZpN1Y5R3ppdS9DR2tUYjNyejN0Y2ZUbVhkaklPWUIwTkxXM1Rsc0NSTk82TUxodGN1OU9jUzF0SFVUWjl3cXhoa2pCYTV6MmtQUXlFaTh0dHhFdFlLSEJlS1pENVJ2dkNRclRLMUovWHhpK1N5a01EekRDWEVXQStBZEEvdGJGNFhNSkNnWVVDMTJFS1pHL0lWakQvN3FUck1LbVdvUmNLN0FPc0taTDh3UGkvemp4cjNRdDFYb0MxdE1zU3Ftb2xWSWJDYTJjMmVMcE1nT09oUU40Yml5REdHV3UzMnVOcGVUVlhnVVN1dmVqZG5YdGMzYm5vMnluQVdoZm8ybWNRUlRFQW9HcUN2UHZVdCtUZGp3S2hQL0J2Y0s4OCtNOEplNjJtRGNBZ3dKT3lxV1ZBTlFtc2xYT0lrdjZkajVxSHVaU0FOZWJ2VHpwcUF1MDNyWmJjQ3dVV0Npd1V1UFFva0VPSVd4VFhWcHBrZDJ4TzNqZDA2VkZoR2RGQ2dZVUNDd1VXQ3B3TEJYS1dzTURobGVEUE9XNTVqblU1ajdnMHVuZVlaZU1TcmtNVXlGeGltYzNyZy9jRnl4ZEdCOXpISDUvNXNMSUtPNjZRdnR3NmJiSENjY1hNa1ZyQUhOY1lqcnVkQlZnN2JvcWZuL2J5SG5rTGNmdmtDY2dqZ3d2L2VRbHBpMFV2YndlZVlNNlNVWml5V0V1Nks3MVk3YkhzN2Y3RC9DR0R1R1NBdFVNR3Y1UlpLTEJRWUtIQVFvR0ZBZ3NGRmdvc0ZGZ29zRkJnb2NCQ2dXc1BCU0lndThpZHF6TzNjZmQvY3l2M1IwNnozTVdQYXFUcGgzczMvWE9pdXpPcjl4VWZWVnVYVWowTHNIWnB2TTI4Uis2ZlhQKzVudnFqa3NuN215K05rZGRIOFY4bHlBUjdKUy9ra3dBQUFBQkpSVTVFcmtKZ2dnPT0iLAoJIm1hcCI6IFsKCQk1LAoJCTUsCgkJNiwKCQkxMiwKCQk5LAoJCTEyLAoJCTExLAoJCTQsCgkJNSwKCQk1LAoJCTgsCgkJMTIsCgkJNCwKCQk4LAoJCTQsCgkJNywKCQkxMCwKCQk4LAoJCTEwLAoJCTksCgkJMTAsCgkJOSwKCQkxMCwKCQk5LAoJCTEwLAoJCTEwLAoJCTUsCgkJNSwKCQkxMCwKCQkxMSwKCQkxMCwKCQk4LAoJCTEzLAoJCTEwLAoJCTExLAoJCTEyLAoJCTEyLAoJCTEwLAoJCTksCgkJMTMsCgkJMTIsCgkJNSwKCQk5LAoJCTEwLAoJCTksCgkJMTQsCgkJMTMsCgkJMTQsCgkJMTAsCgkJMTQsCgkJMTEsCgkJOSwKCQkxMCwKCQkxMiwKCQkxMCwKCQkxNSwKCQkxMCwKCQkxMCwKCQkxMCwKCQk1LAoJCTcsCgkJNSwKCQkxMCwKCQkxMCwKCQk5LAoJCTksCgkJMTAsCgkJOSwKCQkxMCwKCQk5LAoJCTYsCgkJMTAsCgkJMTAsCgkJNCwKCQk0LAoJCTksCgkJNCwKCQkxNSwKCQkxMCwKCQkxMCwKCQkxMCwKCQkxMCwKCQk2LAoJCTgsCgkJNiwKCQkxMCwKCQk4LAoJCTEzLAoJCTgsCgkJOCwKCQk5LAoJCTYsCgkJNSwKCQk2LAoJCTEwCgldLAoJImJhc2VsaW5lIjogMSwKCSJjaGFyc2V0IjogIiAhXCIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX4iLAoJImxpbmVoZWlnaHQiOiAxOCwKCSJrZXJuaW5nIjogMCwKCSJzcGFjaW5nIjogMiwKCSJmb250IjogewoJCSJjb2xvciI6ICIjZmZmZmZmIiwKCQkiZmFtaWx5IjogIk11c2VvIFNhbnMgTGlnaHQiLAoJCSJvdXRsaW5lIjogMCwKCQkic2l6ZSI6IDE2LAoJCSJzdHlsZSI6ICJub3JtYWwiCgl9Cn0="}}},"includes":["lychee.ui.Entity"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Entity = lychee.import('lychee.ui.Entity');\n\tconst _FONT   = attachments[\"fnt\"];\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.font  = _FONT;\n\t\tthis.value = '';\n\n\n\t\tthis.setFont(states.font);\n\t\tthis.setValue(states.value);\n\n\t\tdelete states.font;\n\t\tdelete states.value;\n\n\n\t\tstates.width  = typeof states.width === 'number'  ? states.width  : this.width;\n\t\tstates.height = typeof states.height === 'number' ? states.height : this.height;\n\t\tstates.shape  = _Entity.SHAPE.rectangle;\n\n\n\t\t_Entity.call(this, states);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tlet font = lychee.deserialize(blob.font);\n\t\t\tif (font !== null) {\n\t\t\t\tthis.setFont(font);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Entity.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ui.entity.Label';\n\n\t\t\tlet states = data['arguments'][0];\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.value !== '') states.value = this.value;\n\n\n\t\t\tif (this.font !== null) blob.font = lychee.serialize(this.font);\n\n\n\t\t\tdata['blob'] = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.visible === false) return;\n\n\n\t\t\tlet alpha    = this.alpha;\n\t\t\tlet position = this.position;\n\n\t\t\tlet x = position.x + offsetX;\n\t\t\tlet y = position.y + offsetY;\n\n\n\t\t\tlet font  = this.font;\n\t\t\tlet value = this.value;\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t}\n\n\n\t\t\tif (font !== null) {\n\n\t\t\t\tlet cur = font.measure(value);\n\t\t\t\tlet max = this.width;\n\n\t\t\t\tif (cur.realwidth <= max) {\n\n\t\t\t\t\trenderer.drawText(\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tfont,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet len = (max / cur.realwidth * value.length) | 0;\n\t\t\t\t\tlet str = value.substr(0, len);\n\n\t\t\t\t\trenderer.drawText(\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\tstr,\n\t\t\t\t\t\tfont,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetFont: function(font) {\n\n\t\t\tfont = font instanceof Font ? font : null;\n\n\n\t\t\tif (font !== null) {\n\n\t\t\t\tthis.font = font;\n\n\t\t\t\t// refresh the layout\n\t\t\t\tif (this.value !== '') {\n\t\t\t\t\tthis.setValue(this.value);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetValue: function(value) {\n\n\t\t\tvalue = typeof value === 'string' ? value : null;\n\n\n\t\t\tif (value !== null) {\n\n\t\t\t\tlet font = this.font;\n\t\t\t\tif (font !== null) {\n\n\t\t\t\t\tlet dim = font.measure(value);\n\n\t\t\t\t\tthis.width  = dim.realwidth;\n\t\t\t\t\tthis.height = dim.realheight;\n\n\t\t\t\t}\n\n\n\t\t\t\tthis.value = value;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.Tunnel":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.Tunnel","url":"/libraries/lychee/source/net/Tunnel.js"}],"blob":{"attaches":{},"requires":["lychee.net.socket.HTTP","lychee.net.socket.WS","lychee.codec.BENCODE","lychee.codec.BITON","lychee.codec.JSON","lychee.net.Service"],"includes":["lychee.event.Emitter"],"exports":"function(lychee, global, attachments) {\n\n\tconst _socket  = lychee.import('lychee.net.socket');\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\tconst _Service = lychee.import('lychee.net.Service');\n\tconst _BENCODE = lychee.import('lychee.codec.BENCODE');\n\tconst _BITON   = lychee.import('lychee.codec.BITON');\n\tconst _JSON    = lychee.import('lychee.codec.JSON');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _plug_service = function(id, service) {\n\n\t\tid = typeof id === 'string' ? id : null;\n\n\t\tif (id === null || service === null) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tlet found = false;\n\n\t\tfor (let w = 0, wl = this.__services.waiting.length; w < wl; w++) {\n\n\t\t\tif (this.__services.waiting[w] === service) {\n\t\t\t\tthis.__services.waiting.splice(w, 1);\n\t\t\t\tfound = true;\n\t\t\t\twl--;\n\t\t\t\tw--;\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (found === true) {\n\n\t\t\tthis.__services.active.push(service);\n\n\t\t\tservice.trigger('plug');\n\n\t\t\tif (lychee.debug === true) {\n\t\t\t\tconsole.log('lychee.net.Tunnel: Remote plugged in Service (' + id + ')');\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _unplug_service = function(id, service) {\n\n\t\tid = typeof id === 'string' ? id : null;\n\n\t\tif (id === null || service === null) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tlet found = false;\n\n\t\tfor (let w = 0, wl = this.__services.waiting.length; w < wl; w++) {\n\n\t\t\tif (this.__services.waiting[w] === service) {\n\t\t\t\tthis.__services.waiting.splice(w, 1);\n\t\t\t\tfound = true;\n\t\t\t\twl--;\n\t\t\t\tw--;\n\t\t\t}\n\n\t\t}\n\n\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\n\t\t\tif (this.__services.active[a] === service) {\n\t\t\t\tthis.__services.active.splice(a, 1);\n\t\t\t\tfound = true;\n\t\t\t\tal--;\n\t\t\t\ta--;\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (found === true) {\n\n\t\t\tservice.trigger('unplug');\n\n\t\t\tif (lychee.debug === true) {\n\t\t\t\tconsole.log('lychee.net.Tunnel: Remote unplugged Service (' + id + ')');\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.id        = 'localhost:1337';\n\t\tthis.codec     = lychee.interfaceof(_JSON, states.codec) ? states.codec : _JSON;\n\t\tthis.host      = 'localhost';\n\t\tthis.port      = 1337;\n\t\tthis.reconnect = 0;\n\t\tthis.type      = Composite.TYPE.WS;\n\n\n\t\tthis.__isConnected = false;\n\t\tthis.__socket      = null;\n\t\tthis.__services    = {\n\t\t\twaiting: [],\n\t\t\tactive:  []\n\t\t};\n\n\n\t\tthis.setHost(states.host);\n\t\tthis.setPort(states.port);\n\t\tthis.setReconnect(states.reconnect);\n\t\tthis.setType(states.type);\n\n\n\t\t_Emitter.call(this);\n\n\t\tstates = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('connect', function() {\n\n\t\t\tthis.__isConnected = true;\n\n\t\t}, this);\n\n\t\tthis.bind('send', function(payload, headers) {\n\n\t\t\tif (this.__socket !== null) {\n\t\t\t\tthis.__socket.send(payload, headers);\n\t\t\t}\n\n\t\t}, this);\n\n\t\tthis.bind('disconnect', function() {\n\n\t\t\tthis.__isConnected = false;\n\n\n\t\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\t\t\t\tthis.__services.active[a].trigger('unplug');\n\t\t\t}\n\n\t\t\tthis.__services.active  = [];\n\t\t\tthis.__services.waiting = [];\n\n\n\t\t\tif (this.reconnect > 0) {\n\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tthis.trigger('connect');\n\t\t\t\t}.bind(this), this.reconnect);\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\tWS:   0,\n\t\tHTTP: 1,\n\t\tTCP:  2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tlet socket = lychee.deserialize(blob.socket);\n\t\t\tif (socket !== null) {\n\t\t\t\tthis.__socket = socket;\n\t\t\t}\n\n\n\t\t\tif (blob.services instanceof Array) {\n\n\t\t\t\tfor (let s = 0, sl = blob.services.length; s < sl; s++) {\n\t\t\t\t\tthis.addService(lychee.deserialize(blob.services[s]));\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.Tunnel';\n\n\t\t\tlet states = {};\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.codec !== _JSON)            states.codec     = lychee.serialize(this.codec);\n\t\t\tif (this.host !== 'localhost')       states.host      = this.host;\n\t\t\tif (this.port !== 1337)              states.port      = this.port;\n\t\t\tif (this.reconnect !== 0)            states.reconnect = this.reconnect;\n\t\t\tif (this.type !== Composite.TYPE.WS) states.type      = this.type;\n\n\n\t\t\tif (this.__socket !== null) blob.socket = lychee.serialize(this.__socket);\n\n\n\t\t\tif (this.__services.active.length > 0) {\n\n\t\t\t\tblob.services = [];\n\n\t\t\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\n\t\t\t\t\tlet service = this.__services.active[a];\n\n\t\t\t\t\tblob.services.push(lychee.serialize(service));\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = states;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tconnect: function(connection) {\n\n\t\t\tconnection = typeof connection === 'object' ? connection : null;\n\n\n\t\t\tif (this.__isConnected === false) {\n\n\t\t\t\tlet type = this.type;\n\t\t\t\tif (type === Composite.TYPE.WS) {\n\t\t\t\t\tthis.__socket = new _socket.WS();\n\t\t\t\t} else if (type === Composite.TYPE.HTTP) {\n\t\t\t\t\tthis.__socket = new _socket.HTTP();\n\t\t\t\t} else if (type === Composite.TYPE.TCP) {\n\t\t\t\t\tthis.__socket = new _socket.TCP();\n\t\t\t\t}\n\n\n\t\t\t\tthis.__socket.bind('connect', function() {\n\t\t\t\t\tthis.trigger('connect');\n\t\t\t\t}, this);\n\n\t\t\t\tthis.__socket.bind('receive', function(payload, headers) {\n\t\t\t\t\tthis.receive(payload, headers);\n\t\t\t\t}, this);\n\n\t\t\t\tthis.__socket.bind('disconnect', function() {\n\t\t\t\t\tthis.disconnect();\n\t\t\t\t}, this);\n\n\t\t\t\tthis.__socket.bind('error', function() {\n\t\t\t\t\tthis.setReconnect(0);\n\t\t\t\t\tthis.disconnect();\n\t\t\t\t}, this);\n\n\n\t\t\t\tthis.__socket.connect(this.host, this.port, connection);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tdisconnect: function() {\n\n\t\t\tif (this.__isConnected === true) {\n\n\t\t\t\tlet socket = this.__socket;\n\t\t\t\tif (socket !== null) {\n\n\t\t\t\t\tsocket.unbind('connect');\n\t\t\t\t\tsocket.unbind('receive');\n\t\t\t\t\tsocket.unbind('disconnect');\n\t\t\t\t\tsocket.unbind('error');\n\t\t\t\t\tsocket.disconnect();\n\t\t\t\t\tthis.__socket = null;\n\n\t\t\t\t}\n\n\n\t\t\t\tthis.trigger('disconnect');\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsend: function(data, headers) {\n\n\t\t\tdata    = data instanceof Object    ? data    : null;\n\t\t\theaders = headers instanceof Object ? headers : {};\n\n\n\t\t\tif (data === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\n\t\t\tif (typeof headers.id     === 'string') headers['@service-id']     = headers.id;\n\t\t\tif (typeof headers.event  === 'string') headers['@service-event']  = headers.event;\n\t\t\tif (typeof headers.method === 'string') headers['@service-method'] = headers.method;\n\n\n\t\t\tdelete headers.id;\n\t\t\tdelete headers.event;\n\t\t\tdelete headers.method;\n\n\n\t\t\tlet payload = null;\n\t\t\tif (data !== null) {\n\t\t\t\tpayload = this.codec.encode(data);\n\t\t\t}\n\n\n\t\t\tif (payload !== null) {\n\n\t\t\t\tthis.trigger('send', [ payload, headers ]);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\treceive: function(payload, headers) {\n\n\t\t\tpayload = payload instanceof Buffer ? payload : null;\n\t\t\theaders = headers instanceof Object ? headers : {};\n\n\n\t\t\tlet id     = headers['@service-id']     || null;\n\t\t\tlet event  = headers['@service-event']  || null;\n\t\t\tlet method = headers['@service-method'] || null;\n\n\t\t\tlet data = null;\n\t\t\tif (payload.length === 0) {\n\t\t\t\tpayload = this.codec.encode({});\n\t\t\t}\n\n\t\t\tif (payload !== null) {\n\t\t\t\tdata = this.codec.decode(payload);\n\t\t\t}\n\n\n\t\t\tlet instance = this.getService(id);\n\t\t\tif (instance !== null && data !== null) {\n\n\t\t\t\tif (method === '@plug' || method === '@unplug') {\n\n\t\t\t\t\tif (method === '@plug') {\n\t\t\t\t\t\t_plug_service.call(this,   id, instance);\n\t\t\t\t\t} else if (method === '@unplug') {\n\t\t\t\t\t\t_unplug_service.call(this, id, instance);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (method !== null) {\n\n\t\t\t\t\tif (typeof instance[method] === 'function') {\n\t\t\t\t\t\tinstance[method](data);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (event !== null) {\n\n\t\t\t\t\tif (typeof instance.trigger === 'function') {\n\t\t\t\t\t\tinstance.trigger(event, [ data ]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.trigger('receive', [ data, headers ]);\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetHost: function(host) {\n\n\t\t\thost = typeof host === 'string' ? host : null;\n\n\n\t\t\tif (host !== null) {\n\n\t\t\t\tthis.id   = (/:/g.test(host) ? '[' + host + ']' : host) + ':' + this.port;\n\t\t\t\tthis.host = host;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetPort: function(port) {\n\n\t\t\tport = typeof port === 'number' ? (port | 0) : null;\n\n\n\t\t\tif (port !== null) {\n\n\t\t\t\tthis.id   = (/:/g.test(this.host) ? '[' + this.host + ']' : this.host) + ':' + port;\n\t\t\t\tthis.port = port;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetReconnect: function(reconnect) {\n\n\t\t\treconnect = typeof reconnect === 'number' ? (reconnect | 0) : null;\n\n\n\t\t\tif (reconnect !== null) {\n\n\t\t\t\tthis.reconnect = reconnect;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taddService: function(service) {\n\n\t\t\tservice = lychee.interfaceof(_Service, service) ? service : null;\n\n\n\t\t\tif (service !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tfor (let w = 0, wl = this.__services.waiting.length; w < wl; w++) {\n\n\t\t\t\t\tif (this.__services.waiting[w] === service) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\n\t\t\t\t\tif (this.__services.active[a] === service) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (found === false) {\n\n\t\t\t\t\tthis.__services.waiting.push(service);\n\n\t\t\t\t\tthis.send({}, {\n\t\t\t\t\t\tid:     service.id,\n\t\t\t\t\t\tmethod: '@plug'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetService: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tfor (let w = 0, wl = this.__services.waiting.length; w < wl; w++) {\n\n\t\t\t\t\tlet wservice = this.__services.waiting[w];\n\t\t\t\t\tif (wservice.id === id) {\n\t\t\t\t\t\treturn wservice;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\n\t\t\t\t\tlet aservice = this.__services.active[a];\n\t\t\t\t\tif (aservice.id === id) {\n\t\t\t\t\t\treturn aservice;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tremoveService: function(service) {\n\n\t\t\tservice = lychee.interfaceof(_Service, service) ? service : null;\n\n\n\t\t\tif (service !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tfor (let w = 0, wl = this.__services.waiting.length; w < wl; w++) {\n\n\t\t\t\t\tif (this.__services.waiting[w] === service) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\n\t\t\t\t\tif (this.__services.active[a] === service) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (found === true) {\n\n\t\t\t\t\tthis.send({}, {\n\t\t\t\t\t\tid:     service.id,\n\t\t\t\t\t\tmethod: '@unplug'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveServices: function() {\n\n\t\t\tthis.__services.waiting.slice(0).forEach(function(service) {\n\t\t\t\t_unplug_service.call(this, service.id, service);\n\t\t\t}.bind(this));\n\n\t\t\tthis.__services.active.slice(0).forEach(function(service) {\n\t\t\t\t_unplug_service.call(this, service.id, service);\n\t\t\t}.bind(this));\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetType: function(type) {\n\n\t\t\ttype = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\n\t\t\tif (type !== null) {\n\n\t\t\t\tlet oldtype = this.type;\n\t\t\t\tif (oldtype !== type) {\n\n\t\t\t\t\tthis.type = type;\n\n\n\t\t\t\t\tif (this.__isConnected === true) {\n\t\t\t\t\t\tthis.disconnect();\n\t\t\t\t\t\tthis.connect();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.codec.JSON":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.codec.JSON","url":"/libraries/lychee/source/codec/JSON.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _CHARS_SEARCH = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\tconst _CHARS_META   = {\n\t\t'\\r': '',    // FUCK YOU, Microsoft!\n\t\t'\\b': '\\\\b',\n\t\t'\\t': '\\\\t',\n\t\t'\\n': '\\\\n',\n\t\t'\\f': '\\\\f',\n\t\t'\"':  '\\\\\"',\n\t\t'\\\\': '\\\\\\\\'\n\t};\n\n\tconst _desanitize_string = function(san) {\n\n\t\tlet str = san;\n\n\t\t// str = str.replace(/\\\\b/g, '\\b');\n\t\t// str = str.replace(/\\\\f/g, '\\f');\n\t\tstr = str.replace(/\\\\t/g, '\\t');\n\t\tstr = str.replace(/\\\\n/g, '\\n');\n\t\tstr = str.replace(/\\\\\\\\/g, '\\\\');\n\n\t\treturn str;\n\n\t};\n\n\tconst _sanitize_string = function(str) {\n\n\t\tlet san = str;\n\n\t\tif (_CHARS_SEARCH.test(san)) {\n\n\t\t\tsan = san.replace(_CHARS_SEARCH, function(char) {\n\n\t\t\t\tlet meta = _CHARS_META[char];\n\t\t\t\tif (meta !== undefined) {\n\t\t\t\t\treturn meta;\n\t\t\t\t} else {\n\t\t\t\t\treturn '\\\\u' + (char.charCodeAt(0).toString(16)).slice(-4);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t\treturn san;\n\n\t};\n\n\n\n\t/*\n\t * STRUCTS\n\t */\n\n\tconst _Stream = function(buffer) {\n\n\t\tthis.__buffer = typeof buffer === 'string' ? buffer : '';\n\t\tthis.__index  = 0;\n\n\t};\n\n\n\t_Stream.prototype = {\n\n\t\ttoString: function() {\n\t\t\treturn this.__buffer;\n\t\t},\n\n\t\tpointer: function() {\n\t\t\treturn this.__index;\n\t\t},\n\n\t\tlength: function() {\n\t\t\treturn this.__buffer.length;\n\t\t},\n\n\t\tread: function(bytes) {\n\n\t\t\tlet buffer = '';\n\n\t\t\tbuffer       += this.__buffer.substr(this.__index, bytes);\n\t\t\tthis.__index += bytes;\n\n\t\t\treturn buffer;\n\n\t\t},\n\n\t\tsearch: function(array) {\n\n\t\t\tlet bytes = Infinity;\n\n\t\t\tfor (let a = 0, al = array.length; a < al; a++) {\n\n\t\t\t\tlet token = array[a];\n\t\t\t\tlet size  = this.__buffer.indexOf(token, this.__index + 1) - this.__index;\n\t\t\t\tif (size > -1 && size < bytes) {\n\t\t\t\t\tbytes = size;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (bytes === Infinity) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\n\t\t\treturn bytes;\n\n\t\t},\n\n\t\tseek: function(bytes) {\n\n\t\t\tif (bytes > 0) {\n\t\t\t\treturn this.__buffer.substr(this.__index, bytes);\n\t\t\t} else {\n\t\t\t\treturn this.__buffer.substr(this.__index + bytes, Math.abs(bytes));\n\t\t\t}\n\n\t\t},\n\n\t\twrite: function(buffer) {\n\n\t\t\tthis.__buffer += buffer;\n\t\t\tthis.__index  += buffer.length;\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * ENCODER and DECODER\n\t */\n\n\tconst _encode = function(stream, data) {\n\n\t\t// Boolean, Null (or EOS), Undefined, Infinity, NaN\n\t\tif (\n\t\t\ttypeof data === 'boolean'\n\t\t\t|| data === null\n\t\t\t|| data === undefined\n\t\t\t|| (\n\t\t\t\ttypeof data === 'number'\n\t\t\t\t&& (\n\t\t\t\t\tdata === Infinity\n\t\t\t\t\t|| data === -Infinity\n\t\t\t\t\t|| isNaN(data) === true\n\t\t\t\t)\n\t\t\t)\n\t\t) {\n\n\t\t\tif (data === null) {\n\t\t\t\tstream.write('null');\n\t\t\t} else if (data === undefined) {\n\t\t\t\tstream.write('undefined');\n\t\t\t} else if (data === false) {\n\t\t\t\tstream.write('false');\n\t\t\t} else if (data === true) {\n\t\t\t\tstream.write('true');\n\t\t\t} else if (data === Infinity) {\n\t\t\t\tstream.write('Infinity');\n\t\t\t} else if (data === -Infinity) {\n\t\t\t\tstream.write('-Infinity');\n\t\t\t} else if (isNaN(data) === true) {\n\t\t\t\tstream.write('NaN');\n\t\t\t}\n\n\n\t\t// 123, 12.3: Integer or Float\n\t\t} else if (typeof data === 'number') {\n\n\t\t\tlet type = 1;\n\t\t\tif (data < 268435456 && data !== (data | 0)) {\n\t\t\t\ttype = 2;\n\t\t\t}\n\n\n\t\t\t// Negative value\n\t\t\tlet sign = 0;\n\t\t\tif (data < 0) {\n\t\t\t\tdata = -data;\n\t\t\t\tsign = 1;\n\t\t\t}\n\n\n\t\t\tif (sign === 1) {\n\t\t\t\tstream.write('-');\n\t\t\t}\n\n\n\t\t\tif (type === 1) {\n\t\t\t\tstream.write('' + data.toString());\n\t\t\t} else {\n\t\t\t\tstream.write('' + data.toString());\n\t\t\t}\n\n\n\t\t// \"\": String\n\t\t} else if (typeof data === 'string') {\n\n\t\t\tdata = _sanitize_string(data);\n\n\n\t\t\tstream.write('\"');\n\n\t\t\tstream.write(data);\n\n\t\t\tstream.write('\"');\n\n\n\t\t// []: Array\n\t\t} else if (data instanceof Array) {\n\n\t\t\tstream.write('[');\n\n\t\t\tfor (let d = 0, dl = data.length; d < dl; d++) {\n\n\t\t\t\t_encode(stream, data[d]);\n\n\t\t\t\tif (d < dl - 1) {\n\t\t\t\t\tstream.write(',');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstream.write(']');\n\n\n\t\t// {}: Object\n\t\t} else if (data instanceof Object && typeof data.serialize !== 'function') {\n\n\t\t\tstream.write('{');\n\n\t\t\tlet keys = Object.keys(data);\n\n\t\t\tfor (let k = 0, kl = keys.length; k < kl; k++) {\n\n\t\t\t\tlet key = keys[k];\n\n\t\t\t\t_encode(stream, key);\n\t\t\t\tstream.write(':');\n\n\t\t\t\t_encode(stream, data[key]);\n\n\t\t\t\tif (k < kl - 1) {\n\t\t\t\t\tstream.write(',');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstream.write('}');\n\n\n\t\t// Custom High-Level Implementation\n\t\t} else if (data instanceof Object && typeof data.serialize === 'function') {\n\n\t\t\tstream.write('%');\n\n\t\t\tlet blob = lychee.serialize(data);\n\n\t\t\t_encode(stream, blob);\n\n\t\t\tstream.write('%');\n\n\t\t}\n\n\t};\n\n\tconst _decode = function(stream) {\n\n\t\tlet value  = undefined;\n\t\tlet seek   = '';\n\t\tlet size   = 0;\n\t\tlet errors = 0;\n\t\tlet check  = null;\n\n\n\t\tif (stream.pointer() < stream.length()) {\n\n\t\t\tseek = stream.seek(1);\n\n\n\t\t\t// Boolean, Null (or EOS), Undefined, Infinity, NaN\n\t\t\tif (stream.seek(4) === 'null') {\n\t\t\t\tstream.read(4);\n\t\t\t\tvalue = null;\n\t\t\t} else if (stream.seek(9) === 'undefined') {\n\t\t\t\tstream.read(9);\n\t\t\t\tvalue = undefined;\n\t\t\t} else if (stream.seek(5) === 'false') {\n\t\t\t\tstream.read(5);\n\t\t\t\tvalue = false;\n\t\t\t} else if (stream.seek(4) === 'true') {\n\t\t\t\tstream.read(4);\n\t\t\t\tvalue = true;\n\t\t\t} else if (stream.seek(8) === 'Infinity') {\n\t\t\t\tstream.read(8);\n\t\t\t\tvalue = Infinity;\n\t\t\t} else if (stream.seek(9) === '-Infinity') {\n\t\t\t\tstream.read(9);\n\t\t\t\tvalue = -Infinity;\n\t\t\t} else if (stream.seek(3) === 'NaN') {\n\t\t\t\tstream.read(3);\n\t\t\t\tvalue = NaN;\n\n\n\t\t\t// 123, 12.3: Number\n\t\t\t} else if (seek === '-' || isNaN(parseInt(seek, 10)) === false) {\n\n\t\t\t\tsize = stream.search([ ',', ']', '}' ]);\n\n\t\t\t\tif (size > 0) {\n\n\t\t\t\t\tlet tmp = stream.read(size);\n\t\t\t\t\tif (tmp.indexOf('.') !== -1) {\n\t\t\t\t\t\tvalue = parseFloat(tmp, 10);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = parseInt(tmp, 10);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t// \"\": String\n\t\t\t} else if (seek === '\"') {\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\tsize = stream.search([ '\"' ]);\n\n\t\t\t\tif (size > 0) {\n\t\t\t\t\tvalue = stream.read(size);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\n\n\t\t\t\tcheck = stream.read(1);\n\n\n\t\t\t\tlet unichar = stream.seek(-2);\n\n\t\t\t\twhile (check === '\"' && unichar.charAt(0) === '\\\\') {\n\n\t\t\t\t\tif (value.charAt(value.length - 1) === '\\\\') {\n\t\t\t\t\t\tvalue = value.substr(0, value.length - 1) + check;\n\t\t\t\t\t}\n\n\t\t\t\t\tsize    = stream.search([ '\"' ]);\n\t\t\t\t\tvalue  += stream.read(size);\n\t\t\t\t\tcheck   = stream.read(1);\n\t\t\t\t\tunichar = stream.seek(-2);\n\n\t\t\t\t}\n\n\t\t\t\tvalue = _desanitize_string(value);\n\n\t\t\t// []: Array\n\t\t\t} else if (seek === '[') {\n\n\t\t\t\tvalue = [];\n\n\n\t\t\t\tsize  = stream.search([ ']' ]);\n\t\t\t\tcheck = stream.read(1).trim() + stream.seek(size).trim();\n\n\t\t\t\tif (check !== '[]') {\n\n\t\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\t\tvalue.push(_decode(stream));\n\n\t\t\t\t\t\tcheck = stream.seek(1);\n\n\t\t\t\t\t\tif (check === ',') {\n\t\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t\t} else if (check === ']') {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\terrors++;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstream.read(1);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstream.read(size);\n\n\t\t\t\t}\n\n\n\t\t\t// {}: Object\n\t\t\t} else if (seek === '{') {\n\n\t\t\t\tvalue = {};\n\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\tif (stream.seek(1) === '}') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\n\t\t\t\t\tlet object_key = _decode(stream);\n\t\t\t\t\tcheck = stream.seek(1);\n\n\t\t\t\t\tif (check === '}') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (check === ':') {\n\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t} else if (check !== ':') {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet object_value = _decode(stream);\n\t\t\t\t\tcheck = stream.seek(1);\n\n\n\t\t\t\t\tvalue[object_key] = object_value;\n\n\n\t\t\t\t\tif (check === '}') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (check === ',') {\n\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstream.read(1);\n\n\t\t\t// %%: Custom High-Level Implementation\n\t\t\t} else if (seek === '%') {\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\tlet blob = _decode(stream);\n\n\t\t\t\tvalue = lychee.deserialize(blob);\n\t\t\t\tcheck = stream.read(1);\n\n\t\t\t\tif (check !== '%') {\n\t\t\t\t\tvalue = undefined;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Invalid seek, assume it's a space character\n\n\t\t\t\tstream.read(1);\n\t\t\t\treturn _decode(stream);\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn value;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Module = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\treturn {\n\t\t\t\t'reference': 'lychee.codec.JSON',\n\t\t\t\t'blob':      null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tencode: function(data) {\n\n\t\t\tdata = data instanceof Object ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream('');\n\n\t\t\t\t_encode(stream, data);\n\n\t\t\t\treturn Buffer.from(stream.toString(), 'utf8');\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tdecode: function(data) {\n\n\t\t\tdata = data instanceof Buffer ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream(data.toString('utf8'));\n\t\t\t\tlet object = _decode(stream);\n\t\t\t\tif (object !== undefined) {\n\t\t\t\t\treturn object;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\n\treturn Module;\n\n}"}},"game.ui.sprite.Background":{"constructor":"lychee.Definition","arguments":[{"id":"game.ui.sprite.Background","url":"/projects/flappy-bnn/source/ui/sprite/Background.js"}],"blob":{"attaches":{"json":{"constructor":"Config","arguments":["/projects/flappy-bnn/source/ui/sprite/Background.json"],"blob":{"buffer":"data:application/json;base64,ewoJIndpZHRoIjogMTAyNCwKCSJoZWlnaHQiOiA1MTIsCgkic3RhdGVzIjogewoJCSJkZWZhdWx0IjogewoJCQkiYW5pbWF0aW9uIjogZmFsc2UKCQl9Cgl9LAoJIm1hcCI6IHsKCQkiZGVmYXVsdCI6IFsKCQkJewoJCQkJIngiOiAwLAoJCQkJInkiOiAwLAoJCQkJInciOiAxMDI0LAoJCQkJImgiOiA1MTIKCQkJfQoJCV0KCX0KfQ=="}},"png":{"constructor":"Texture","arguments":["/projects/flappy-bnn/source/ui/sprite/Background.png"],"blob":{"buffer":"data:image/png;base64,PNG\r\n\u001a\n\u0000\u0000\u0000\rIHDR\u0000\u0000\u0004\u0000\u0000\u0000\u0002\u0000\b\u0006\u0000\u0000\u0000\u001c\u001e\u0000\u0000\u0000\u0006bKGD\u0000\u0000\u0000\u0000\u0000\u0000\tpHYs\u0000\u0000\u000b\u0013\u0000\u0000\u000b\u0013\u0001\u0000\u0018\u0000\u0000\u0000\u0007tIME\u0007\u000b\u0015\u0013\b\u0001k9)\u0000\u0000 \u0000IDATxvH\u0012\u001c+%\f9\"FR`ysTRfD\n\u00018O!\u0000\u0000\u0000\u0000\u0000jK\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000P\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000\u0000\n\u0000\u0000\u0000\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000\u0000\u0000\u0000@\u0001\u0000\u0000\u0000\u0000\u0000\u0000[%\u0000#5\f\u0000\u0000\u0000P\u0000\u0000p$?2#7I\u001f;%\u001f8~MOq\u0000\u0000\u0000\u0000\u0000\u0000\u001c27L_\u0002ii\u0001 \u00142E.\u0000?\"N\u0000W\u001f\u0000\u0000\u0000\u0000@\u0001\u0000o\"SR__[&L?\t\bgK<B5L\u001eY\u0004\u0002Gg/\u001b\u0006\u0000\u0000\u0000(\u0000\u0000Zo\tW%|FK_su\u00128%RpLCi\u0012iaZ\u0005!I]k_Xq\u0004\u0000\u0000\u0000@\u0001\u0000\u000f)+R_,g_HZ$8\u0016\u0006Lw%fh\u000f\u00180zhV\fi+ _]57LbFhoW+Z\u0003\u0000\u0000\u0000\u0014\u0000$LL/v\u0011)}7\u000e\u001a]-\t_LwL|~OnO1B\u0007\u000f\u001di\u0002\u0000\u0000\u0000@\u0001\u0000\u0013b3K&e\t{\n\u0002&\u001aP\u000e8x#\u0017\u0017._X+I\\C54U\n\u0002\u0000\u0000\u0000@\u0001\u0000/~S.YLw].Z$\\j!_?nu4z^jy\u0001\u0000\u0000\u0002\u0000uI}g$/\n|\u0000-i_\\O5\u0005\u0000\u0000\u0000\u0000\u0014\u0000\u00007BOU0Iw]\u000b}\u001dCO#\u0001\u0000\u0000\u0000@\u0001\u0000O\nyJ\u000b\u0001>{9|\u001e(\u0001\u0000\u0000\u0000\u0002\u0000\u0007k$/\u0002?\u0007W3\u0007\u0000\u0000\u0000\u0005\u0000`B9\u000b3;S1#\tT\u0011 '{Wet\r\b\u0000\u0000\u0000\u0000\u0014\u0000%gs?w&k\u000b\u0017\u0000\u0000\u0000@\u0001\u0000XC\u001f\u0019\u001dE\u0014\u0011\u001a!\u0000\u0000\u0000@\u0001\u0000Xp/HzlW\u0003vM\u0018\u0010\u0000\u0000\u0000\u0014\u0000&\"\u0015}WI>1\"C/=!\u0017\u0001\u0001\u0000\u0000@\u0001\u0000Xi}g\u0015#o\u0017cg\u001ajp\u0007\u0000\u0000\u0000(\u0000\u0000I\u001f<+\u001f\u0004\u000fU\u0000\u0000\u0000\u0000z.%\u0000&oHg\u0013\u0011\u0000\u0000\u0000\u0002+\u0000>,\tco\u000ex]1&q\u0000\u0000\u0000\u0002\u00000K3E3\b+Y\b\u0018\"\u0000\u0000\u0000\u0000l\u0006\u0005tWwEw=\u000b\u0000\\I\u0017V\u0000\u0000\u0000X\u0001\u0000DL\u001fb~Eg\u001d[\u0000\u0000\u0000\u0000@\u0001\u00007}Mfk\u0019-L\u001c\u001e\t\u0000\u0000\u0000\n\u0000\f|M\u000fpv\bH8\u0011.B\u0001\u0000\u0000\u0000P\u0000\u0000Ikg+f/re#bRyJCcKc\u0006?\u0015\u0000\u0000\u0000(\u0000\u0000I:\u001ebb?.LQ+^&u2\u0015\u001e:xR\f\u0000\u0000\u0000\u0000\u0005\u0000o}g\t+\u0004IE3*=W\u0018\u0014\u0003\u0000\u0000\u0000@\u0001\u0000K;C_Hh\u0018K:8\u0007\u0000\u0000\u0002\u0000a\u0011thu\u0015\u0003z[CO54\u0006\u0001\u0000\u0000\u0000(\u0000\u0000\u001btIw7\u000eeLt_L]1%\\C/\u001e\nnx\u0000\u0000\u0000\n\u0000fn~\u001eBM0IT\u001e\u0000\u0000`k8\f3uM}\u001f6tG{\u001f\u0000\u0000`kX\u0001)tcA\u0000L\u0011@R1.|C\u0000\u0000\u0000@\u0001\u0000Xcs'y\u000fdF\u0003\u0002x;4|~~/\u0000\u0002\u0000p\u001b}v}\u0001L/\u0002\u0001t,\u0017]\u001fjY\u0011\nI\u0004\u0000P\u0000\u0000\u0017\u0014d<}a\u0001x\u001c\u0015vE\u00070\u0006@Rnf\u0015Sgj?r\u000b{\u0012x3C\u0011\u0011\u001a\\\u001a=9{\u0007\u0000(\u0000\u0000e\u0017Go\u0002]) \u00038>\u001b\u0017}oz\u001e\u0003$utWr\\^5W?w~;HJ~1\u000fiKu\r\u0018\u0004\u0000\u0014\u0000@$'&M}vfTZ(\u0000\u0002q\u00113\r5\u0001\u0000;w+\u0010LYh+\\\u001az\u001ee\u0000\u0000@\u0001\u0000+\u000fBL/.g_\t\b(fzMO54\u0010\u00002LP\u0016xL4z\u0002x\u0003\u0000\u0005\u0000f,cW/\u0000k_ry=L7G.\u00030\u001ff}g/~fqL;=L\u0002\u0000\n\u0000XP6 2(dM7)\u001a\u0011Y 4S\u000eVgvs\u001aL\u0015\u0000\u0000(\u0000`F\u001eAvega\u0000G,\b(v<\u0002LnV\u0014x\u001d3\u0004\u0000\u0017!;]Q{1]]\tJ#\u0000\u0000\u0017S_G\t\u0001XiNz\\j|\u0017R(`\u0001b\u0000p3=T\u0004_fz\u001aH\u0000\u0000\u0014\u0000\u0000_n\u0000\u0002\u0002*\u0003Kh_L\u000f\u0006\u0001l\u0019\u0000SG}v\u000b~f\"S\r\u001d\u0001\u0000(\u0000`>\u0018\"\u0007 iWBa[\u0006^<\fF\b'\u0007-j\u0016\u001e3\")C\u0000\u0000\n\u0000Y\u0000\u0011c4\u0003qBm\u0002I;I\u001eY\u0010!me\u0014\u0002*vkC\f1\u0000@\u0001\u0000s\n;N}a\u001e7\u0017\u0003$S-M`:zb\u0000(]ne/h}1E/=,\u00142\u0016\u0000\u0000\u0005\u0000X\u000f\u0001\u0005\\4T\u0004P\u001e3H\u000f|+\u0017[\f3r\u0002\u0000\u0000\u0005\u0000]/%z\u0000R\f\u0017Xk\u001ah:<EK\u0005v:Gn\u0013\u0007\u0000\n\u0000U\u0017\u0000/\u0004f|s53`:BY_l\u0013+\u0000\u0000\u0014\u0000p\u0003wH\u000f\u00003]S\u0003ji\u0018A`kr]\u0001J/^V\u0000V\u0002\u0000\u0000\u0005\u0000\\*+*\"\b\u0007py\u001e)\u0019Sb\u0000%S}'}1E6\b}\u0015\u0005C\u0000\u0014\u0000?x\t\n\u0000WTW*\u0004\u001c*a\u001br>\u0003w)\u000euVF<Q'P\u0010\u0000@\u0001\u0000x\u000b3\u0005\u001f\u0000p\u000bSC\t3\u001eo=1&\u001c9]w@4\u0012\u001aB\u0000\u0000\n\u0000/\u0015\u0000fP\u0004r9]>\u000f\u0003\u0001=}I?s\u0015&dPD\u0000(\u0000\u0000?}0I\u0000J?^jk;6\t\bL<oGU]1}*N\u001aT9i\u0000\u0000\u0005\u0000 #>\u00010C\\\r\u0015J_\r9S+\u0014M+Oo\u0019Hw]\u0001_-b|(\u0000(\u0000`Kd\u0003\u0000f<- znK{q_\tzSoYL'n'\u001d:\u0001\u0000\u0000(&6}\b\u001c\u0000N\u0011\u0000WNM}'d#:V/Cgm\u0001\u0000(\u0000`\u0005\u0000\u0003X\u0006/,utV\u0002IJ.w#V\u0013D\u0017>\u001b|\u0000(\u0000`43%);Sc\u0017I%,{P:vkWLF\u000b+\u0001\u0000P\u0000\u0000\u0000`YtWL\fLo3S1\u0017l\f=4\u0007\u0004@\u0001\u0000\u0000Y'j ^2H/\u00178&0\u0019m/_H:l1~pm?JG3^\bo;\u0012-;39a\u0004\u0000\u0005\u0000\u0000\u0000\u001f\u0017^*?oJ&JZ\u0000\be\u0011 B\bh\u0016kk~4*\u0000L9*F_r+\u0010'{3=\b\u0000\u0005\u0000lO\u0001\u000e\u0000,5L$E.\u0019LX;&>VM+\u0001B\u001e\u001a-QV?8mighw\u001f;{FhtS-V\u0007_\\;Siu>V`]L%B\u0003E\u0001P\u0000\u00168)x\u0001X.L$?7K_&S\u0002h-1OI`\u001a-LdrIa\u001aC\u001a54F\u0015\u0015\u0002k[Zlku\u001d\u001fS\u001d`^_CT\bAej7gZY\u0005\u0000\u0002\u0000V4{R\u0003`Ig1_}W\u0001^'.\u001b\u001dg?-_=3\u001e,\u0000<8m]\u001e/76\u0013\u001a*\u001d<}\u001e]iA}o\nIO5X\u0005\u0000\u0002\u0000#4i\u000e\nX[\t\u00002\u0001^%z33ykC/s6$uEzJpm\u001dmLOR\u0015L(\u0001H\u0002v! 7\u0006\u0000\n\u0000Xe,b\u0004B\u00004}6l[{p3=W\u0004\u001c<W\u0004,Eg@}M}2$j\u0016\u001e\u000b~^\tS\u001e1\\K\u0000P\u0000JUF# \u0002@^|DSo\\\u0013\u001033U\u000f3\u0005\f]\u0016UvS?{\u0002=\u0017D\u0001\u0000\u0014.\u0001\u00077\u0000V/wE3O+vEw\u000f,<$RiU\u0000\u0000\u0005\u0000e!=t;\u000fdCn+b3=tJ\u000fS_Hqc\u0000\u0000\u0005\u0000\\m\u0002fzM3\f~iU\u0015[okGV\u001a6\u0002\\\u0002\\\"x\u0001\u001cu\b e'*3=\u0011XPV\u0000\u0000\u000b8{\u0005\u0018\u0000`/\u001ezS_n|rK\u0002\u000bY_L\u0000(\u0000`Aeoyl\u0013\u0000`:3=1\u0015kM_~\n=\u0002\"\u00003\u0016\u00005Mb%'\u0000,\bp+1w=O\u001f8(r_g\u000b\u0014\u0005\u0000!zf\u0001`\u0011X\u00040}\u001eT(~9\u001a\r\u001b]DI1SQm\u00022qk8\r\u001e+=5\u0015z;\n\u0000SQ=l\u0005\u0001\n\u0000\u0014@f}1u\u000f\u0000,e\u001cLwfsC+X*\bB]vrY2\u000e\u0001o\u0013\u0010\nE\u0019\u000f%UV\f_h\u001a[N8fscia.+oE=KX\u0010XD\u0001\u0000\u001f{\u0010C\"+v|\u0018w\u001f9\u0001`Y:e3\bp '=\nlC_dYN9sD9Y&0Y\u0004c2zh\f\n\u0001XvY6T*\u000fiX>\u0012'4FhtilO\u0010(\u0000`3\u000f=Y|\u0018_/\u0001\u0000,llo>fGOPoRw\u0005?|f8I\n<B\u000e\u001eB\u001a\u0012\u0017l#-\u001bi?._b*><PO/y\u0000w=}1w0Dr\u0000$\u00165w\u0005\\q*\bE{\u0003[5{.\bRCC[\u00056-\u0017]bv4f3\u0006\u000fxd1`2\n\u0000M\u001eNrZI\u0000\u0007\u0000W_k\u0014m[TujRX\u0006w\u0003N\u00137\u0007\u000f=B@96a52m\u001eKK[\u0011\u001a\u0005\u0000TU3=M\u0019\u0000A?NSoWd\u0018pe\u0012C\r}\u001d]\u0003\u000f#tYSw?O]1HC(\u0000'V\u001fz;\u0006q'\u0000\u0000o\r~/\u0001\u0010R\u0010:S]Hd\b.\u001bZo\u0010~h^,\u000bkN\u0001\u0000KS$}K.1\u0006l\u0000\u0000{fz\u0004\u000f.k\r>Zh\u0011d.%\fU\u001f!\u0003$_;]W\u0016*L(0<])bC\u0001\u0000\u0007qW2\u000b3\u0000\u0000\u0000k\u0017k%v.|vd~<:/\u001f.0oVP\u0000,\u001e.\u001bo\u0017\u0016\u0000\u0000\u0000Q,W\u001eM\u0005\u0018@qbz\u000f[q5<\u001b\u0003R\u0000o\u0007\u0000\u0000\u00003SgJ(\"ICc\u0006^^\u0015\u0004ZCzMzSd\u001bYy\u0004'\u0005\u0000\\(g\u001f{])\"\u0007\u0000\u0000\\Li_L(Om>s\bc=&ybeYg@\n\u0000\u001b\u001d7\u001f;3\u0006M\u0000\u0000\u0000\u0018`\u0007z3=tX\u001d<\\5\u001a\u00180GvXL\u0018pQ\u0002^6\u0000\u0000\u0000E\u0015\u0004,\u0017W\u0017\u0019.4tqF\u00044]r\u001ez>bz%Ewq:nW\u0002F\u0012S&\u000f\u001b\b\u0001\u0000\u0000v*\u00062u]4\"@\u0016\u0003* ^\u0005\u001dX[o\u001a~{K\f]g>0\\}/P($Ej55>k\n\u00007\u001a>>:[\u001f\u0000\u0000\u0000+;%}1Jg\u0013K\u0016\u0002?\\i!4\u001dh`ow(-;L\u0007S1P\r;\u001ey,\n\\s\u0000pn\u0016\n\"o\u0019GBRL\u001f9\u000f\u0000\u0000\u0000+M\u001a+\u001a3%T-xLJo?,\u001fm(F]\u0019\u0015\u0003\u001ew%]Nr}0b-?IWhb\u0019#T+H(\u0000*WUEu5\r^Du\fy\u0000_<r}y\u0000\u0001\u0000\u0000X7Se!`0\u001d\u0006|\u00100,\u000b\u000b#\u0011T0%jY{|6\u0016:~:L\u0001\u001f^6\u001c5+{[\u000e\u0014Wi}_rH\u0001\u0000\u0000jg\u0001/{X$|W2\t?G$q*l\u0015%E;\u001c/e\u0002L>FrJ`\u0000;3$k\u0015\b\u001d<i\rKo\u0000\u0000\u0000@Bb\u0000W?H1.\u000b\u0000Ok\u000b)\u0012\u001d+9vRs[G1\u00053}1w:-W\u0002w3]\u0003\u0013\u0000\u0000\u00000j\u000fJNu&n1S/zsm_9'\\L\u0015-Tm\u0001\u0014\u0000t]/\u001bV\u00159\u001e:\u0000\u0000\u0000I]W+\u001a\u0012o<Qd_%ggC?\u0002\u001a][R]_kC\u0001#\u000fWK:So\u0000\u0000\u00002zcoK\u001ejgv/(2~l\f\u0011-\u0002H1P\u0000M3\u0016\u0000\u0000\u0000`\u00051d\u0002R\\\u0007\u000f\u0017\u00057:\u000b3W\u0002L+;}1E/'\u0005E]?5(x\u0001\u0000\u0000\u0000,T?n1w)/_0&H\u001cw\"]1+\u0002\u0002;\u001eO}-\u0000\u0000\u0000\u0000XK\u000e/?E'\u0000\u0000Je\u000b\u0000\u0000\u0000RtfW\u0002=e,AR\n\u0000\u0015J\nK\u000b)+Y\u0002\u0000\u0000\u0000`ae\u0017\r\u0007?\u0017kb&D1]Yla\u0014\u0000dL\u0001\u0000\u0000\u0000`v1IH1sI\u0019[o.OQc@\n\u0000?p?\u0000\u0000\u0000\u0000\u000b\u0016Nz9/\t\b\u0017Lve\u0015C\u0017\u001a~\u0002\u001e]\u0007\u0000\u0000\u00005\u0014HES*\u0016\u0007rc\u0011@z!\u0000\u0003.\u000b\u0000e\t\u0000\u0000\u0000`MK\f?yzL+>\u001e{i\u0001L1\u000f\u0000\u0000\u0000`]~6)\r\u0014\u0000H\\\u0018\u000f\u0004\u0000\u0000\u0000\u0000`B}h@\n\u0000\u0011F\u0012\u0000\u0000\u0000\u0000hb\u0014\u0014\u00007?<z?\u0000\u0000\u0000\u0000`\rE};n\u0015M\u0000d^z\u000bfOG0\u000f\u0000\u0000\u0000\u0000XCiWB/\u00027I;BEm|?6?\u0000\u0000\u0000\u0000`%:\u001f\u0005\u0014\u0000\t~M\u0001S:\u001a\u0016}?\u001f\u0000\u0000\u0000\u000069)\u001e/\u0000rN7{<?\u0000\u0000\u0000\u0000\u0000Xw\u0001@\u0017q\u0001\u001cgK`\u00185\b{r/#\u0007\u0000\u0000\u0000\u0000E>\u0006073\u001f7C\u0007\u000f\u001e\u001aC]g/]@\u000f\u0000u\u00180\u0003:s\u0000\u0000 \u0000IDAT4\u0003/]1}>8u\u0018\u0000[\teH/*m\u0001D?_=:,>\u0000\u0000\n.w\t\"P\u001f*\u001c\u0000\u00003[\\/>/\u0000\u0000Y\u001b=g?\u0012)$H]\u0000\u0000n_\u0000PngM\u001e\u0000\u0000.H\bI\u001a\u000fw\u0004\u0000\u00009\u0000\u0000\u0000\u0000OCz\u0003\u0000\u0000(\u0000\u0000\u0000iI\u001a\u0007}LUn#\u000e\u0000\u0000\u0000\u0005\u0000\u0000\u00000C\u0011?Z\u001f!9\u0013\u0000\u0000\n\u0000\u0000\u0000`~y_\u0002\u0000\u0000\u0014\u0000\u0000\u0000Ly\u0000GI|&+\t\u0000\u0000\u0000\u0005\u0000\u0000\u0000pn\u0007$8\u0012\u0000\u0000\u0000\u0014\u0000\u0000\u0000x3fl\u0005\u0000\u0000\u0002\u0000\u0000\u0000P3\u0000\u0000P\u0000\u0000\u0000\u0000aFL!iPD\u0012\u0000\u0000\u0000\n\u0000\u0000\u0000`.F\u0000M\u0011\u0015\u0000\u0000\u0000P\u0000\u0000\u0000\u00003b9?8\u0000\u0000P\u0000\u0000\u0000\u0000k5zy?\u0000\u0002\u0000@\u0001\u0000\u0000\u0000jl`\re\u0005\u0000\u0000P\u0000\u0000\u0000\u00007z\u001e\u0001h$\u0000\u0000P\u0000\u0000\u0000\u00005/$\u001d7\u0000\u000f\u0000\u0000\u0000\n\u0000\u0000\u0000F\u000fU-ge\u0001\u0000\u0000\u0014\u0000\u0000\u0000mE\u0006\u0002\u001fI\u000f\u0000\u0000\u0005\u0000\u0000\u0000pccS\u0004\b\u0010\u0000\u0000P\u0000\u0000\u0000\u0000gYCQ}.0\u0000\u0000\u0000\n\u0000\u0000\u00007B\u001a2,0\r\u0000\u0000\u0000\n\u0000\u0000\u0000\u0006ri*MY\u0003\u0000\u0000\u0000\u0005\u0000\u0000\u0000p\u0003\u001eRm?.X\u0001\u0000\u0000\u0000\u0005\u0000\u0000\u0000p\u000b/?/?z\\\u0000\u0000\u0000(\u0000\u0000\u0000\u0011\u001aP\u00000c\u001f\u0000\u0000\n\u0000\u0000\u00006L\b\r\u0017R\u001c\u0003\b\u0000\u0000\u0005\u0000\u0000\u0000p_5\n\u0018!W\f\u0000\u0000\u0000\n\u0000\u0000\u0000<\f\u0002\u0000\u0000\n\u0000\u0000\u0000'|$\u0000\u0000P\u0000\u0000\u0000\u0000+e_\u0002\u0011\u0005\u0000\u0000\u0000\u0014\u0000\u0000\u0000\r\f\u001e\u001a#\u0002Fn9\u0000\u0000\u0000\u0014\u0000\u0000\u000054TK\u0001\u0000\u0000\u0005\u0000\u0000\u0000Zc\r+\u0011\u0002\u0000\u0000z.\u0001^?Z\u000e\u001a!|\u0002|\u000ev@: \u0000\\-\u000e\u0014\u00000\u0017\u000f\u001dj\\b\u0017S_\b\u0000`\u0016\u0000A\b\u0017\u0001\u0000\u001cCoL\n@\u0001\u0000\u000e\bB_\u0007\u001e]1iW+F\u0010\u0000fd_9\u0017\u000f1k\u0004\u0000=\u001a2\u001a\u0007:Sa5\u0017\u0005\u0000,x0)\\zv?a\n)>\u0000<7=\u0000jv(\f\u0000\nTW=1\u001e<v]G\u0001`h\u0002<F1\"3I~0<\u0000LIx$9\n\u0010\u0000\u0005\u0007?+*c9\u0005\u0000,{|m6z\f\u0000s\u0018\u0018\f\u0000\u0011m\u0013H5\u0002\u0000F.DW#4p4\u0000N]\u0000\u0000KO]+\u0005\u0000,u\u0010z4\n$\u0001\u001f\u0000b\u000e\u001eW_\u0000`wHh\u0000\u001a_f\u0002n\u0002@O\u0001\u0000\u000b5%&s\u0001\u0000s\u0018C\u0016e\u0019\u0001#\u0000\\|V\u0000\fF@\u0001\u0000j\u0000\u001c*\u0019\u0000n>bNn\"X\u0004N\u0017M\n\u000e\u001c\u001f\u0005\u0000,4 qu<\t\u0003SA\u0000\u0000p}\u00045zd\u0001h\u0011\u0000._c\u0018\u000f\u0000\u0005\u0000,1 \u001c/'3\u001dC\t\u0000Aa>|5\u0000Xol?x\u000b\u000e\u0007 DtO\u0001\u0000\u000bth\b\u001d;\u0010\u0001\u00007\n\n-Wc\u001dp(\u000b\u0015\b\u0000!\\\u0005W{Y\u0000\u001cj\u0016\u0000t\n\u0000XPe\nB'\u0000\u0005ogBr\u0005(\u0001-\u0000O+\u0000@\u0001\u0000r!1\u001e\t\u0000nePI\u0011y\u001b\u0000\u0012l]\u0003\u0002\u0000\u000fKmAv\u001a?)\u0014\u0000ncx\u0002\u0000\u000e5\u0013k\u0015JsW\n\u0000X\u000e+\b@O\u0001B7|}K\u001f\u0000pxZ^u\u001b\u0002\u0000hAI\u0000\n\u0000[4uC\u0016GG\u0001\u0000;b\r\u0013S\u0000\"!Ojd#@\u0000mf\u000e\u0016,\tX\u0001\u00001{IyL\r\u0000P\u0000YK\u000f7X9\u0019(\u0000htT\u0013u`\u00008r\u000b\u000e\u0000\u000fV\u0000<z\u0019c\u0013*\u00005{\"aP\u0002\u0000\u00006{^_kq\u001c\u0007H\u0001\u0000\u000f\b<O\t\u0001j\trwzT\u0000\u0000cFcKrf(\u0000``\u000bnP$d\u0010\u0000`\u001f|^3\u0003\u0000cMG]\u0016\u0014v)\u0000`\u0003DK\u001becR!\b\u0000Bl1\u0015y\"\fE\u0001lj\u000f6El6\u000b\n\u00001By\u0000\u0015Pq\u0003\u0000\u0000p~\fX[\u0001]\u0014\u00000QblAF_#O\u0002\u0000\u0000\\>(\u001b(\u0002p7[\u0000xP\u0000\u0007\t*!\u0000\\0(\u001c\u000f\u0004e\u0000~ZC\u0000\u00009'y\\-\u000b\u00004\n\u0001\u0019\fI/9\u0016\u0016\u0000<Wct\u0013S\u0000\u001cj\u0016\u0001FvT\b\u0003\u0004\u0000\\fXm\u0005\u000055eAu:-g\u0014\u00000p\u0006BJ\u0001bKB\u0019k\u0001`&E\u0006Nx\u0000\u0019Uu\u0019!\u0002\u0000.p~Q\u0017+\u0014\u0000O\u001cj`I>Qw\u0000\u0019[\u0011\u001anDHT\\&D\t\u0000\u0000.1\u0017MG.\u0019\u0005\u0000||<\u001do\u0002\u0016\u0000u\n\u0000K/1K\u0011\u0013\u0000\\p\u0011\u001egy\u0007\u0000\u001fq^sXT;M\u0002\u0000f\u001cx0]h*\t\u0001\r\u001e>\u001c\u0000\u0000\u001fL\n\u0000\u0014\u00009<CA\t\u0001bd\u0010\u0000\\$\b\u001b<N|y8N\u0005\n\u0000X:B:x;YkF(\u0005\u0000\n\u0000(\u00020\u00072\u0000A\u0007\u0000g\u001f5qA\u000f\u0000\u0000X/\u001e<?\u0014\u0000p k\u0010:A\"]\u0000^|\u001e+~e\u0002@\b\u0000dg7ZFpO\u0001\u0000}\u0018k)\u0002,\u0015\u0001 \u0000a\\\u001eX94\u0000,f`{\u0017\u0005\u0000AkWNV\u0000\u0000y.cT\r\n\u0000\u0000C:y\u001a<\u00144\u0000\u001b\u000e\u0012CWe\u0006\t\u000f1J\u0000\u0019\t+&Q\u0002\u0000\u000f\u0011\u001agV&0S\u0000mDHac\u000b4UB\u00008KB=_^\u000fb^Q\u0000xPol?\u000f\u0000P\u0000\r\u0000\u001a\tQU\u0010\u0000p_\u001e\nwT+\u0000\u0000]+\u0000\u001b\u0004c7\f\u0010\u0000!/{&8\u0004w&.\u0007l\u00021p2\u0003\u0004\u0000H\u0004\\\u0000>k\u0016\u0000\n\u0000(1?Y1\u0000L\u0010\u0000|L(ts]Xz\u0000y\u001d&s\tV\u001c\u0010C*3}\u0000Y\u001c\u0005\u0000\u001f\t\u0006=P\\q\u0001Uk{7\u001e<\u000b\u0015&z\u0000:`pJ(\u0001\u0000\u0001->K\\\u0016\u0000X<%4|'&N\"3V\u0001P\u0000\u0006\bI+\u0000y\u0000_\u001d\\/Y\u0013\u0005`\u0000x?EJ\n\u0000\u0005\u0000\\'\nI\u0007w\u0002G\u000b\u0002\u0012\u0002\u0012rs\\I(\u0000x|7~P_\b)\u0000jv\u001c\"\nB\u001dB\u0000@Cz\u001e]Gj\u0011\u0013\u0000!}!\"B#|Q\u0000\u0007<s^p\u0016\u0000,g|i-\u0000l\u0001\u0003\u000f<9\u0017\u0005G}\u0002\u00000@\bT_T0J\b\u0000&4F6uf=2H\u0004\u0000ir/\u0016k:\np?\u0013S\u0000\u0003C\r)\u0013,zd\u000b\u0000[g\f/g3W\u001f\u0000NME\u001e_!uf6HX\u001c|9GBMUi \u0000Y6Ngk\"\u0007\u0000'\"c%5T\u0000\u0007R'#g\n\u0001`\u001coKc\u001bS&.\u0005\f\u0000~HG[N_By\u0014`\u0004(\u0000R\b\rtk\u0006J\b`F\u000f\u001e8\u0016\u0001YH%A\u0002\u0000.zhevJ\b`[\u0012Eh\b\u0000?',1\u0002oNN2S\u0000\u00051rR\u0003@V\u0000\u0000\u001ac\u0004\u0000\u0000~NX)&\u0000Q\u0011?}\u0011\u0012\u0000-\u000fl%V\t,\u0000jtVyQ\u0000\u0005\u001fP6;V\t\u0001`q,\u001b\u0000X]:,0\u0012mhTC4E-`PCK\u0012;}W-qQ\\\u001b\\-I\u0005\u0000\u0000S[l!\u00055r(\u0000i\\;xTpm\f%y\u0014&uE\u000f/gB\u001az$\"\u0001o\t'-V(\u0013S\u0000y}\u001dX\u0004S&6\u001aSp )X\u000f\u0000?2\u001e)\u000b'\u0012\u0002JBC;'t\u0019WYJ\u000b\u0007{\u001eobR\b\u0000~46\u000e+Y\u0001P#\u0014\u001cM\u0001\u0000\u0013\nd\u001a2\"\u0013\u001eL|P\u0012\u0017V-gU<\u001a\u0000.\u001bG\\82G\u0001\u0000g\u000e\u001a#XIi\u00190\u0012u\u001e]-\u001am\r'U2\u0014h\u0000#\"{N\u0002\u00003\u0006C]OXE0\u0000XjQ?q`/\f\u0018_\u0000hqqd\u0005\u0003Y\u00164FV{Q\u0000\u0012I/5fY+c*t~\rc+>6=d[,/Y[Nq\r\u0000^o\u0015P\u0015+|)\u0000<r!\"Y'X\n'iXznj\u00151'\u000b\u0000id-\ts,\u0002\u00000f\b\u001dZZ\rqq|G-a%\u0012,\u0000\bM+aW4d\u000b\u0000\u0005\u0000)Q^cb\u000b\u001a^b;\u001b*\u0014\u0001ph\u0015}2\u0002 \u001b\r+\f]\r=\n\u0000A\u001eV6HLG6Z/mYsr_^\n1c|\u0011X\u0001\u0001\u0000]\u001bS\r(\u0000\u000fR\u0000Xm\u0002qa:L\u0005gxN\\[\u0005\u0000we|Xiu\u000bg\u0001R\u0000Npr^kE\u0007\u000f\\<\u0017\t\u0000H5BM\u0000>C 7T\u0001upf+q4p?\u001e\u0007'j{1B\u0001\u0000\u001f0kV\u0000\u0004j+\u000eA~u\u001b\u00008\u0015\u0000\u0006&<S\u0000;\u00169&\u000e\u001e,\u0001\u0000>EC\n\u001aU%v(W\\^SN\u0000\u0000l[\bOG\u001c\u0000<@|S>!uw7e6\b\u0000\u001a9)0*\u0000v\u0000`yrc)\u0000\u000e5\u00135\u001e.@\u0001`G\u001c\u001bZeC\\\u0000\u0010wLW\r\u0001/b\u0007w\u0011S\u0000{\u000b\u0000\u001b9,\u0014\u0001X\u000bPMUc$5\u0000\u0012\n`\u0006oG'o`\n{)\u0000\u0001cH\u001aUG.tE\u0016\u0000VY!a\"'\u001dG\u0000`k\u000e\b AW\n\u0000xwp\u001a!TWD\u0018a2b7\u0005?(\u0000#>M\u00006iX\u0011DKuyxQ\u0000\u0013\f\u0010\u0007c\u001f\fUPa\u0019Rl`e\u0013\u0018=~G(\u001a\u0000)\u0000l#\u0018\\?\u0007\u000fU\u0013_[%X\u00003E3cH\u0018\u001ajK-\u0015]gL\nc\u0006P\u0007L?}^#B0\u0003lb#[\u0000B\r_jhJ3u&\n\u0014\u0000M\u0011y\u001ag\u001c+!\r3]]g\u0015;\u0016m]mSdn\u0003L\u0000gh\rNoN\bc:-um\u00073S\r=d,u\u0013+\u000b(\u0000l{mc%}\u0019Cj}R1{tsaeK.\u0007T=e,f|%L\u0016\u0000\u0012XD\u0000iVc{Izi1sU\b`\u0002\u0007\u0006IRZ/}\u0017vE*\f\u00167?\bf\u0012S9\"\\';\u00003\u0004`[\u0019pxxC~pP]]>\n\u0001\u0014\u0000Pt\u001cix}qE7Si\u0003py\u0007\u000fURn=}O\u0014\u0000lg{P\u0018\u0000|\u001er3=tE}\u0016\n\u0000!9,\u001bsp}\u001a>Buq1r9pH5<y\u0003\u0015J+\u0004|\u001dC_}'=Ew]Qg&.\n\u0000\u001f%jF\u0006_6\u0018dS}B}o\u00018Ki\u001b\u000f\u001e\"\u0000O)~t?,\u0000`>\u0000>\b\n\u0000ody|~q\u0017=\n\u0001D\u0014\u0000Vzgu\u0006\u000b\f/#lziG<wm\\j\\\u0017\u0000\u000bFh`u.[;=!WU\u0001\u0000*O]?`ep=E:.Ys//m7\u0013gOF\"D(\f`#:\tpgW\nT\u0015.>XTI/zqg\u0002\f3B:=4NvQ\u0001\u0011\u000062=b?75d<OS\u0000$kd8+.\u00063\f3=)P\u0001\u0000l8f;\u0014(\u0000hps\u000e\u0012\u0004R_k\u0005\u0000^>R96\"m4\u0000V\u001f\u000eNs;;v\u001dK\u0001`\u001d7t\u0002De\u0019\u001fj[IQfSrp)g\u001d_+\\#\u0000k7:1%\u001cZ4+\u0005\u000f\u0010\u001ebc\u0000SAjn\r_<3NrK\u0000`1\u0000|q++,\u0005\u0007Bv.2I\u0007Ce\u0007Ky^^\u0017?\u0019xj3e|\u0006\u001aZo/BMTL(\u0000,6\b~\u001a$S\f\u00126\u001f5yh]\\\r`Lg\u000b/RPu\u0002XoRc'_J\u001dB\u0001`YjrK`o5?~G.W\u0015\"]3A\u001b\u0000\u000eYzw3(\u0000,f`0I\u00155xv\u001ed\u0019\f\u0012\u001f0xh%\f-\u001a<H\u0014\u000027=\u0004IFVT%:\u0019\u001d[2:-\u0013?-7\u0011cp\u001d<4T\u0006;n-P>2=\u0015\ru~\u0007t\u001f\u0005-q)\u00006Wy\u001c#0%\u0010hq^}~W>e]\u0001`:3c\u001f^\u0005$Ac7#!\u0000,.ie\u001f<T#'MV\u0004&qe(\u00006)Bq8zz;\u0007T4\u00039.\u0015\u0007\u0018\u0016cx4C.\u000bKV=\r\u0001`\u001e/m2PKW.\u0005[&c\r=UA[\u001b\rAvAOqm\u000e5\u0004?]}(;pcAcxl\u0004\u0005$_?L\u0019j2cR\u0000I20zgt\u0006\u000e\u0012S\b{?\u0017\u00127%{9UB-8du\u001aY\u0005`B\u0015~j;fo\u0002pFh\b?v\u0001\u001a\\\u000byF$\u0015@1\t\u0012\u0005\u0000s\u001bMO\rP\u000e\u0014\u0000n5H(1\u000ft2\u0005~jk'+B\u0013\u0000`%q\u001b\u001ff\u001f\u0006|-\u0000W\b!\b<HTgx8d~Fk\u001c7r{W56\u001ey<kaj\r\u001c\b\u001d\n#\u0002Vv}\u0015\u0000\u00176u'\u001a:.O^xmsu}c0x\u0016X+\r.\u00189D\u000b\u0001`%+\u00002\u0013(\u0000\\=\u0001\u0018\n\"\u0006yW/vd\"d,\u0002pi\u0006\u0007\u0002\u0000x<f/U\u0014\u0000\u0000\fA-bA#I|\u0014m4TQ\u0010`c\u0003`P%X\\g\u0015'W\u0002n\u0004%B7[w{\u0006\u001f#'%|h\f`eZ\u00031\u0018/u\u0006[<9\u0000f2ba]E\u0002\u0006\u001aK\t\u00115B\u00039w6Fc\u0000\u0005|r)qX\u0016yP\u0000ZX9yI\u0006g\u000f\u0007O?5;\u0002yS\u0017Z#\u0000\u001c\u000e>\u0000\u000407\u001e-d|ZdR\u0000pd\t`\u0016y;oH.\u000fW\u0005\u0014g5j6C\u0000x84\u0003`6\u0007{\u0017hF\u0001k\u0010\u0007D-sY%d8]C\f(\u001f\u0012Fux\u0013!fk\u0000\u0015\u0019\u0017V\u0000Ns\u0000pI\u0011<\u0013\u0000Cug{X8p\u0007shi\u001aG^jpF\u00157\u0000&d_C[{%\\K\u0004Fm{\u001f2fl=r)RmT?D'\u0018\u0011V1\u000f\u0014wpb\u0001`VrIC0DnvC\u0001b\u0003D\r\u0007a=!}\u0019{*qaX\"\u0002,s\u001cr&\u0001p1#\u0004[\u0000\u0016\u0019\u000byoO@K\u0001\u0012<B/Ine\u0012\u0011/\n\u0006)<wl<R\u0015S1\u00193\u00007\"(%^#4Fh\u0015\u0014\u0000frCC \u000fH,vK\r3Tz\u000b\n/%tCU]3&S\u0016\u0003\f\u0000\\m<R\u001ec}S\u0000p b\u0011\u001anD(1X6\u0002By\u0011G\u0000+^uw=U\u000e}gz2\u0004\n=\u0005E5(P\u0000?tD\r\u001d^z\u001aq&c\u0017ZV\u0000,ulm4)0O3\u0004\u0006)2y\u0011Q\u00008{`jPiV3\u0017|cg!=b@}1=t2\u001a\u0000\\\"\u0001\u0017J}cck0ARV:TbY\u001fi{:T#=O\u0000\u001d_yW\u0010Q\u00008 a\u0000X!\u001dj{H/].%-sYV\u0000X\t\u001a\u0016!\u0018\u0001p^x{DNmHL\u0001GLK\u0016\u0018O3K\u0019$JK0Kb\u0005\u001cjsa\u0006g.d\u0000\u0000\u001bDIDATdvJ W4Q\u00008w1\u0006AJ>%}\u001a::?!\u0002@;:li\u001e+m\u0000{4\u0002`5\u0005H-\u0014\u0000hPu\u00025\r\u00125BuAsu}!_}J\u0004e\u001d!;?Q=+Jlq;#.:3\u0015s`-m@#SoRb9T]_H*gnj\u0018D?\u0005\u0011rz\u0017}pDM1 +\r\u001e8FjG\u0015z3n|@\u0004Zh\fKj\u0019Ie;1K9_m\u001c_XHpW#o>35\u001ax\u0007\u0018N?\u0015\u0007wK\u0011LvX\u0002\u0004F\u0016q\u0002a:o+:^V\u0005nW\u0012|`\"\"..#Vz&;v\u0003=0\u0002BCY\u0011Gx1yCY+Bz2\u000e\n^\u001d^%1t_}5z(|js^jl\u00018+!\u001b\u0011\u0018-rjV\u0019T9\u0013S_\u0011~om=\u0000,gv K{D#Du 1\u00024{bAG~~c{C\r\b\u0016\u0017O'\u00063\u0019kKr}>\u001fQ\u001c\u0013||\u0018ve>4F\u0018q{#\nq10KjC;}No\u0001[{\u000em\u0015\u0000<\u0003\u001b?\u0017\u001cw2f\u001aO\u0019,v\r\u001e\u001a\u0018~\u0012OI\u001fj\u00168F|\u0018?^9\r\u0012\\\u0015\u000f\u00123;$}\u001ds 2,\u0000Evyag`NIkh\u0018EVkhM~R9\u0011zU7H(!A\\%\u0013AKexcj]12@\u001e:c]'\u001abze\u0003MPN}\u001d[\u0007\r:x=p2@Y\u0004\f\u0010\fU\u0007]1^\u001dWYm?X\u001d\u00140+_1*\tr\u00110\u0017iK{\u001f' 1CT+z\u0012Y1\u0017J\rb!iX& wl`\u0005mr{\u0011~~c=D\u0012\u0013n\u001c$\u0018\"\u0014z0&=T\u001a2;SO\u00001CGh/ni#g&[NS\u0001@ec0HVY&7B-\u00132sT+3KlQf\u0004U\u0019K\u0017b{\rn\\l;S)Mf1p\u0006wj^}he#ycDy1p;m\u0015\u00007*\u0000X6~\u0019\\$sz=?\u0013GvNo\u0014xa}Cc\u001357]cm:{M\r\u0012T\t-\u0011c8|Fz\u001a]6YiJ8xY\u0006$nes[7\u0011O\u0014\u0001V\u0000rt|dx\u001e[pDy4\u0015\u0007\u001bm\u0003:RkZ@/x\u000f\rk;\u001d\u0014KC8g}C7\u0012\u0011/5\u000414f\u0007V\u0000delk\u000bY#V%}\u0019,Z7?\u0010\t\u001by\u001274\u0017vZO(z1plF6ny\u0019COleq1\r\u0012uok>}\u001abv=C|\t}\u001er?G7\u001aL\u0011\u0001;\u0004uE[r\u001b9/Q$%{gw~vX\u0002?\"\u0007XD}\":<\u001ed\u0001L$\u0012\u001a\u0012[~!:\u000fXMM0MkVM\u001f]7~v?3I<l=f\u0010Ib:\u0002i0i0.5@1v=sv\u001fs3h/.cFk\u001co\u0003\u0013Kq5\u000b|o@6\bn\\'~\u001b\u000e47S&C}qN\u0000k.dI\"{/-d>]Cvf=\u0001 \r4j[I<A\u001e:<\u001er\u0007kN9>ou^KM~'V_\r\u0000=\u0019mlSv\r{M}~7:Tr\u0019c\tvFfBZ\u0002FcKv^\u0016m04q\u0002SL\u001aAZ\u0010A\t@\u001eP\u0011a7:\u0001i\u000bE7k\rDD\u000e!m=TXoZ)We%d\u0003Zeum;x\n{o;\u0001`\u0000dMM\u0012K(Up>\r\u0012R;3OICj\t]?\u0002\rf0AJLMhpkS\rKN&n\u001d\u000flMlHVx\u0016eml\u001f\u0012\u0002;kkb\u001d\u0017h?1BKmWz@WWmi\b]\u0006\u0004~ddSB%\u0005v4)! LrO$ tGo;f[\u00189\u001f\u0003]\u000f'|\u0007^m\u0004{h\u0014:I\u0006LSdsu`2-9\u0001`j\u001d\u0006JsA(3)P\"kH=OIU\fv\u000b&\u0013\u0000\u001em'zBo\u0001Z{\u0007`}O\u000f\u001a=\\\\y%U{\u0011J\u001bpFu/^j?\u0016\u001c\u0012CR\u000fc6%~\u0002m`0I.c'tS\u000f@>\u00118`-\t\u0003\u0001{\u0015\u0000XY`\u0016m\u0016\u0000m\u0019\t.MiCmU\u0012m{kv~\t$]t\u0010\u0013&\r\u000f?r@MA_^\u0019[cu\u001d^vMASBcF?}ur\u000bb.w7\u0002g0~~9;#!{8;>\u00000G[m\\USenZ74Vf:;UAWa\u0000T\u001eQ\u000e\u001b{+MS/||J\u0012\b\u0014\u0000\u0004&P]U6\u0000\u001cucfC\u001d\u0003#[h\u0015\u001e-{S\u001b63\u0000\u0000\t'\u0001\rL\u0012\u00000Gm.F\u0017\t{*s\u0006\u00051>svjhyV\u0016/eWxe\u0000\twL\u0012I/\u001e\u001a\u0000]\b=J\r\n[dJ>.AF+%>GJKtl^\u0000T}\b\u0017!=\u0012A\\/=|=/\u001b-J\r\u0015;h\u0001$\u0000v z/\u0011b\u001d\u0001`Bsn]wVi0}|5onJlO\b{\u0000xs\r\u0015\u000f\rvUT\\\u000bb\u0016Ueg=\\5S8\u0016sK\u0010p\u0016\u001ckk9USk{ZCz/l#ZS\u0014C\r0X,bWp\u0003v:\f\u0003A\u0005_P\u001d\u0015mS_\u001cCnT$o.L?~0\u001di\u001a\u0007GK\u0000$\u0000\u0015$J\t}j\u00165A\u0005$?9K\u001f\bto\r\u00164\u000eC0%\u0003V\u0014s\\R;_\u0006C*\u001dRak{O*9\u0000r,N%K]JJo\u000fXW<T9+\n`a\u000b\u001c(cC;>#%]\u001b\u000bf'k`fOU\u0003\"N^j({lzx\nGoI]\u000e}\u001c\u0006\u001b}#V\u0010I\u0002O\u0000JHUzHa\b=$~fn*\u000f\u0010YB\u0000S]]uHm:\u0016\u0013d\u001a0\u001e+\u0016\u00194\\\u0000\bIcDX]Pdz\u0018f)xP\u000b\u0012\u00009YHSu\rI.N/\u0000'\u0007\u0005[H:f`Jv|'\u0016\u001cKa\fI\u000fC\u001cx/}gD}RK\u0006\u001ck\u0014}%n\u0011Y\u001d\u0017$\u0000n/Lm?;wE\u0003XjICf\u001azeg\u0007>T\u00058ZU`&DO\u0000a2T\u001d\u0011x\u0018T\u0004\u0003\u000eG]k\u0015my\u0001`/%>q\u0012t|'\u0002Bf }%=\u000eI\u0019\u00021r~C>#`glP$\u0011\u000b8\u0002\u0010\u0002\u0000\u0000\u0016>3c6VoY(\u0007\u0001W\u00056~y)\\\u0016x\rgo?^<z\u0007\u001a\fdl^?%>hC\u001a \u0003X\u0002-W!\u000eCg\u0002gZ\u0015T\u001dR]!i$`6Qsv\u0015\u0017>oWPo:\u0002P\rH\\JAD\u0000elm}s\u0000\u000f~=\u0017f\u001az*Nq\u0017$\u0000n\u000bcBv\u0010\u0000:=t,\u000eS\u000f\u001dK!\u001dKSr}%\u001ezRY8vwd0\u0014[\u000f\u001a2\rTvY02E\u0000Xb9B5,\u0003g[\u0010hP\u001eCOCJNu,|wHu3IuZ\u0004Vecm\u001dwf\u001a\u001f\u0014jhMId\\\u000fTsuQ\u001b,k*ZO/:\u0007C<\u001f?T\u001e\b/<\u001dA\u0016\nH\u0000g&\t\u000f\b3$j\u001d\u0014\u001dKp\u0018V\u001b\u001dDT'\u001b&\u0002<$m\u001e\u0006ZU@.\u0011pi\u0003mnY\u001bJ:\u0018$\u0000\u001c_-2\u0018O^\u0003X;\u000fTCzVp4\u0018wXKL\u0001jP%\u0003\u001e\u0007*'?_t,r\u001c\t%B\u0000r\u0004\u0000\t;\u001b\u0001%8/\u0013\u0000+_D[;\\\\\u000f}grM\u0001B\u0013f\b~xK2\u001d\u0006OFU[9I{JH\u0007Ok:O\b$\u0000f2I\b<&!71,G\u000f=\u0007%[d\u00019F\u000fjL\u000f\nWQ3<JCj0`\u001e\t\u0000I\u000fa\u001e/\u001a!%R\u00006XatXI\u0019T\u0005Y<r\t-tCJ:\f}jp_\u0011VPOe^\u0011n\u0006M\u0012\u0011zyl;%\u000f\u0000\u001b!=*\u000f:\f\u001aZ\u0006,\u0019`S\u001f^\u0011O?}^:\u0015RyY<7j{$T\u0000x\\ol<\u001c(\u0003=]_AS~3s9\u0010Z\u0015\u0011<$qV\u0005\fFU*\u001b5skr\r\u0007sScT\u0004\f>(4zi\u0000\b`^_wi]\u0012\u0000|XkzD:WeH%lU-:m\u0011#7\u001e\f0\u0004c:Z?\u0002\u00006fk;kz\u0018l6Yct'\u0016?\u001e3\u0012:s\u000fC`Z\u0018}+\u000fTe6i\u0016}_1\u0016\u0003aD7Gkqoq\u0004N\b\u0001l%=^?\u0017\u0000`mg/suU[.JsUaL/;K\u0000`.\t\u0000]D\u0015g`\u0000[\tr]f`q\f=XW\u0005</=\u0015\u001dsm)Ww.\u001ez..Z4-\u00003\bW\u0000\u0012\u00003YlzH\u0013+4\u0010\rB\u0001\u0004h\u0001S\u000f*lInIgY,:~MW_Ek}ij\t\\Y-gy%\u00003J\u0000H,su\u0005\u0000\u0019B\u0000\bI\u001a:\u0005c\u0000\u0000[K\u0006+j\u001aZ##Ur\u0007\u0000\u0002rih\u0000\u0000\u0000\u001bsrk\tW'J0cZ\u0001Kq^\u0018\u001e\u001b\u001fky#\u00003L\u0000>eB\u0000\u0000*G{g\u0003\u0016{49+\u0016\u001e4B#_wx\\\u0018w-\u0000\u0012\u0000?2H_rIU-\u0004\u00000\u0003\n=b\u0007]^/q\u001cL\fq,]}fgm\u001f{c7ka~\u0000\u0003)\tMb'\u0016{F\u000f\u001d<\u001flq\u001bZesv:vn\u0003e\u0002`RCmO_6\u0000\b\u0006]fX\nP{\u001f\u0019\u0017\u0001\u0003\u0018F\u000f}]z_/a<Kun_\u0007\u0000Pi\t\u0000cv}'f8\u0005<Ya`\n|rO\u0002rF4X{&3\u0004, \u0001@\u0005z*s\u001ftw\u001abO`\u001a\u0013[0\u0004t*-$\u001f\u0001@\u0002\u0000\u0000<cqyHd3Y[L''\tBmwkU\"tE\u0004_\u001ek\b\u0016\u0001\u0004\u0000\u0000`\u000eF{Z\u0007z\f0i${ ~z.zx.I\t\u0000J\r\u0006}PR]\u0019\u0017Z\u0015\u0000@\u0002\u0000\u0000B1`y}3~%\bzU@2%:1`O~{?\u001f5T<\b\u001az\u0015Ku#\rJ3\u0010\u0017c\u0000 \u0001\u0000\u0000m|Msk\u001e@dJ\bH>`\u0001{gNG\rLy\u0006SgD\u000b\r3\u0011{\u0002\u001f\u0000H\u0000\u0000\u0000V(=v/x!\u001e\u000f\u0010\f?#\t4\r\u0003J=Gtx[v\u0000 \u0001\u0000\u0000l~{V&;\t\u0006\u0000\u001b\u001f'aw>\u0017\u0017;\u0000p\u001b\u0000\u0000`\u0000{\u001a;_op}'\u0000\u0000\u0000\u0000\u0000({e$6/\u0000 \u0001\u0000\u0000\u0000\u000b\u001fgQ5\n=g\u0004U<\u0000@\u0002\u0000\u0000\u0000\u0000\u001f\u0000P;oo\u000fI*.\u0000\u0000\t\u0000\u0000\u0000\u0000|2y>eW\tv\u0001\u0004\u0000\u0000\u0000\u0000>%\u001a\u0002}~J\u001a?\u0000\u0000\u0000\u0000\u0000g\u0005]o\u001ej]rk?\u0000\u0000\u0000\u0000\u0000'qc\u0000U\u0000\u0007A\u0000p?;>\u0002\u0000\u0000~\f`LdE* B:?\u0000\u0000\u0000\u0000\u0000-z\u0017\rv\u001a?\u0000\u0000\u0000\u0000\u0000\r\bm\b\u0001\u0004\u0000\u0000\u0000\u0000n\u001b\u001c\u0000-4\u0001\u0004\u0000\u0000\u0000\u0000\u0004\u0000\u0000\u0000\u0000\u0000\u0000 \u0001\u0000\u0000\u0000\u0000\u0000\u0000H\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0012\u0000\u0000\u0000\u0000\u0000\u0000\u0004\u0000\u0000\u0000\u0000\u0000\u0000 \u0001\u0000\u0000\u0000\u0000\u0000\u0000H\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0012\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000$\u0000\u0000\u0000\u0000\u0000\u0000\u0000\t\u0000\u0000\u0000\u0000\u0000\u0000@\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000$\u0000\u0000\u0000\u0000\u0000\u0000\u0000\t\u0000\u0000\u0000\u0000\u0000\u0000@\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0012\u0000\u0000\u0000\u0000\u0000\u0000\u0004\u0000\u0000\u0000\u0000\u0000\u0000 \u0001\u0000\u0000\u0000\u0000\u0000\u0000H\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0012\u0000\u0000\u0000\u0000\u0000\u0000\u0004\u0000\u0000\u0000\u0000\u0000\u0000 \u0001\u0000\u0000\u0000\u0000\u0000\u0000H\u0000\u0000\u0000\u0000\u0000\u0000@\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0012\u0000\u0000\u0000\u0000\u0000\u0000\u0004\u0000\u0000\u0000\u0000\u0000\u0000 \u0001\u0000\u0000\u0000\u0000\u0000\u0000H\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0012\u0000\u0000\u0000\u0000\u0000\u0000\u0004\u0000\u0000\u0000\u0000\u0000\u0000 \u0001\u0000\u0000\u0000\u0000\u0000\u0000H\u0000\u0000\u0000\u0000\u0000\u0000@\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000$\u0000\u0000\u0000\u0000\u0000\u0000\u0000\t\u0000\u0000\u0000\u0000\u0000\u0000pk\u000f\u0012v\u0003w\u0000\u0000\u0000\u0000IENDB`"}}},"includes":["lychee.ui.sprite.Background"],"exports":"function(lychee, global, attachments) {\n\n\tconst _TEXTURE    = attachments[\"png\"];\n\tconst _CONFIG     = attachments[\"json\"].buffer;\n\tconst _Background = lychee.import('lychee.ui.sprite.Background');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tstates.color   = '#050a0d';\n\t\tstates.texture = _TEXTURE;\n\t\tstates.map     = _CONFIG.map;\n\t\tstates.states  = _CONFIG.states;\n\t\tstates.state   = 'default';\n\t\tstates.width   = _CONFIG.width;\n\t\tstates.height  = _CONFIG.height;\n\n\n\t\t_Background.call(this, states);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Background.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.ui.sprite.Background';\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ui.Layer":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.ui.Layer","url":"/libraries/lychee/source/ui/Layer.js"}],"blob":{"attaches":{},"requires":["lychee.ui.Entity"],"includes":["lychee.event.Emitter"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\tconst _Entity  = lychee.import('lychee.ui.Entity');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_effect = function(effect) {\n\n\t\tif (effect instanceof Object) {\n\n\t\t\tif (\n\t\t\t\ttypeof effect.update === 'function'\n\t\t\t\t&& typeof effect.render === 'function'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _validate_entity = function(entity) {\n\n\t\tif (entity instanceof Object) {\n\n\t\t\tif (\n\t\t\t\ttypeof entity.update === 'function'\n\t\t\t\t&& typeof entity.render === 'function'\n\t\t\t\t&& typeof entity.shape === 'number'\n\t\t\t\t&& typeof entity.isAtPosition === 'function'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _project_layer = function(mode) {\n\n\t\tlet grid       = this.grid;\n\t\tlet projection = this.projection;\n\n\n\t\tif (mode === true) {\n\n\t\t\tthis.entities.forEach(function(entity) {\n\n\t\t\t\tlet w = entity.width;\n\t\t\t\tlet h = entity.height;\n\t\t\t\tlet d = entity.depth;\n\t\t\t\tlet x = entity.position.x;\n\t\t\t\tlet y = entity.position.y;\n\t\t\t\tlet z = entity.position.z;\n\n\n\t\t\t\tif (projection === Composite.PROJECTION.tile) {\n\n\t\t\t\t\tw = w * grid.width;\n\t\t\t\t\th = h * grid.height;\n\t\t\t\t\td = d * grid.depth;\n\t\t\t\t\tx = x * grid.width;\n\t\t\t\t\ty = y * grid.height;\n\t\t\t\t\tz = z * grid.depth;\n\n\t\t\t\t} else if (projection === Composite.PROJECTION.isometry) {\n\n\t\t\t\t\tw = w * grid.width;\n\t\t\t\t\th = h * grid.height;\n\t\t\t\t\td = d * grid.depth;\n\t\t\t\t\tx = (x - y) * grid.width;\n\t\t\t\t\ty = (x + y) * (grid.height / 2);\n\t\t\t\t\tz = z * grid.depth;\n\n\t\t\t\t}\n\n\n\t\t\t\tentity.width      = w;\n\t\t\t\tentity.height     = h;\n\t\t\t\tentity.depth      = d;\n\t\t\t\tentity.position.x = x;\n\t\t\t\tentity.position.y = y;\n\t\t\t\tentity.position.z = z;\n\n\t\t\t});\n\n\t\t} else {\n\n\t\t\tthis.entities.forEach(function(entity) {\n\n\t\t\t\tlet w = entity.width;\n\t\t\t\tlet h = entity.height;\n\t\t\t\tlet d = entity.depth;\n\t\t\t\tlet x = entity.position.x;\n\t\t\t\tlet y = entity.position.y;\n\t\t\t\tlet z = entity.position.z;\n\n\n\t\t\t\tif (projection === Composite.PROJECTION.tile) {\n\n\t\t\t\t\tw = w / grid.width;\n\t\t\t\t\th = h / grid.height;\n\t\t\t\t\td = d / grid.depth;\n\t\t\t\t\tx = x / grid.width;\n\t\t\t\t\ty = y / grid.height;\n\t\t\t\t\tz = z / grid.depth;\n\n\t\t\t\t} else if (projection === Composite.PROJECTION.isometry) {\n\n\t\t\t\t\tw = w / grid.width;\n\t\t\t\t\th = h / grid.height;\n\t\t\t\t\td = d / grid.depth;\n\t\t\t\t\tx = (y / grid.height) + (x / (2 * grid.width));\n\t\t\t\t\ty = (y / grid.height) - (x / (2 * grid.width));\n\t\t\t\t\tz = z / grid.depth;\n\n\t\t\t\t}\n\n\n\t\t\t\tentity.width      = w;\n\t\t\t\tentity.height     = h;\n\t\t\t\tentity.depth      = d;\n\t\t\t\tentity.position.x = x;\n\t\t\t\tentity.position.y = y;\n\t\t\t\tentity.position.z = z;\n\n\t\t\t});\n\n\t\t}\n\n\t};\n\n\tconst _on_relayout = function() {\n\n\t\tif (this.__project === true) {\n\n\t\t\t_project_layer.call(this, true);\n\n\t\t\tthis.__project = false;\n\n\t\t} else {\n\n\t\t\t_project_layer.call(this, false);\n\t\t\t_project_layer.call(this, true);\n\n\t\t\tthis.__project = false;\n\n\t\t}\n\n\n\t\tif (this.__relayout === true) {\n\n\t\t\tlet hwidth  = this.width  / 2;\n\t\t\tlet hheight = this.height / 2;\n\t\t\tlet hdepth  = this.depth  / 2;\n\n\t\t\tfor (let e = 0, el = this.entities.length; e < el; e++) {\n\n\t\t\t\tlet entity = this.entities[e];\n\t\t\t\tif (typeof entity.trigger === 'function') {\n\t\t\t\t\tentity.trigger('relayout');\n\t\t\t\t}\n\n\n\t\t\t\tlet boundx = Math.abs(entity.position.x + this.offset.x);\n\t\t\t\tlet boundy = Math.abs(entity.position.y + this.offset.y);\n\t\t\t\tlet boundz = Math.abs(entity.position.z + this.offset.z);\n\n\t\t\t\tif (entity.shape === _Entity.SHAPE.circle) {\n\t\t\t\t\tboundx += entity.radius;\n\t\t\t\t\tboundy += entity.radius;\n\t\t\t\t\tboundz += entity.radius;\n\t\t\t\t} else if (entity.shape === _Entity.SHAPE.rectangle) {\n\t\t\t\t\tboundx += entity.width  / 2;\n\t\t\t\t\tboundy += entity.height / 2;\n\t\t\t\t\tboundz += entity.depth  / 2;\n\t\t\t\t}\n\n\t\t\t\thwidth  = Math.max(hwidth,  boundx);\n\t\t\t\thheight = Math.max(hheight, boundy);\n\t\t\t\thdepth  = Math.max(hdepth,  boundz);\n\n\t\t\t}\n\n\n\t\t\tthis.width  = hwidth  * 2;\n\t\t\tthis.height = hheight * 2;\n\t\t\tthis.depth  = hdepth  * 2;\n\n\t\t}\n\n\t};\n\n\tconst _on_scroll = function(id, direction, position, delta) {\n\n\t\tif (this.visible === false) return null;\n\n\n\t\tlet triggered = null;\n\t\tlet args      = [ id, direction, {\n\t\t\tx: position.x - this.offset.x,\n\t\t\ty: position.y - this.offset.y\n\t\t}, delta ];\n\n\n\t\tlet entity = this.getEntity(null, args[2]);\n\t\tif (entity !== null) {\n\n\t\t\tif (typeof entity.trigger === 'function') {\n\n\t\t\t\targs[2].x -= entity.position.x;\n\t\t\t\targs[2].y -= entity.position.y;\n\n\t\t\t\tlet result = entity.trigger('scroll', args);\n\t\t\t\tif (result === true) {\n\t\t\t\t\ttriggered = entity;\n\t\t\t\t} else if (result !== false) {\n\t\t\t\t\ttriggered = result;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn triggered;\n\n\t};\n\n\tconst _on_touch = function(id, position, delta) {\n\n\t\tif (this.visible === false) return null;\n\n\n\t\tlet triggered = null;\n\t\tlet args      = [ id, {\n\t\t\tx: position.x - this.offset.x,\n\t\t\ty: position.y - this.offset.y\n\t\t}, delta ];\n\n\n\t\tlet entity = this.getEntity(null, args[1]);\n\t\tif (entity !== null) {\n\n\t\t\tif (typeof entity.trigger === 'function') {\n\n\t\t\t\targs[1].x -= entity.position.x;\n\t\t\t\targs[1].y -= entity.position.y;\n\n\t\t\t\tlet result = entity.trigger('touch', args);\n\t\t\t\tif (result === true) {\n\t\t\t\t\ttriggered = entity;\n\t\t\t\t} else if (result !== false) {\n\t\t\t\t\ttriggered = result;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn triggered;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.width  = typeof states.width  === 'number' ? states.width  : 0;\n\t\tthis.height = typeof states.height === 'number' ? states.height : 0;\n\t\tthis.depth  = typeof states.depth === 'number'  ? states.depth  : 0;\n\t\tthis.radius = typeof states.radius === 'number' ? states.radius : 0;\n\n\t\tthis.alpha      = 1;\n\t\tthis.effects    = [];\n\t\tthis.entities   = [];\n\t\tthis.grid       = { width: 0, height: 0, depth: 0 };\n\t\tthis.offset     = { x: 0, y: 0, z: 0 };\n\t\tthis.position   = { x: 0, y: 0, z: 0 };\n\t\tthis.projection = Composite.PROJECTION.pixel;\n\t\tthis.shape      = _Entity.SHAPE.rectangle;\n\t\tthis.visible    = true;\n\n\t\tthis.__map      = {};\n\t\tthis.__project  = true;\n\t\tthis.__relayout = true;\n\n\n\t\tthis.setAlpha(states.alpha);\n\t\tthis.setEntities(states.entities);\n\t\tthis.setGrid(states.grid);\n\t\tthis.setOffset(states.offset);\n\t\tthis.setProjection(states.projection);\n\t\tthis.setPosition(states.position);\n\t\tthis.setRelayout(states.relayout);\n\t\tthis.setVisible(states.visible);\n\n\n\t\t_Emitter.call(this);\n\n\t\tstates = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('scroll',   _on_scroll,   this);\n\t\tthis.bind('touch',    _on_touch,    this);\n\t\tthis.bind('relayout', _on_relayout, this);\n\n\t};\n\n\n\tComposite.PROJECTION = {\n\t\tpixel:    0,\n\t\ttile:     1,\n\t\tisometry: 2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.entities instanceof Array) {\n\n\t\t\t\tlet entities = [];\n\t\t\t\tlet map      = {};\n\n\t\t\t\tfor (let be = 0, bel = blob.entities.length; be < bel; be++) {\n\t\t\t\t\tentities.push(lychee.deserialize(blob.entities[be]));\n\t\t\t\t}\n\n\n\t\t\t\tif (blob.map instanceof Object) {\n\n\t\t\t\t\tfor (let bid in blob.map) {\n\n\t\t\t\t\t\tlet index = blob.map[bid];\n\t\t\t\t\t\tif (typeof index === 'number') {\n\t\t\t\t\t\t\tmap[bid] = index;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\t\tlet id = null;\n\t\t\t\t\tfor (let mid in map) {\n\n\t\t\t\t\t\tif (map[mid] === e) {\n\t\t\t\t\t\t\tid = mid;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (id !== null) {\n\t\t\t\t\t\tthis.setEntity(id, entities[e]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.addEntity(entities[e]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (blob.project === false) {\n\t\t\t\tthis.__project = false;\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ui.Layer';\n\n\t\t\tlet states = {};\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.width  !== 0) states.width  = this.width;\n\t\t\tif (this.height !== 0) states.height = this.height;\n\t\t\tif (this.depth !== 0)  states.depth  = this.depth;\n\t\t\tif (this.radius !== 0) states.radius = this.radius;\n\n\n\t\t\tif (this.grid.width !== 0 || this.grid.height !== 0 || this.grid.depth !== 0) {\n\n\t\t\t\tstates.grid = {};\n\n\t\t\t\tif (this.grid.width !== 0)  states.grid.width  = this.grid.width;\n\t\t\t\tif (this.grid.height !== 0) states.grid.height = this.grid.height;\n\t\t\t\tif (this.grid.depth !== 0)  states.grid.depth  = this.grid.depth;\n\n\t\t\t}\n\n\t\t\tif (this.offset.x !== 0 || this.offset.y !== 0 || this.offset.z !== 0) {\n\n\t\t\t\tstates.offset = {};\n\n\t\t\t\tif (this.offset.x !== 0) states.offset.x = this.offset.x;\n\t\t\t\tif (this.offset.y !== 0) states.offset.y = this.offset.y;\n\t\t\t\tif (this.offset.z !== 0) states.offset.z = this.offset.z;\n\n\t\t\t}\n\n\t\t\tif (this.position.x !== 0 || this.position.y !== 0 || this.position.z !== 0) {\n\n\t\t\t\tstates.position = {};\n\n\t\t\t\tif (this.position.x !== 0) states.position.x = this.position.x;\n\t\t\t\tif (this.position.y !== 0) states.position.y = this.position.y;\n\t\t\t\tif (this.position.z !== 0) states.position.z = this.position.z;\n\n\t\t\t}\n\n\t\t\tif (this.alpha !== 1)                               states.alpha      = this.alpha;\n\t\t\tif (this.__project !== true)                        blob.project      = this.__project;\n\t\t\tif (this.projection !== Composite.PROJECTION.pixel) states.projection = this.projection;\n\t\t\tif (this.__relayout !== true)                       states.relayout   = this.__relayout;\n\t\t\tif (this.visible !== true)                          states.visible    = this.visible;\n\n\n\t\t\tif (this.entities.length > 0) {\n\t\t\t\tblob.entities = this.entities.map(lychee.serialize);\n\t\t\t}\n\n\n\t\t\tif (blob.entities instanceof Array && Object.keys(this.__map).length > 0) {\n\n\t\t\t\tblob.map = Object.map(this.__map, function(val, key) {\n\n\t\t\t\t\tlet index = this.entities.indexOf(val);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\treturn index;\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t}, this);\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = states;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.visible === false) return;\n\n\n\t\t\tlet alpha    = this.alpha;\n\t\t\tlet position = this.position;\n\t\t\tlet offset   = this.offset;\n\n\n\t\t\tlet ox = position.x + offsetX + offset.x;\n\t\t\tlet oy = position.y + offsetY + offset.y;\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t}\n\n\n\t\t\tlet entities = this.entities;\n\t\t\tfor (let en = 0, enl = entities.length; en < enl; en++) {\n\t\t\t\tentities[en].render(renderer, ox, oy);\n\t\t\t}\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let ef = 0, efl = effects.length; ef < efl; ef++) {\n\t\t\t\teffects[ef].render(renderer, offsetX, offsetY);\n\t\t\t}\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t}\n\n\n\t\t\tif (lychee.debug === true) {\n\n\t\t\t\tlet bx      = position.x + offsetX;\n\t\t\t\tlet by      = position.y + offsetY;\n\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\tlet hheight = this.height / 2;\n\n\n\t\t\t\trenderer.drawBox(\n\t\t\t\t\tbx - hwidth,\n\t\t\t\t\tby - hheight,\n\t\t\t\t\tbx + hwidth,\n\t\t\t\t\tby + hheight,\n\t\t\t\t\t'#ff00ff',\n\t\t\t\t\tfalse,\n\t\t\t\t\t1\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet entities = this.entities;\n\t\t\tfor (let en = 0, enl = entities.length; en < enl; en++) {\n\t\t\t\tentities[en].update(clock, delta);\n\t\t\t}\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let ef = 0, efl = effects.length; ef < efl; ef++) {\n\n\t\t\t\tlet effect = effects[ef];\n\t\t\t\tif (effect.update(this, clock, delta) === false) {\n\t\t\t\t\tthis.removeEffect(effect);\n\t\t\t\t\tefl--;\n\t\t\t\t\tef--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tquery: function(query) {\n\n\t\t\tquery = typeof query === 'string' ? query : null;\n\n\n\t\t\tif (query !== null) {\n\n\t\t\t\tlet tmp    = query.split(' > ');\n\t\t\t\tlet entity = this.getEntity(tmp[0].trim());\n\t\t\t\tif (entity !== null) {\n\n\t\t\t\t\tfor (let t = 1, tl = tmp.length; t < tl; t++) {\n\n\t\t\t\t\t\tentity = entity.getEntity(tmp[t].trim());\n\n\t\t\t\t\t\tif (entity === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn entity;\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tisAtPosition: function(position) {\n\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tif (position !== null) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tlet ax = position.x;\n\t\t\t\t\tlet ay = position.y;\n\t\t\t\t\tlet bx = this.position.x;\n\t\t\t\t\tlet by = this.position.y;\n\n\n\t\t\t\t\tlet shape = this.shape;\n\t\t\t\t\tif (shape === _Entity.SHAPE.circle) {\n\n\t\t\t\t\t\tlet dist = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n\t\t\t\t\t\tif (dist < this.radius) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (shape === _Entity.SHAPE.rectangle) {\n\n\t\t\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\t\t\tlet hheight = this.height / 2;\n\t\t\t\t\t\tlet colX    = (ax >= bx - hwidth)  && (ax <= bx + hwidth);\n\t\t\t\t\t\tlet colY    = (ay >= by - hheight) && (ay <= by + hheight);\n\n\n\t\t\t\t\t\treturn colX && colY;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\n\t\t\talpha = typeof alpha === 'number' ? alpha : null;\n\n\n\t\t\tif (alpha !== null) {\n\n\t\t\t\tthis.alpha = Math.min(Math.max(alpha, 0), 1);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taddEffect: function(effect) {\n\n\t\t\teffect = _validate_effect(effect) ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.effects.push(effect);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffect: function(effect) {\n\n\t\t\teffect = _validate_effect(effect) ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.effects.splice(index, 1);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffects: function() {\n\n\t\t\tlet effects = this.effects;\n\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\teffects[e].update(this, Infinity, 0);\n\t\t\t\tthis.removeEffect(effects[e]);\n\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\taddEntity: function(entity) {\n\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet index = this.entities.indexOf(entity);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.entities.push(entity);\n\n\t\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetEntity: function(id, entity) {\n\n\t\t\tid     = typeof id === 'string'            ? id     : null;\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (id !== null && entity !== null && this.__map[id] === undefined) {\n\n\t\t\t\tthis.__map[id] = entity;\n\t\t\t\tthis.entities.push(entity);\n\n\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetEntity: function(id, position) {\n\n\t\t\tid        = typeof id === 'string'    ? id       : null;\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tlet found = null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet num = parseInt(id, 10);\n\n\t\t\t\tif (this.__map[id] !== undefined) {\n\t\t\t\t\tfound = this.__map[id];\n\t\t\t\t} else if (isNaN(num) === false) {\n\t\t\t\t\tfound = this.entities[num] || null;\n\t\t\t\t}\n\n\t\t\t} else if (position !== null) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tfor (let e = this.entities.length - 1; e >= 0; e--) {\n\n\t\t\t\t\t\tlet entity = this.entities[e];\n\t\t\t\t\t\tif (entity.visible === false) continue;\n\n\t\t\t\t\t\tif (entity.isAtPosition(position) === true) {\n\t\t\t\t\t\t\tfound = entity;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\t\tremoveEntity: function(entity) {\n\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tlet index = this.entities.indexOf(entity);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.entities.splice(index, 1);\n\t\t\t\t\tfound = true;\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let id in this.__map) {\n\n\t\t\t\t\tif (this.__map[id] === entity) {\n\n\t\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t\t\tfound = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (found === true) {\n\n\t\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn found;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetEntities: function(entities) {\n\n\t\t\tentities = entities instanceof Array ? entities : null;\n\n\n\t\t\tlet all = true;\n\n\t\t\tif (entities !== null) {\n\n\t\t\t\tlet filtered = [];\n\n\t\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\t\tlet entity = entities[e];\n\t\t\t\t\tlet index  = filtered.indexOf(entity);\n\t\t\t\t\tif (index === -1) {\n\t\t\t\t\t\tfiltered.push(entity);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tall = false;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.entities = filtered;\n\n\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn all;\n\n\t\t},\n\n\t\tremoveEntities: function() {\n\n\t\t\tlet entities = this.entities;\n\n\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\tentities.splice(e, 1);\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetGrid: function(grid) {\n\n\t\t\tgrid = grid instanceof Object ? grid : null;\n\n\n\t\t\tif (grid !== null) {\n\n\t\t\t\tthis.grid.width  = typeof grid.width === 'number'  ? grid.width  : this.grid.width;\n\t\t\t\tthis.grid.height = typeof grid.height === 'number' ? grid.height : this.grid.height;\n\t\t\t\tthis.grid.depth  = typeof grid.depth === 'number'  ? grid.depth  : this.grid.depth;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetOffset: function(offset) {\n\n\t\t\toffset = offset instanceof Object ? offset : null;\n\n\n\t\t\tif (offset !== null) {\n\n\t\t\t\tthis.offset.x = typeof offset.x === 'number' ? offset.x : this.offset.x;\n\t\t\t\tthis.offset.y = typeof offset.y === 'number' ? offset.y : this.offset.y;\n\t\t\t\tthis.offset.z = typeof offset.z === 'number' ? offset.z : this.offset.z;\n\n\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetPosition: function(position) {\n\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tif (position !== null) {\n\n\t\t\t\tthis.position.x = typeof position.x === 'number' ? position.x : this.position.x;\n\t\t\t\tthis.position.y = typeof position.y === 'number' ? position.y : this.position.y;\n\t\t\t\tthis.position.z = typeof position.z === 'number' ? position.z : this.position.z;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetProjection: function(projection) {\n\n\t\t\tprojection = lychee.enumof(Composite.PROJECTION, projection) ? projection : null;\n\n\n\t\t\tif (projection !== null) {\n\n\t\t\t\tthis.projection = projection;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetRelayout: function(relayout) {\n\n\t\t\trelayout = typeof relayout === 'boolean' ? relayout : null;\n\n\n\t\t\tif (relayout !== null) {\n\n\t\t\t\tthis.__relayout = relayout;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetVisible: function(visible) {\n\n\t\t\tvisible = typeof visible === 'boolean' ? visible : null;\n\n\n\t\t\tif (visible !== null) {\n\n\t\t\t\tthis.visible = visible;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Layer":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.app.Layer","url":"/libraries/lychee/source/app/Layer.js"}],"blob":{"attaches":{},"requires":["lychee.app.Entity"],"includes":["lychee.event.Emitter"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\tconst _Entity  = lychee.import('lychee.app.Entity');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_effect = function(effect) {\n\n\t\tif (effect instanceof Object) {\n\n\t\t\tif (\n\t\t\t\ttypeof effect.update === 'function'\n\t\t\t\t&& typeof effect.render === 'function'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _validate_entity = function(entity) {\n\n\t\tif (entity instanceof Object) {\n\n\t\t\tif (\n\t\t\t\ttypeof entity.update === 'function'\n\t\t\t\t&& typeof entity.render === 'function'\n\t\t\t\t&& typeof entity.shape === 'number'\n\t\t\t\t&& typeof entity.isAtPosition === 'function'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _project_layer = function(mode) {\n\n\t\tlet grid       = this.grid;\n\t\tlet projection = this.projection;\n\n\n\t\tif (mode === true) {\n\n\t\t\tthis.entities.forEach(function(entity) {\n\n\t\t\t\tlet w = entity.width;\n\t\t\t\tlet h = entity.height;\n\t\t\t\tlet d = entity.depth;\n\t\t\t\tlet x = entity.position.x;\n\t\t\t\tlet y = entity.position.y;\n\t\t\t\tlet z = entity.position.z;\n\n\n\t\t\t\tif (projection === Composite.PROJECTION.tile) {\n\n\t\t\t\t\tw = w * grid.width;\n\t\t\t\t\th = h * grid.height;\n\t\t\t\t\td = d * grid.depth;\n\t\t\t\t\tx = x * grid.width;\n\t\t\t\t\ty = y * grid.height;\n\t\t\t\t\tz = z * grid.depth;\n\n\t\t\t\t} else if (projection === Composite.PROJECTION.isometry) {\n\n\t\t\t\t\tw = w * grid.width;\n\t\t\t\t\th = h * grid.height;\n\t\t\t\t\td = d * grid.depth;\n\t\t\t\t\tx = (x - y) * grid.width;\n\t\t\t\t\ty = (x + y) * (grid.height / 2);\n\t\t\t\t\tz = z * grid.depth;\n\n\t\t\t\t}\n\n\n\t\t\t\tentity.width      = w;\n\t\t\t\tentity.height     = h;\n\t\t\t\tentity.depth      = d;\n\t\t\t\tentity.position.x = x;\n\t\t\t\tentity.position.y = y;\n\t\t\t\tentity.position.z = z;\n\n\t\t\t});\n\n\t\t} else {\n\n\t\t\tthis.entities.forEach(function(entity) {\n\n\t\t\t\tlet w = entity.width;\n\t\t\t\tlet h = entity.height;\n\t\t\t\tlet d = entity.depth;\n\t\t\t\tlet x = entity.position.x;\n\t\t\t\tlet y = entity.position.y;\n\t\t\t\tlet z = entity.position.z;\n\n\n\t\t\t\tif (projection === Composite.PROJECTION.tile) {\n\n\t\t\t\t\tw = w / grid.width;\n\t\t\t\t\th = h / grid.height;\n\t\t\t\t\td = d / grid.depth;\n\t\t\t\t\tx = x / grid.width;\n\t\t\t\t\ty = y / grid.height;\n\t\t\t\t\tz = z / grid.depth;\n\n\t\t\t\t} else if (projection === Composite.PROJECTION.isometry) {\n\n\t\t\t\t\tw = w / grid.width;\n\t\t\t\t\th = h / grid.height;\n\t\t\t\t\td = d / grid.depth;\n\t\t\t\t\tx = (y / grid.height) + (x / (2 * grid.width));\n\t\t\t\t\ty = (y / grid.height) - (x / (2 * grid.width));\n\t\t\t\t\tz = z / grid.depth;\n\n\t\t\t\t}\n\n\n\t\t\t\tentity.width      = w;\n\t\t\t\tentity.height     = h;\n\t\t\t\tentity.depth      = d;\n\t\t\t\tentity.position.x = x;\n\t\t\t\tentity.position.y = y;\n\t\t\t\tentity.position.z = z;\n\n\t\t\t});\n\n\t\t}\n\n\t};\n\n\tconst _on_relayout = function() {\n\n\t\tif (this.__project === true) {\n\n\t\t\t_project_layer.call(this, true);\n\n\t\t\tthis.__project = false;\n\n\t\t} else {\n\n\t\t\t_project_layer.call(this, false);\n\t\t\t_project_layer.call(this, true);\n\n\t\t\tthis.__project = false;\n\n\t\t}\n\n\n\t\tif (this.__relayout === true) {\n\n\t\t\tlet hwidth  = this.width  / 2;\n\t\t\tlet hheight = this.height / 2;\n\t\t\tlet hdepth  = this.depth  / 2;\n\n\t\t\tfor (let e = 0, el = this.entities.length; e < el; e++) {\n\n\t\t\t\tlet entity = this.entities[e];\n\t\t\t\tif (typeof entity.trigger === 'function') {\n\t\t\t\t\tentity.trigger('relayout');\n\t\t\t\t}\n\n\n\t\t\t\tlet boundx = Math.abs(entity.position.x + this.offset.x);\n\t\t\t\tlet boundy = Math.abs(entity.position.y + this.offset.y);\n\t\t\t\tlet boundz = Math.abs(entity.position.z + this.offset.z);\n\n\t\t\t\tif (entity.shape === _Entity.SHAPE.circle) {\n\t\t\t\t\tboundx += entity.radius;\n\t\t\t\t\tboundy += entity.radius;\n\t\t\t\t\tboundz += entity.radius;\n\t\t\t\t} else if (entity.shape === _Entity.SHAPE.rectangle) {\n\t\t\t\t\tboundx += entity.width  / 2;\n\t\t\t\t\tboundy += entity.height / 2;\n\t\t\t\t\tboundz += entity.depth  / 2;\n\t\t\t\t}\n\n\t\t\t\thwidth  = Math.max(hwidth,  boundx);\n\t\t\t\thheight = Math.max(hheight, boundy);\n\t\t\t\thdepth  = Math.max(hdepth,  boundz);\n\n\t\t\t}\n\n\n\t\t\tthis.width  = hwidth  * 2;\n\t\t\tthis.height = hheight * 2;\n\t\t\tthis.depth  = hdepth  * 2;\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.width  = typeof states.width  === 'number' ? states.width  : 0;\n\t\tthis.height = typeof states.height === 'number' ? states.height : 0;\n\t\tthis.depth  = typeof states.depth === 'number'  ? states.depth  : 0;\n\t\tthis.radius = typeof states.radius === 'number' ? states.radius : 0;\n\n\t\tthis.alpha      = 1;\n\t\tthis.effects    = [];\n\t\tthis.entities   = [];\n\t\tthis.grid       = { width: 0, height: 0, depth: 0 };\n\t\tthis.offset     = { x: 0, y: 0, z: 0 };\n\t\tthis.position   = { x: 0, y: 0, z: 0 };\n\t\tthis.projection = Composite.PROJECTION.pixel;\n\t\tthis.shape      = _Entity.SHAPE.rectangle;\n\t\tthis.visible    = true;\n\n\t\tthis.__map      = {};\n\t\tthis.__project  = true;\n\t\tthis.__relayout = true;\n\n\n\t\tthis.setAlpha(states.alpha);\n\t\tthis.setEntities(states.entities);\n\t\tthis.setGrid(states.grid);\n\t\tthis.setOffset(states.offset);\n\t\tthis.setProjection(states.projection);\n\t\tthis.setPosition(states.position);\n\t\tthis.setRelayout(states.relayout);\n\t\tthis.setVisible(states.visible);\n\n\n\t\t_Emitter.call(this);\n\n\t\tstates = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('relayout', _on_relayout, this);\n\n\t};\n\n\n\tComposite.PROJECTION = {\n\t\tpixel:    0,\n\t\ttile:     1,\n\t\tisometry: 2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.entities instanceof Array) {\n\n\t\t\t\tlet entities = [];\n\t\t\t\tlet map      = {};\n\n\t\t\t\tfor (let be = 0, bel = blob.entities.length; be < bel; be++) {\n\t\t\t\t\tentities.push(lychee.deserialize(blob.entities[be]));\n\t\t\t\t}\n\n\n\t\t\t\tif (blob.map instanceof Object) {\n\n\t\t\t\t\tfor (let bid in blob.map) {\n\n\t\t\t\t\t\tlet index = blob.map[bid];\n\t\t\t\t\t\tif (typeof index === 'number') {\n\t\t\t\t\t\t\tmap[bid] = index;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\t\tlet id = null;\n\t\t\t\t\tfor (let mid in map) {\n\n\t\t\t\t\t\tif (map[mid] === e) {\n\t\t\t\t\t\t\tid = mid;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (id !== null) {\n\t\t\t\t\t\tthis.setEntity(id, entities[e]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.addEntity(entities[e]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (blob.project === false) {\n\t\t\t\tthis.__project = false;\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.app.Layer';\n\n\t\t\tlet states = {};\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.width  !== 0) states.width  = this.width;\n\t\t\tif (this.height !== 0) states.height = this.height;\n\t\t\tif (this.depth !== 0)  states.depth  = this.depth;\n\t\t\tif (this.radius !== 0) states.radius = this.radius;\n\n\n\t\t\tif (this.grid.width !== 0 || this.grid.height !== 0 || this.grid.depth !== 0) {\n\n\t\t\t\tstates.grid = {};\n\n\t\t\t\tif (this.grid.width !== 0)  states.grid.width  = this.grid.width;\n\t\t\t\tif (this.grid.height !== 0) states.grid.height = this.grid.height;\n\t\t\t\tif (this.grid.depth !== 0)  states.grid.depth  = this.grid.depth;\n\n\t\t\t}\n\n\t\t\tif (this.offset.x !== 0 || this.offset.y !== 0 || this.offset.z !== 0) {\n\n\t\t\t\tstates.offset = {};\n\n\t\t\t\tif (this.offset.x !== 0) states.offset.x = this.offset.x;\n\t\t\t\tif (this.offset.y !== 0) states.offset.y = this.offset.y;\n\t\t\t\tif (this.offset.z !== 0) states.offset.z = this.offset.z;\n\n\t\t\t}\n\n\t\t\tif (this.position.x !== 0 || this.position.y !== 0 || this.position.z !== 0) {\n\n\t\t\t\tstates.position = {};\n\n\t\t\t\tif (this.position.x !== 0) states.position.x = this.position.x;\n\t\t\t\tif (this.position.y !== 0) states.position.y = this.position.y;\n\t\t\t\tif (this.position.z !== 0) states.position.z = this.position.z;\n\n\t\t\t}\n\n\t\t\tif (this.alpha !== 1)                               states.alpha      = this.alpha;\n\t\t\tif (this.__project !== true)                        blob.project        = this.__project;\n\t\t\tif (this.projection !== Composite.PROJECTION.pixel) states.projection = this.projection;\n\t\t\tif (this.__relayout !== true)                       states.relayout   = this.__relayout;\n\t\t\tif (this.visible !== true)                          states.visible    = this.visible;\n\n\n\t\t\tif (this.entities.length > 0) {\n\t\t\t\tblob.entities = this.entities.map(lychee.serialize);\n\t\t\t}\n\n\n\t\t\tif (blob.entities instanceof Array && Object.keys(this.__map).length > 0) {\n\n\t\t\t\tblob.map = Object.map(this.__map, function(val, key) {\n\n\t\t\t\t\tlet index = this.entities.indexOf(val);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\treturn index;\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t}, this);\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = states;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.visible === false) return;\n\n\n\t\t\tlet alpha    = this.alpha;\n\t\t\tlet position = this.position;\n\t\t\tlet offset   = this.offset;\n\n\n\t\t\tlet ox = position.x + offsetX + offset.x;\n\t\t\tlet oy = position.y + offsetY + offset.y;\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t}\n\n\n\t\t\tlet entities = this.entities;\n\t\t\tfor (let en = 0, enl = entities.length; en < enl; en++) {\n\t\t\t\tentities[en].render(renderer, ox, oy);\n\t\t\t}\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let ef = 0, efl = effects.length; ef < efl; ef++) {\n\t\t\t\teffects[ef].render(renderer, offsetX, offsetY);\n\t\t\t}\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t}\n\n\n\t\t\tif (lychee.debug === true) {\n\n\t\t\t\tlet bx      = position.x + offsetX;\n\t\t\t\tlet by      = position.y + offsetY;\n\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\tlet hheight = this.height / 2;\n\n\n\t\t\t\trenderer.drawBox(\n\t\t\t\t\tbx - hwidth,\n\t\t\t\t\tby - hheight,\n\t\t\t\t\tbx + hwidth,\n\t\t\t\t\tby + hheight,\n\t\t\t\t\t'#ffff00',\n\t\t\t\t\tfalse,\n\t\t\t\t\t1\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet entities = this.entities;\n\t\t\tfor (let en = 0, enl = entities.length; en < enl; en++) {\n\t\t\t\tentities[en].update(clock, delta);\n\t\t\t}\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let ef = 0, efl = effects.length; ef < efl; ef++) {\n\n\t\t\t\tlet effect = effects[ef];\n\t\t\t\tif (effect.update(this, clock, delta) === false) {\n\t\t\t\t\tthis.removeEffect(effect);\n\t\t\t\t\tefl--;\n\t\t\t\t\tef--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tquery: function(query) {\n\n\t\t\tquery = typeof query === 'string' ? query : null;\n\n\n\t\t\tif (query !== null) {\n\n\t\t\t\tlet tmp    = query.split(' > ');\n\t\t\t\tlet entity = this.getEntity(tmp[0].trim());\n\t\t\t\tif (entity !== null) {\n\n\t\t\t\t\tfor (let t = 1, tl = tmp.length; t < tl; t++) {\n\n\t\t\t\t\t\tentity = entity.getEntity(tmp[t].trim());\n\n\t\t\t\t\t\tif (entity === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn entity;\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tisAtPosition: function(position) {\n\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tif (position !== null) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tlet ax = position.x;\n\t\t\t\t\tlet ay = position.y;\n\t\t\t\t\tlet bx = this.position.x;\n\t\t\t\t\tlet by = this.position.y;\n\n\n\t\t\t\t\tlet shape = this.shape;\n\t\t\t\t\tif (shape === _Entity.SHAPE.circle) {\n\n\t\t\t\t\t\tlet dist = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n\t\t\t\t\t\tif (dist < this.radius) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (shape === _Entity.SHAPE.rectangle) {\n\n\t\t\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\t\t\tlet hheight = this.height / 2;\n\t\t\t\t\t\tlet colX    = (ax >= bx - hwidth)  && (ax <= bx + hwidth);\n\t\t\t\t\t\tlet colY    = (ay >= by - hheight) && (ay <= by + hheight);\n\n\n\t\t\t\t\t\treturn colX && colY;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\n\t\t\talpha = typeof alpha === 'number' ? alpha : null;\n\n\n\t\t\tif (alpha !== null) {\n\n\t\t\t\tthis.alpha = Math.min(Math.max(alpha, 0), 1);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taddEffect: function(effect) {\n\n\t\t\teffect = _validate_effect(effect) ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.effects.push(effect);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffect: function(effect) {\n\n\t\t\teffect = _validate_effect(effect) ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.effects.splice(index, 1);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffects: function() {\n\n\t\t\tlet effects = this.effects;\n\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\teffects[e].update(this, Infinity, 0);\n\t\t\t\tthis.removeEffect(effects[e]);\n\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\taddEntity: function(entity) {\n\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet index = this.entities.indexOf(entity);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.entities.push(entity);\n\n\t\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetEntity: function(id, entity) {\n\n\t\t\tid     = typeof id === 'string'            ? id     : null;\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (id !== null && entity !== null && this.__map[id] === undefined) {\n\n\t\t\t\tthis.__map[id] = entity;\n\t\t\t\tthis.entities.push(entity);\n\n\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetEntity: function(id, position) {\n\n\t\t\tid       = typeof id === 'string'     ? id       : null;\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tlet found = null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet num = parseInt(id, 10);\n\n\t\t\t\tif (this.__map[id] !== undefined) {\n\t\t\t\t\tfound = this.__map[id];\n\t\t\t\t} else if (isNaN(num) === false) {\n\t\t\t\t\tfound = this.entities[num] || null;\n\t\t\t\t}\n\n\t\t\t} else if (position !== null) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tfor (let e = this.entities.length - 1; e >= 0; e--) {\n\n\t\t\t\t\t\tlet entity = this.entities[e];\n\t\t\t\t\t\tif (entity.visible === false) continue;\n\n\t\t\t\t\t\tif (entity.isAtPosition(position) === true) {\n\t\t\t\t\t\t\tfound = entity;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\t\tremoveEntity: function(entity) {\n\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tlet index = this.entities.indexOf(entity);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.entities.splice(index, 1);\n\t\t\t\t\tfound = true;\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let id in this.__map) {\n\n\t\t\t\t\tif (this.__map[id] === entity) {\n\n\t\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t\t\tfound = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (found === true) {\n\n\t\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn found;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetEntities: function(entities) {\n\n\t\t\tentities = entities instanceof Array ? entities : null;\n\n\n\t\t\tlet all = true;\n\n\t\t\tif (entities !== null) {\n\n\t\t\t\tlet filtered = [];\n\n\t\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\t\tlet entity = entities[e];\n\t\t\t\t\tlet index  = filtered.indexOf(entity);\n\t\t\t\t\tif (index === -1) {\n\t\t\t\t\t\tfiltered.push(entity);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tall = false;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.entities = filtered;\n\n\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn all;\n\n\t\t},\n\n\t\tremoveEntities: function() {\n\n\t\t\tlet entities = this.entities;\n\n\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\tentities.splice(e, 1);\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetGrid: function(grid) {\n\n\t\t\tgrid = grid instanceof Object ? grid : null;\n\n\n\t\t\tif (grid !== null) {\n\n\t\t\t\tthis.grid.width  = typeof grid.width === 'number'  ? grid.width  : this.grid.width;\n\t\t\t\tthis.grid.height = typeof grid.height === 'number' ? grid.height : this.grid.height;\n\t\t\t\tthis.grid.depth  = typeof grid.depth === 'number'  ? grid.depth  : this.grid.depth;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetOffset: function(offset) {\n\n\t\t\toffset = offset instanceof Object ? offset : null;\n\n\n\t\t\tif (offset !== null) {\n\n\t\t\t\tthis.offset.x = typeof offset.x === 'number' ? offset.x : this.offset.x;\n\t\t\t\tthis.offset.y = typeof offset.y === 'number' ? offset.y : this.offset.y;\n\t\t\t\tthis.offset.z = typeof offset.z === 'number' ? offset.z : this.offset.z;\n\n\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetPosition: function(position) {\n\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tif (position !== null) {\n\n\t\t\t\tthis.position.x = typeof position.x === 'number' ? position.x : this.position.x;\n\t\t\t\tthis.position.y = typeof position.y === 'number' ? position.y : this.position.y;\n\t\t\t\tthis.position.z = typeof position.z === 'number' ? position.z : this.position.z;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetProjection: function(projection) {\n\n\t\t\tprojection = lychee.enumof(Composite.PROJECTION, projection) ? projection : null;\n\n\n\t\t\tif (projection !== null) {\n\n\t\t\t\tthis.projection = projection;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetRelayout: function(relayout) {\n\n\t\t\trelayout = typeof relayout === 'boolean' ? relayout : null;\n\n\n\t\t\tif (relayout !== null) {\n\n\t\t\t\tthis.__relayout = relayout;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetVisible: function(visible) {\n\n\t\t\tvisible = typeof visible === 'boolean' ? visible : null;\n\n\n\t\t\tif (visible !== null) {\n\n\t\t\t\tthis.visible = visible;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.enn.Genome":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.ai.enn.Genome","url":"/libraries/lychee/source/ai/enn/Genome.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.genes = [];\n\n\t\tthis.__map = {};\n\n\n\t\tthis.setGenes(states.genes);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.genes instanceof Array) {\n\n\t\t\t\tlet genes = blob.genes;\n\t\t\t\tlet map   = {};\n\n\n\t\t\t\tif (blob.map instanceof Object) {\n\n\t\t\t\t\tfor (let bid in blob.map) {\n\n\t\t\t\t\t\tlet index = blob.map[bid];\n\t\t\t\t\t\tif (typeof index === 'number') {\n\t\t\t\t\t\t\tmap[bid] = index;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let g = 0, gl = genes.length; g < gl; g++) {\n\n\t\t\t\t\tlet id = null;\n\t\t\t\t\tfor (let mid in map) {\n\n\t\t\t\t\t\tif (map[mid] === g) {\n\t\t\t\t\t\t\tid = mid;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (id !== null) {\n\t\t\t\t\t\tthis.setGene(id, genes[g]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.addGene(genes[g]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet blob = {};\n\n\n\t\t\tif (this.genes.length > 0) {\n\t\t\t\tblob.genes = this.genes.map(lychee.serialize);\n\t\t\t}\n\n\n\t\t\tif (blob.genes instanceof Array && Object.keys(this.__map).length > 0) {\n\n\t\t\t\tblob.map = Object.map(this.__map, function(val, key) {\n\n\t\t\t\t\tlet index = this.genes.indexOf(val);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\treturn index;\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t}, this);\n\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.ai.enn.Genome',\n\t\t\t\t'arguments':   [],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\taddGene: function(gene) {\n\n\t\t\tgene = gene instanceof Object ? gene : null;\n\n\n\t\t\tif (gene !== null) {\n\n\t\t\t\tlet index = this.genes.indexOf(gene);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.genes.push(gene);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetGene: function(id, gene) {\n\n\t\t\tid   = typeof id === 'string' ? id   : null;\n\t\t\tgene = gene instanceof Object ? gene : null;\n\n\n\t\t\tif (id !== null && gene !== null && this.__map[id] === undefined) {\n\n\t\t\t\tthis.__map[id] = gene;\n\n\t\t\t\tlet result = this.addGene(gene);\n\t\t\t\tif (result === true) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetGene: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tlet found = null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tif (this.__map[id] !== undefined) {\n\t\t\t\t\tfound = this.__map[id];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\t\tremoveGene: function(gene) {\n\n\t\t\tgene = gene instanceof Object ? gene : null;\n\n\n\t\t\tif (gene !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tlet index = this.genes.indexOf(gene);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.genes.splice(index, 1);\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\n\n\t\t\t\tfor (let id in this.__map) {\n\n\t\t\t\t\tif (this.__map[id] === gene) {\n\n\t\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t\t\tfound = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn found;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetGenes: function(genes) {\n\n\t\t\tgenes = genes instanceof Object ? genes : null;\n\n\n\t\t\tlet all = true;\n\n\t\t\tif (genes !== null) {\n\n\t\t\t\tfor (let g = 0, gl = genes.length; g < gl; g++) {\n\n\t\t\t\t\tlet result = this.addGene(genes[g]);\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tall = false;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn all;\n\n\t\t},\n\n\t\tremoveGenes: function() {\n\n\t\t\tlet genes = this.genes;\n\n\t\t\tfor (let g = 0, gl = genes.length; g < gl; g++) {\n\n\t\t\t\tthis.removeGene(genes[g]);\n\n\t\t\t\tgl--;\n\t\t\t\tg--;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ui.Sprite":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.ui.Sprite","url":"/libraries/lychee/source/ui/Sprite.js"}],"blob":{"attaches":{},"includes":["lychee.ui.Entity"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Entity = lychee.import('lychee.ui.Entity');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _start_animation = function(settings) {\n\n\t\tlet duration = typeof settings.duration === 'number' ? settings.duration : 1000;\n\t\tlet frame    = typeof settings.frame === 'number'    ? settings.frame    : 0;\n\t\tlet frames   = typeof settings.frames === 'number'   ? settings.frames   : 25;\n\t\tlet loop     = settings.loop === true;\n\n\n\t\tlet animation = this.__animation;\n\n\t\tanimation.start    = null;\n\t\tanimation.active   = true;\n\t\tanimation.duration = duration;\n\t\tanimation.frames   = frames;\n\t\tanimation.loop     = loop;\n\n\t\tthis.frame = frame;\n\n\t};\n\n\tconst _stop_animation = function() {\n\n\t\tlet animation = this.__animation;\n\n\t\tanimation.active = false;\n\n\t\tthis.frame = 0;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.frame   = 0;\n\t\tthis.texture = null;\n\n\t\tthis.__animation = {\n\t\t\tactive:   false,\n\t\t\tstart:    null,\n\t\t\tframes:   0,\n\t\t\tduration: 0,\n\t\t\tloop:     false\n\t\t};\n\t\tthis.__map = {\n\t\t\t'default': [],\n\t\t\t'active':  []\n\t\t};\n\n\n\t\tthis.setTexture(states.texture);\n\t\tthis.setMap(states.map);\n\n\t\tdelete states.texture;\n\t\tdelete states.map;\n\n\n\t\t_Entity.call(this, states);\n\n\t\tstates = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tlet texture = lychee.deserialize(blob.texture);\n\t\t\tif (texture !== null) {\n\t\t\t\tthis.setTexture(texture);\n\t\t\t}\n\n\t\t\tif (blob.animation instanceof Object) {\n\t\t\t\t_start_animation.call(this, blob.animation);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Entity.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ui.Sprite';\n\n\t\t\tlet states = data['arguments'][0];\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (Object.keys(this.__map).length > 0) {\n\n\t\t\t\tstates.map = {};\n\n\n\t\t\t\tfor (let state in this.__map) {\n\n\t\t\t\t\tstates.map[state] = [];\n\n\n\t\t\t\t\tlet frames = this.__map[state] || null;\n\t\t\t\t\tif (frames !== null) {\n\n\t\t\t\t\t\tfor (let f = 0, fl = frames.length; f < fl; f++) {\n\n\t\t\t\t\t\t\tlet frame  = frames[f];\n\t\t\t\t\t\t\tlet sframe = {};\n\n\t\t\t\t\t\t\tif (frame.x !== 0) sframe.x = frame.x;\n\t\t\t\t\t\t\tif (frame.y !== 0) sframe.y = frame.y;\n\t\t\t\t\t\t\tif (frame.w !== 0) sframe.w = frame.w;\n\t\t\t\t\t\t\tif (frame.h !== 0) sframe.h = frame.h;\n\n\n\t\t\t\t\t\t\tstates.map[state].push(sframe);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (this.__animation.active === true) {\n\n\t\t\t\tblob.animation = {};\n\n\t\t\t\tif (this.__animation.duration !== 1000) blob.animation.duration = this.__animation.duration;\n\t\t\t\tif (this.frame !== 0)                   blob.animation.frame    = this.frame;\n\t\t\t\tif (this.__animation.frames !== 25)     blob.animation.frames   = this.__animation.frames;\n\t\t\t\tif (this.__animation.loop !== false)    blob.animation.loop     = this.__animation.loop;\n\n\t\t\t}\n\n\t\t\tif (this.texture !== null) blob.texture = lychee.serialize(this.texture);\n\n\n\t\t\tdata['blob'] = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.visible === false) return;\n\n\n\t\t\tlet texture = this.texture;\n\t\t\tif (texture !== null) {\n\n\t\t\t\tlet alpha    = this.alpha;\n\t\t\t\tlet position = this.position;\n\n\t\t\t\tlet x1 = 0;\n\t\t\t\tlet y1 = 0;\n\n\n\t\t\t\tif (alpha !== 1) {\n\t\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t\t}\n\n\n\t\t\t\tlet map = this.__map[this.state][this.frame] || null;\n\t\t\t\tif (map !== null) {\n\n\t\t\t\t\tx1 = position.x + offsetX - map.w / 2;\n\t\t\t\t\ty1 = position.y + offsetY - map.h / 2;\n\n\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\ttexture,\n\t\t\t\t\t\tmap\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet hw = (this.width  / 2) || this.radius;\n\t\t\t\t\tlet hh = (this.height / 2) || this.radius;\n\n\t\t\t\t\tx1 = position.x + offsetX - hw;\n\t\t\t\t\ty1 = position.y + offsetY - hh;\n\n\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\ttexture\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\n\t\t\t\tif (alpha !== 1) {\n\t\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t_Entity.prototype.render.call(this, renderer, offsetX, offsetY);\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\t_Entity.prototype.update.call(this, clock, delta);\n\n\n\t\t\tlet animation = this.__animation;\n\t\t\tif (animation.active === true) {\n\n\t\t\t\tif (animation.start !== null) {\n\n\t\t\t\t\tlet t = (clock - animation.start) / animation.duration;\n\t\t\t\t\tif (t <= 1) {\n\n\t\t\t\t\t\tthis.frame = Math.max(0, Math.ceil(t * animation.frames) - 1);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (animation.loop === true) {\n\t\t\t\t\t\t\tanimation.start = clock;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.frame = animation.frames - 1;\n\t\t\t\t\t\t\tanimation.active = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetMap: function(map) {\n\n\t\t\tmap = map instanceof Object ? map : null;\n\n\n\t\t\tlet valid = false;\n\n\t\t\tif (map !== null) {\n\n\t\t\t\tfor (let state in map) {\n\n\t\t\t\t\tlet frames = map[state];\n\t\t\t\t\tif (frames instanceof Array) {\n\n\t\t\t\t\t\tthis.__map[state] = [];\n\n\n\t\t\t\t\t\tfor (let f = 0, fl = frames.length; f < fl; f++) {\n\n\t\t\t\t\t\t\tlet frame = frames[f];\n\t\t\t\t\t\t\tif (frame instanceof Object) {\n\n\t\t\t\t\t\t\t\tframe.x = typeof frame.x === 'number' ? frame.x : 0;\n\t\t\t\t\t\t\t\tframe.y = typeof frame.y === 'number' ? frame.y : 0;\n\t\t\t\t\t\t\t\tframe.w = typeof frame.w === 'number' ? frame.w : 0;\n\t\t\t\t\t\t\t\tframe.h = typeof frame.h === 'number' ? frame.h : 0;\n\n\n\t\t\t\t\t\t\t\tthis.__map[state].push(frame);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tvalid = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn valid;\n\n\t\t},\n\n\t\tsetState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tlet result = _Entity.prototype.setState.call(this, id);\n\t\t\tif (result === true) {\n\n\t\t\t\tlet map = this.__map[this.state] || null;\n\t\t\t\tif (map !== null) {\n\n\t\t\t\t\tif (map instanceof Array) {\n\n\t\t\t\t\t\tlet statemap = this.states[this.state] || null;\n\t\t\t\t\t\tif (statemap !== null) {\n\n\t\t\t\t\t\t\t_stop_animation.call(this);\n\n\t\t\t\t\t\t\tif (statemap.animation === true) {\n\n\t\t\t\t\t\t\t\t_start_animation.call(this, {\n\t\t\t\t\t\t\t\t\tduration: statemap.duration || 1000,\n\t\t\t\t\t\t\t\t\tframe:    0,\n\t\t\t\t\t\t\t\t\tframes:   map.length,\n\t\t\t\t\t\t\t\t\tloop:     statemap.loop === true\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tmap = map[0];\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (map.width !== undefined && typeof map.width === 'number') {\n\t\t\t\t\t\tthis.width = map.width;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (map.height !== undefined && typeof map.height === 'number') {\n\t\t\t\t\t\tthis.height = map.height;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (map.radius !== undefined && typeof map.radius === 'number') {\n\t\t\t\t\t\tthis.radius = map.radius;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tsetTexture: function(texture) {\n\n\t\t\ttexture = texture instanceof Texture ? texture : null;\n\n\n\t\t\tthis.texture = texture;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.effect.Explosion":{"constructor":"lychee.Definition","arguments":[{"id":"game.effect.Explosion","url":"/projects/flappy-bnn/source/effect/Explosion.js"}],"blob":{"attaches":{"json":{"constructor":"Config","arguments":["/projects/flappy-bnn/source/effect/Explosion.json"],"blob":{"buffer":"data:application/json;base64,ewoJIm1hcCI6IHsKCQkiZGVmYXVsdCI6IFsKCQkJewoJCQkJIngiOiAwLAoJCQkJInkiOiAwLAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiA2NCwKCQkJCSJ5IjogMCwKCQkJCSJ3IjogNjQsCgkJCQkiaCI6IDY0CgkJCX0sCgkJCXsKCQkJCSJ4IjogMTI4LAoJCQkJInkiOiAwLAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiAxOTIsCgkJCQkieSI6IDAsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9LAoJCQl7CgkJCQkieCI6IDAsCgkJCQkieSI6IDY0LAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiA2NCwKCQkJCSJ5IjogNjQsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9LAoJCQl7CgkJCQkieCI6IDEyOCwKCQkJCSJ5IjogNjQsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9LAoJCQl7CgkJCQkieCI6IDE5MiwKCQkJCSJ5IjogNjQsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9CgkJXSwKCQkiZmlyZSI6IFsKCQkJewoJCQkJIngiOiAwLAoJCQkJInkiOiAxMjgsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9LAoJCQl7CgkJCQkieCI6IDY0LAoJCQkJInkiOiAxMjgsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9LAoJCQl7CgkJCQkieCI6IDEyOCwKCQkJCSJ5IjogMTI4LAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiAxOTIsCgkJCQkieSI6IDEyOCwKCQkJCSJ3IjogNjQsCgkJCQkiaCI6IDY0CgkJCX0sCgkJCXsKCQkJCSJ4IjogMCwKCQkJCSJ5IjogMTkyLAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiA2NCwKCQkJCSJ5IjogMTkyLAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiAxMjgsCgkJCQkieSI6IDE5MiwKCQkJCSJ3IjogNjQsCgkJCQkiaCI6IDY0CgkJCX0sCgkJCXsKCQkJCSJ4IjogMTkyLAoJCQkJInkiOiAxOTIsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9CgkJXQoJfQp9"}},"png":{"constructor":"Texture","arguments":["/projects/flappy-bnn/source/effect/Explosion.png"],"blob":{"buffer":"data:image/png;base64,PNG\r\n\u001a\n\u0000\u0000\u0000\rIHDR\u0000\u0000\u0001\u0000\u0000\u0000\u0001\u0000\b\u0006\u0000\u0000\u0000\\rf\u0000\u0000 \u0000IDATx^}\t|T9L2\t\t!\u0000a\u0004Zj[\u00013jmjTG\u0015b;\u0011DkZmP\u0004A\u0016-=!^CHf,Y{>|\b{DDE^37'n\"`\"@L\u0002`.\u0002\u0013\u0018\u0001\u0000\\\u001f!@.]fM\u001d\u0007ypDjqq1~o\u00035\t@Ak6l\"p6\u0002eeeq\u0016e\"Ys;s\u0017U\tBv:::\u001azX]]Q\\\\&\u0002_\u0000$\u0002E\r\u00130\bYfxJJ\\A\u0010\u0018[9:T\t-zf_\u0011B:\u0004~UUqw3\u001akjjN\\=\u000f`\u0012X33\u00110\u0010r\u001f!6zrr2jC\u0000\u0002\u0000$DQ\u0014&\fz;SJ\n\u0004\u0002].?\f\f*&\u0001\u00055\u001d\u0013\u0001\u0003\bx<[\u0005A\t!d&NT2l02b\bdWW\u0017ijj\"---\u0004\u0004A\u0010zDGG\t!Os_$3\u0003Cb\u0012h2\b\u0018D~Q\u0010\u00179\u0005AG\u0004?\u001c\b\u0003c~\u000b\u0000I]]o(+%I\b\b#BD\u0000\u0018f5\u0013\u0001\b]nZ7PJ'[,\u00162qD2|p\u000fe;\u0000mP[[KjjjtNEQ\u001et\\4B\u0004L\u0002`+uL\u0004@I&#G=h;\u0019a!inn&\u0007\u000f\u001e.i#m\u0012H\bM\u0004@J)2NSjhO(]RF]\u001fTUk \u0010np\u0004 \u0016wL\u0004zA\u0016\u0005lSL\u000fH\u000e\u001c8\rTU(3\t\\M\u0004\t5kX\u0015E\u0019\u0010=\u0014\u0018?o~}'N G\u001e\u0005\u0011\u001b\b\u0004p:5}\u0003a6{#@^<J=R7\u000eV\u001f?'G\u001e4\u0000FwEEEE\u0006d\u0012AL\u0017w\u0000\ty{SSu#zj\u0018c\b!\u0016\b$0`\u0015\u0010SN>\fB~|&\u0001\u0018/b9_G)$\u0014V?=9\u0019\u0003\u0016\u0018\u0004\u0002/\u001b\n0p\u000fc^\u0019z,m~\u0010\u0003\u0007B'[OfIo>p\u00018*&\u0001\u0018\n+\"\u001e,k)t\u001c7n\u001c>kc\ba\u0013a3GU\u001fO<vBZ'\u0018c\u0007sHOO\u001fMsn\u0016<r\b\u0007wJ$\u0000\u0000\u0011e`\u0014\u0003\t\u0013R\u0003a8tHfuUVV\u0015\u0017\u0017w<8^|PJ\u001d\u001b\u001fw}F\u0012G11VWW\u0013\b\u0004\t!\f\u0004\u0002\u000fn8\u0017UL\u0019@L/EYdX^Q\fNX\n6q\r455%m#0G\u00109A\u0016\u0007\u0001\u0007\u001b\u0019ch\u001d\u000bhC{{}~{I\u0000E\u001f\u0017\u0002\u001e']\u0010&4\u0014l\u0010\u0010\u0001\u0015^w\u0012cM48\u0013M  -?0\u001a\u0017 \u0003\n\u001d-q\u0000\u0001y0TM\"Q\u0014kL\u0002\u0010\u0017\u001d\u0018c#UUP\u0014e6y@4KFY,g\u0018c_d\rK\u0017v<\u0003Lk]hk~%\fz72\u0016cC3G'cng\u001f{\f+?{\u0010FC\u0004B\t\u0000!@ p>i\u0012D|8())\u0019c*222\u001a9rEg[[[ \bJ[[[}ggN>8\u001bW}>\u001fXb\u001d;u{%b@;wt/(^^U\u0014%\u000fs2\u0011\u0005\u001b{622\u0002\u001bK.\u0001/$$\u0000z1Q\\\\8qU\u0015\u001e\u000b#G[[[/ab\u001cB~jqNNKtihh\u000eeX>;G\u0003\u001d}8\u000f}^|ZZFJz@x\u0014Ji\u0016kA42'OvkUTU}=S\u0000KKKdfX2\u0003@\u001d=ykmmIb\rmOc\u0017H\u001f\u0012\u0004v\u000e\u001d:pq%mYPJ\b\u0007G\u0018\u001a'u]b&RQQ~\u0017s8[0_\\c*++uK\u0017^xa\r\u001b! v $>.J\u00117py\u0005\b7\u0016\u001d\u000fks5\u0010\bq{B\u001b\u0014\u0002P^^^<n\u0002\u000bS\u0002(555\u000f_\u000bPy_k\u0004A\u0018\u001b;.4>cG]]N/\"\u001f|?6\n`lh|{8U\u0011Ru\u001b\u000e#]\u000e5v\u001fy|9'oH\u0004~\u001e{~[.e\u0011B%\u0000h\u000f\u0018lhnnB5(\u0003N\u0000<\u001e\u001b\u00066o\u0004@uZv\u0015^YYw333{\t\u001a\u000b\u0017cD\u001d;^s\\7\u000e96\u000e\b`\u00128|#Gt0`7J_\u000f8\u0010>9]X\u0004vo/\\lO)2'77W3\u0004{b!WSS`(C$w_;<\u001eBs>l$%%\u0010a\r\u001d#+L5J[[;^g\bU\" \u0005\u000bh7|f'~#F\u0004y\"\u001b>~F\u0014n\u000bP.###\u0013l\u001f\u001bcm:q\u00078i\u0012\u0004\u001eC_X\u0017\u001b\u0014\u0004v8\u001cIYY\u001cs>\u001eML})\u0018'qp\n\u0000\u000f<&J\u0014pQ{sus\u0007\u00161m\u0018peY0UU$<\u0004`\u000b\n\n&\u000e\u0000\bfi\u0019gO\u001ch\u0019Y;~ee\u0001Rg2SRRN6\b`T\\:5\u0002\u0015\u0015\u0015\u001c\u001e.FB\u0000LQ:Q\u0014Ge?8\"A@(+\u001c\u000eGB9III\b!sAf7D\f\u0000\u001d!>\u000fM2y$I\u001aT|>_)\u000b}@\u0010x?\u0002.\u0000@\u0014EY%I\u0006\u0000[h\u0005\u001d;^MII:\u0011\u0000<z8E7S{\r|\f\bD\u0010wA[ZZT\u000f\u001b6\fA$>\u001f9\u000es$>p\u0016\u0000V4\u0016}%%%\u0005\u0005\u0005a=\u001e\u0016ukkZqgp\tkB0@\u0013/\u0017\t~7pwG9?o\u001ePx<bb@\u000e\u0001\u0019Kkd5\u0000\u001e| &\u0000o.X:}s\u0003L8)\u001c>|x{aa\u0018/xx9\u0013:^l&8/]T_\u001a3fWp\u000f]<\u000f\u001f\u000e444|.k\u0007f\u000f\n\n\n45PhK]\u001d-}<}F?PBQy_EEE1cJ\f`Z]]]%hG}.~;,\u0019f\u001eoPJ(,,!1 %%%53 H3f\u0000+\u0010$UU\n\u000b\u000b\u0006\u0000`?\u000fe`x{].?ZPP~b:x`\u000bQ>Jyyrrr6\u0002\u0016DUU\u000ea=\u001e/F\u001e\u001f'O>:\u0004_YY\u0019Xx9yy<\u0011=q1\u000f{qqqw@>,s\u0007I+\u0005N4\u0012e\u000f\u0000\u000b0^<\u0003s,?{7$X\u0005`O@[+I4\\nW\u0002\u001a[BM65kP*k%Ku1.++{x9\u000f\u0012$\u0000\u000b\u0017.<\u0004c^^Wz.^,\n\nNS\u001f9{<\u001fdee\u001cT>\u0003={t,Y$:)T+{>Q TT\u0016d[/-T[W\u001eWu\u0003#G\u0014\u0010$DNXb\n1v<\u0010\b,u\\\u001bj(\u0017/^F)M#\u0012\bn4\u001aT\u0002+P0\u0007\u000e\u001c@CU8[lNm1m:\nv\"qc3C\u0013:`>8q-y]~JKK?5k9\u0012C\bK~1\u0011KT\u001b,-;;st\u0015\\0w7\u001d\u000eHWTTG\u001ae;\u001c\rAqMM>\u0017M#uC&p >4}?=p|H\tr%5\u0011\u00009\u0000h\u0012 Vx97?1Cbc@-q'SSSW\u0014=++\n6\u000fQ]]\u001cQ\u001429\u001b3gP\u0002\u0001\u00076TWW7o>|M7ttt\t\u0013&l\u0013ZtUGWHPiw|>?j>\u0002*;B\b\\'I9nC_e5B\rp\u001e\n\u0001\f\u0016\u0016\u0016\"^\bp\u001b\u000b;;\u0010RDQ:8X\"\u001061e:O5CEQw\u0002PZZK.r\u0002\u0001\u0010?Zxq;\u001f{\u001b7n 77J7{nf,\\c*++!\u0019nZ%0q\\|`\u0003\u0007\u000elmiiL\u000e!R@\u0000\u0000\u001f}\r\t\u0015w\u001b\u000bp$Ie}\u0010e1}\u0019n4s$I\u0015D} \u0000Ag&A9o\f=\u0012\u0004\u0001=lX\u00178cQ\u0003\u0000@c\u0003s^p8\u001e^c\u0000.R\u001b=\u0017@Pd\u0004T,\u000f?r\\\u001e^'O\u0018|*\u0003Ug\u001dD\u0011XH\r|$''g|Oql(TU}I\u0014u&$''k&v'Ni5k\u0000w_\u0005mawuucG\u0010\u000fFe@cH\u001e8i~:\u0010|>_\u0005\u0016J\u0000h\u001cF\fU9x\u0004\u0002/\\?\u000f(\u0001@geee\u0016\u0017\u0014\u0014\bw$a8t\u001e52V\u0007A0,\u0016O\u0006m!\u001b=\u001c\u0016x\r\r\rN\u001djeyCFF-\u0018-\u001d\u0000c\u000bBU3 \u0010v\r0A;~F\u0004\u0000\u001fD Z\u0002\u0013\u0016p\u0019cm=?pbx\u0019.>CBqx\u0015\u001ak\u0000\u0003x<v{Unn.\u0002bh`-\u001fP|Pcwtt\\+I\r#5\u0004+dKMM\u001c3fL\n,&}:m\u0003YQQ\u001f_l\u0004\u000b\u000ev[?aO@\bypX\u0003\u0007g\u0007-\u001d\u0018c]s\u0004kd,A3C\u0000y\u0004\f]C[\u001cs}\f%D\u0003`=}Gl6\u001b? \bs9n;e#@\r:>&\bSL\u0016T9\u000fl\u0000PSN= :==\u000bBh\\e0Hu\u0010\u0016spO\"?z2rc\u0001C\u0005\u000f4j\u0010LjGG]~\u0011>T|_\u0005?@PVTTT\u0006\u0002<\bDeu'$I@\u0007CUU\u000bz\u0006\u0005\u0019p\u0002\u000fvzG MG\u0012CaC]\u0017&Ll}pI|T\u0004z\u0011*k#Uqf8 \u0000^-_y/R]Yg-ikQ&\\h\u0003x\u000b~}=id\b\b'SJS\u0010\u0003IOSJa,5%\u0010\bc\u0001h%QNB\u001fw~$\u0000VE3R\u001d3f|,0,\u0006|PH\f\u001b6l \bit477}(k\u0012}6#RJ 9\u001aH:MMMNE~^\u001b \u0016t\u000e-\u001dwYd];]i\u000e\u0012l\u0012G&\u00059\u001d\u001d\u001d4\u0002'r\u0016SRR.X,_ee(+]]]Pp\u000eQ{{{PSE,?`\u001c*\u0006`i4.@C\u0007=\u0000\u000f9\u001cR\r\u0006<P\u0003rm.q\u0010tq\u0000\u0017]\u000158T|:\u001f\n0sl,Z$=\u001e`\u001eL\u0013~V$ }&\u0007\u00103E IR:[\ti=\b0zJk\\7g\fU-\u001aF9`\"\u0012\u0016y\u0012`\u0007FoAb\u001e\u001dU>R=\u000f\u0018:::+tI\u0000Eo\b\u0001\u0001cJ\b{!,)bD hknn.\u0006'\u0003;\bn\u0013u\u0015hOKw,)\u0003bc\u0016ecKK}}\u00055\tlV\u0005\u0001\u001e+X`{&\u0005_w\\/2\u0016<\u0013cM\b\u00029T`c}\u00196:\u0007\b\u00032p\u0001\u0005C{&\u00010Y/j\u0004^l<\u001cYH0\u0007a\u000f\u0016-NP\u0001\u0016q_g\u000fP`Z^^~bys\f\u0015'@nQ\u0017\u0019<\u0011-QQ\u0014b\u0012\u0004\u0000n6\u0011\u001e\u0001Y3)M\u0017\u0010tQJso#e\u0010bw5\u0018\u0007=\u0018C\\\u0002M\u0002\u000f \u0019\u000e|ss~W0I\u0000\u0013t\bx^B[9z#\u001a0)T6S\t$J\u0010\u0003a#\u0018cuvv.\u000e\u001c@Q6\u0011\u0015fEp\u0005'`\u0002W\u00028yOB\u00031:](\ty\u0005\u0017q\u000b\u001eIIIe\u001e\u0004x\u0012.=?)H'\u0000,\u0004`0\u0005\u0000u1\u0011\u0004qJ)0\u0014,4\u0005O Z <EI\u0007M=(Ft79h6_\bx<\u0005AXI)(0p\u00027h 3sp JDc\u00001`\u0011@\u0017A\u00104$\b\bE\u0018K\u001cX\u0001=@$At:\u0011Z-b1\t@D\n&\u0002#PRR2&99\u0019\u0004\u001eIHO\u0016-n\rD_\u000eBhOA(4@\u0000&~&FaL\u0002\u0010W2\b \u0010\u0007oa\u00008\u00018C\f\u0007!\u001bBx\u0007*G{(G\u0001\u0000#\u001f\u0004\u001c\u0017immh4YZggA\u001ff\u0019\u0004 \u0012Bs\u0013\b\b\u0004\u001ab\f\"\u0000}f\u0000Bt`\u0004\u0000Ya\u0002G\"c#XM\u0002`.o\u0013\u0004 v\u001c\u0016\u0013B8a\fN\u0000\u001a\u0019a\rStoF!\u001c\u000e@ 9\u0014&\u0001H70\u0011\u0000\u0002\u00193fLbV}\u0003dutC8?RU\u0015\"2\u0004s=\u0005(J}UUx7\t@<\bkp\u0010\u0004k/1\u0011$zNV\u0005f]]]\f\u0015G0\t@<\bA\u0000\u0005\b!I4\u0007$7P7l\u0000}!]\u00017\t@\u001153\u00118\u00100\ty\b$\u001a\u0001\u0000$\u001aQ=\u0013\b\u0001\u0000G\u001f\u001c@\u0011\u0018p\u0002O\u001e6l\u0004\u0017\b!3 16J^9bW\bF\b\b\u0003\u0002\u0003F\u0000<\u001e\u000fT\"Hq5Re\rW8r?vED\u0019>\u000e\u000f2\b\\\b;\u0001(++jRy\u001dd@a\u001c3\b$\u0012\u0016R00XBUJBH\t5I>X?9o\u0013X\u0010W\u0002z,\b#a\u00169~x-J_\u0005\u0010A\f\u0014UUUJ#\u000ea#:&\u0002&\u0002\u0018\u0016\\O\bf\tRp0%=\"2Kx) \u000ep@\n\u00107Idv$I^\u0003\b\bG_8\u0000Y\u00185B*#bDR5\u0001\u0014H\u0000o*\u0004\u0002;_\u000bDDo\u0004\u0012N\u0000^ hYm9gyD\u000f\u00168\u0000\u0004G@5/EQ$.s\u0001\b\b@B\tu\u00034O\r:\u000f\u0000L\u0004L\u0004E \u0004f\u001bDJ6(\u0011o={Br2\u0001s\u0007\b@ a\u0004 4SVVOm7\u00102\t@P\byz+\u0015`\"`\"O\u0004&\u0000k\u0019s~\u001b|7on~L\u000f\u0001\u0004KD\u0004($IM\u0004L\u0004\u0012@\u0000dY^B\bAphQBx>n/?6\u0014\u000f [-\u0016\u000b(J\u001d,9E j\u000e\u0000\u000bf-\bn\u0000H\u0000cR`GTH(SI\u001e\u001a=S6ALB\bAol\t!rg.O9g@T\u0004j2znH\u0000DCj\u0018\u001d;4#516\u001b b,\u0011\u0019\u0016PJk9/zl\u001e9}^x\b\u0018&\u0000\u0004\bX\u0015,^1,2H\b6\u0002EQ\r`KKKl6QJi24#\u0010!{\u0005ca\b?\t\u0014]\thX?x\\!\u0002vy\u0013BR\u0000o  \u0003=\u001d<x&Ez \u0010t:?h]n(KU\\\u0007\"Z3\b\u0000\u00015($IV4c1\bYF$#99\u001a\u0017\u0016.\u001cy R{\u001c6\u0017].o!\u0016M0Fxq\u00031Ms\u0017n?a9\u0000\bwPJs\u0001\u0001y Ot\u001dM$s\u0000\u0000 \u0000IDATNT?aP}(&px\u001b)[J]\u0004\u0001CN:;\u001f}\\x\b%\u0000^w \b;k8 ?\u001cB\bo>t7\\He\u0000\t,dJ),\u0016K/,#-nQ\u0014$m\u0007\u0004@eM9{lC\u0001:\u000e\u001b?3j/\bN5\u0017\u0006\u0015#$\u0010\"\u0000\u0003{16\u0019\u0007\u001c\u0013,#\u0013]@\u0018\u001fEQ$Daw#'\u0001x<X,q\u000f\r\u0011:mr\u0000F? 6\u0014E$a]Y2|ZUUS $\u0005%\u0010-#\"\u001e\u0002\f\u0014Ey@\u0014E[3@T\bE\u0000{Rz\rV`a\u0013-\\g{&77Rz#![UG)E$l\"H\tD[\u0017\u0004g\u0000NUEQKU?;I)\u0005\u00076}\u00180]v\u0000\u0015\u0016\u0016.O|v.\u001e\u0004z%\u0000A~JxM\u0016{v/UU$\nu.]*,\\P4vX}1Ps\u0003u 8ZW\u0014D}jkhJ#S#\u0000@BDY6@T\bJ\u0000V^=,33\t1=A\u0004\u0012qacC\r\u001c%\u0010\b<t:W5jY2nGs5g\u0019o\u0004\u000bAMo:F\rW>\u0018{\u0014l?$ #\u0000!@8\u0001d:\u00128\u001c@_ZZz%c6\u0019\b\u0004(q[kkk_76\u0007K\u0001\u0014X3gLm?A~-\u0011WU\rQ\u0014o\b7]Y1\u000bl\u0004n\u000e6'$Ac{'ccj=Vu\n^@N8\u0012B#>9H9W@ ppL\u0019\u0001~xq?\u00197nam\n\u0001m4\u0006C\u0000`Zl5+&\u001bc\u0002];q\r}/ry\u0018c/\u0000bb\u000f\u001f>\u001e\t!vXqey$Dvv\u0000\u0003h\nsN8\u001cY\tS)\u001doze]\u0016k\u001c\u0015cT\u0014\u0019`x<_\u001a7n\u001bq7zh\u0015n\u0018Y\u000489//\u001d\u001f\u0001\u0017*c\u0007(;UtV?@ 4L+**4wYXEz\u000e\u001en\n\u0004\u00029&H\b \bj\u0012\u001a8\\{\u0017\u0004q\u0017\\WB|o/<@\u00109(J.K\u0000W\brKfgg_\u001f\u0004F7|s\u0000\u000f\u0000Z*}G\u0018c$SNTYiC\u0003K\u0007[]g?t:\r\u0016l\bJ\nuLzw\u0010\u0006b\u0013\u0013EQ48AN2bzCKb$\tvA\u001d\u000e=|r\u001fD`\u0015@D*P\u0006M$G?\u0018_`B(NL\b5h=4\\v}ztz*k>yq\u0007\u0000|RJ\u000f\u0001\n\r{H\u0002p_\u0005#I\u000b\u0017\u0015oZ/b<\u0018W_2@S\u0014yF\u000b'VJe}h@\t6\u000f@[n{Oo}{+\u0005A)S(\u0004\n[1\u001f(H\u0007yyyu=U,>///\u0013w\u00188\u001d=z_N\u0006z_IIISL|uBc;\u001c5\u0002 r>cL[oC\u0005RXX\bR<\u001eO:c(c,\rC\u0016\u0000X\u000b\u000eC\u001d\u0014>l~XE\"x\u001e:;\u001c\u000e\"\\YvmZjjaDj\u001f*\u001489R\u0003\u0005\u000b\u0016\\)\u0007\u001f>|x{aa\u0018/xx9\u0013:^l\u0003=\u0007\u001eH]lY+\b;ZSSS1\u00164\u000e\u001e<nfm\u0000\u0018ri=)!*`K\u0014qGOeP\u000f?\u001e\u0004\b\u0002z,H\fD{g%''MOO\u00170\u0006#\u0012u \u000b\u0004\u0002/HPj\u0011>c1\u0016!\bG\u0004Y@p8OY\u0007gy\u0001\u0017?x.wz\u0016\u0014\u0014<kyp*\u001e<xs=G9}}\u000f}=heggOlhhhZ`Ad/S\u0010dYVS\u0019]}\u0001\u001fN\u000f\u0015\u0014&#($\"2L3\u0005C\u0000^RZ\u0005ET9q\u0015sQCyyyb\u0004G\u0006pF'\u0000(Qs4\u0010M65km%gt=<gtL\u0004}F\f\u001f\u000f222\u001d4;S;z\r\r\r\u000b\u0016,6iz\u0005Ax\u001d\u001f\bl\u0018S F\bOs\\Y\\\\l=\u0018\u0010F7\bZ`\u0010TXX\u0018\u0015eYX,\u000e\bTp\r\tnXr(\u0007,\u0016\u001d\u001a\u0006#WSXC+\u001c\u0002e}\u000e\u0010X\u001e8p`WWW\u0017|[nLm7\n\u000b\u000b\f\u001a\u001c{whQA\u001f?^gZ-iiivE~jT\u0003\u0001 \b+\u0002SxJh\n( \b?\rwH\"<6C\u0000UU?\u0012Eq~4s|'F\u0014\u000b\u001b\u0010rybQQ\u0011|#BdY\u001fBad:\u0016,w\u000ehu7oY~~P SO^(J{VV\u0015\u0017\b29(ls\u0000\u0000\u0010 X,\u0018W^`5c-8@(^\u0015k{{<Lfjj*LEM\u0011iE\u0013\u001bQ\u0014T? B8\u0003=q\u001618q.#f{5\u0007j@#q\u0004t.RpC4K\u001e\u0004e\u0003\u0019A>\u0017O\rV[l\f\u001f>1c~#I\u001b\u0003=\u001e\u001b*c\u001d\u0000\u0007OcOH5,o`\u0013\u001fx\u0018\u001b,\u0013!\u000bF0E\u0014\u0019\u0004\u0000X\u0019qq\u000br\u0011A\u0010\u0002@NO3h0\"q:Ukk?\u0010\bL\u0015\r\u0016F>s;O^\u0000\u0019k\u0013\u001fz\\.Si\u001aR\u0000@u6mO)DQxeeeV\u0015^c\u0018+J<R(h-|>GYC^bt,0\u0001g\u0004Y\u00008@ 9\"<\u0010\u001f]A\b\u00165R~\u0005l6HxWK4*hJYY\u0005\u0005\u0005#\u00115\u00104n766Np:G\u001b=\u0002\t!\u0000\u0016&PEe\ru+@\u0000Hv\u0011U\t\u0013a\u00073PL\u00023Y~\u000bfF\t>i?F\b\u001e\u000e@\u001b\"q\u0018UU@\u0014\u0005Q;\b=\u001ex^k}X7\u0001\u0003wvk%I \f\u0000^t\u0016l*l0|D\\\u0007\u0013J\f\u0014EyNhx<,\u0016nl\u0018\tAq(UI$n!l\u001fG2{/\u00106=l\u0003\u001e\u0000\u001c!\u0010\u000b]gzH0\u0010\u0006.4:Of`\u001d\u001d\u001dVU-A\u0010r?sQ\u001f\u0010B\\;v\"n}qM\u0010p<#I]}YfdZZZ(\u0006,.n\"\b\r6~6\u0001(=mziL\u0014\u0010Hw\u001f#}}\u000f3o\u00126..\u0004@\u0000<1\t\u0011f.Po`OQ\u0014\u001fx<fXs\u000ewC;=C$ \t,\u000b[F\u0013\u00158}\f@J{eRF\u0013=\u00102\u00141<yro\u000b\u000f/6a\u0007p \b`0:\tKu\u0017\u001dRYu\u0010\u000f\u0001\u0004_>+mI~\u001ddY~1v=d\u00130\u0013g\fNmC3yb\"\u0010%\u0002 \u0000\bs.$B\u0017\u000b\u001e\u0013Movvvw\u0004]<\u0000wu@\u0004C\u0006\u001dN#\u000f\u0006\u0000\u0011$IEQbguY34G\u000ep(\u0003Y8nw@mu @x\t{NN\u000eLuc\u000b0\u001e\u000b\u0004Zw9/\fz.\u000b\u0000q,\u001fc\u0010T\u0014e$I2%\u0001|\u0011B3z\u0013;AQnLE\bD&xC`KA\u0010tY\u0000\u0004*\tV}\u00036C\u000e?\u0010\u0000\u001d\u000ec]VZZk&d!@\b8\u001ahTU\u0013\u001a\u0019\u00173b-@9?/\u0019Ygp\u0010\b\r\b\u0019t\"6'\\\u00163\n!\u0019e8p\u0015NJJ\u001en\u0010\u0000p8$r2 G\u001cJvD V\u0004\t\u0000Y,\u0016M\u0007[u\u0015u[(B\u0010\u0014F]bE\u0006Gz#\u001c\u0010\u0001p\u0003F8\u0001`@\u0014p\u001b3d\u001a \"H#:\u0017EYA\u0011,3~<\u0004\u001f4\u0000<(\u0003\u0012,#X\u0000t\r|*QS\u0002s\u0010 \u000013X'j(07PZeXB7&e}`\u0001#\rAXde\u0007\n.h\u0013*IM\u0003w0W \u0016\u0002;\n-\b\r-\u0019au\u000e\u0000\u000b\u001aD 9\u0010\b<t:\u001b9\\\bz\"R\u001d,\u0013\u00018`z>\u0015l\u001a~\u0017].\u0007z\u000ec6sh++NN|3ta\u0010X4\u0016?@,\u001e%X?`\u0007\"\u0000\u0001m\u001d\\\u0001\u0000\u0005\u0014\u0015\u0015\u00073INNFD8b42\u000eI'2@#\u0010N,.\u0016\u000fmP\u0010l\u001b\u0003{\u0010!\u001bQf$I>M\u00047\u0004\"\nprl\u0018c?7~#hE$\u0006\u0004wi=(i{u8\u001c\u0003=\u000e?\u0013\u0001\u0004 t\u0012\u001e\u001eA\u0010\u001e jC \u001e -GO\u0003onnMOx@5`\u0011\u0000(x\u0004A(!@.8u>\u0016EQ\u001e$xfo\"0T\u0011\u0000`2,1E\\\u0007Jl=BX\u0007\b\u0000,p\u0014E\u0019!\u0003\u000bM\u0013h\u0011\u0000 ^fCB\u0011- Xnx\u001b\"\u001a\r\u0003\u000e\u001d6~\u0016\u0015Uh3\b\\\b\bL\u00000yd\u0014zA\u0010/\u0005\u0005nZ(+h\tl\u0004$xp\u0000\u000f\u0005h\u0019p-6\u001c|P\u000ffpO}UU+\u0015Ero_@\\\u0004 \b\u001eb\nQ\u0010\u0004xE/-\u0000B\u0010N\u001e:+\u001e\u0003EQ~ I3\b\b\u0013D\u0010\u00005R1\u0006\u000ev\\\u000bznn8\u001e\u0012\u0012$a\u0019c#}(.UUKO>]~]w!YL\u0004L\u0004@ a\u0004@>)\b\u0002\u0012:\u0010\u0018m\u001fI)r$IkvW)>dN\\Q0e'\n,&\u0002\u0017\u001d\u0002F7hT@@\b_\u0002A\u0010B\b\u000eE=\u001bP\u0014RWUU_'I\u0012ZQ!mV6\u0011\u000f~!\u0000\r|DD`\u00100\t@!mc\"0\u0004\u00110\t\u0010(.\\\u0004~\r9\u0002!\u0004x4F)9\u0007!J\u0014~\u0015n\u0004]k\u0010\u0002\u001e\nA\u0010~E\bG)M44J\bi9_E)M\tt:_2b\u00123_6\u0011\b@YYV5u\u00159\u0002\u001eG&+\u001b\u001b!s$I\u001fE=L\u0002\u0010-bf}\u0013\u0001\bx\u001f\u000bHZ\u0016}\u0015l:8\u000eHQU\u0015i\u001eq8\u001c\u000f\u001b1\t@4huM\u0004\f\" %\r\u0019\u000bZa[cA\u001dFs&x@ \u000eEXG9\u001a\u0019I\u0000d1\u0011\u0002\u0001Y\u0018\u0013pz\u0011B\u000f\u0004X\u001b\u00160\u0012\b\u0004t:\u0011i&\u0001D \n\u0004^ +wCg(HtW\u0004 kV5\u0011\buv\u0015\u0012 Co|0\u0004rLh~\\./\u001aI\u00005m\" \u0004|>)GsSL\u0019x=pCB\u0010\"t\\\u0004L\u0002o6sq# r8qO<yNG\u0019p\u0002({s3\tn5k\u0018\u001b\t\u0017y\r\t D\u001eH\u0007CL\u001fI\u0000\\\u0000! b@\u0015EirW,P\u0018NG\u0000NN\u000e\u00193fLl$-\u0007t/?v0}\bE\u000fS\b!pV4y3uBs+..6f\u0011pl\u0005A2T\u0011\u000ei\u0006#8n_sd@#(O%Iz$\u0000HElf=FLH1\u0007n!.$V{\u000eJi-eUUw:H>j)\u000bci%~\\\u001fcL;v HD;(^c\u0012\u0002f_4f\u001dE2\u0019XA@WXdOu\u001bQ\u00140\u001b6%I*\u001bHhKKK&%%!hV@\u000f\u001cxxO'\u000e\u0010&u=&\u0011%DL\u000fFB_\u0014EI\u0000\"fVH\u0014\u0002\u001be\u00111;77WV/\u0004\u00018xR\u0014e=]v^jj*\"M`zXbv\u001dK_|O\u001c.?,\b4 \u0013BSI/jb\u0010jK!W\u0013DHw jnnpC\t\u0004\u0002sN;\u00100\u0012z\u0010ey\u000bc&\u001a5*n\u0016\u0019R35j\u001a\u0004JJJ2`\u0007l,~\u000bENGbaIa$+vFPI)\u0010E%$I\u000b\tv{\u0005\u001b\u0016oFx~r|&\u00010\fY1V\u0004^W`\u0007H8\u00162\f]:;;ykk;>1{\u000f\u0002\u001d\\3\u000f?<F\u001bnHm1JHc''GZTB,62\b\u00026\f\n^~$&\u0001Y#z\u0004pq1v+TX,K/T\u0013B%C4(Idz[\bu/\bzlt\u001f\u0005m3ixH`wB(\u0013\u001fPbxeI\u0000\fCfV\u0005b{16\u00191e\\\u000b\u0002(HNe\u0019)\b\u0004g6\u0014\u00186r9\u001bl#U9!\u001fRHRh2v\u000b\u001b1\ta\"f\u0002!\u0019|$?S8`\u0002C\u0017EQ\u001e\u0010E\u0011\u0012V<\u001e=\u0016w\u0018h'm[\u0003c\u0010o'\u0004\r\u001co\tmP~O&6\u001c\u0005,\u0018R\u0014B$y\u00050\u0004Y\b\u0002A5IJ)8\u0000 6}x k\u0017\u0016uYaar#c5X|(\u000f\\a7,iyi\"PBF0j%$\u0019IPd]3\"8\u0000\bNuW\u0017Q\u0019\u001aYBDs>\u0006)qW\u001b+\u0016w@\u0000\u0002{\u0012\u0014i\fK4dP\b.MAgi\u0002\u0012|\u0015TU+bI\u0000\f?JKKdfX2\u0003@\u001d#q[kkk_?Ry\u0007\u0019czn}\u000bi9BT[\u001aIX@R3IB\u0005-3T\u001f1T[q8\u001cW'K^zXfff\u0013bz`\b\u0018!PwE\u0011\u00197dfOhDFf\"\f44m\u0010\u0001\u0004\u000bA\u0015J \u0010\\mr\u0000Klq\u0004\u0019A!!\u0006\njjj\u001ep\t&v\u0006gZ[jURvv\u001e:\u0005B2lr?\u0016hEm+{\u001d~\u0005\b\u0004\u0002\u001d\u000eDn|fi+\u0001rk$J&\fcra6+(\u0019LhjU\u0002*'{\u001bT2fFb0x\u00049\tZaVwI\u0000\u0012j\fx4n7{;UNUUU+n\u0006\u001dj,\u0016` c\u001f6o\u001e\u0016vu9HT5+7X(\u0019\u0019C:eee_ZA6guV@m|idv\u0010v_IuA9m!B\"\u0000tV\t?Js\u001d\u0001N\u000e6d3\rO\u0019\u001a\u000fkf\u0010gg|\u0000\u0018/+\u0015|w|5\fo\n\r\u0007\u001fA\u0010>;wnM\u0003]v7HZ^m?%?s\u0011\u0003+H\u0003IT\u0015>*\u0014\u0017\u0017'c\ns;\u001bIJqC\u001b\u0002\u0002;O!)6_w;\t,X2\t\u0010\u001e;vi!\b\u000bIdC24>\u0012\u000ek5\u0010\b6h\u0004={fewvv\u001elllx\u0001u\n8+_pAAd\u000fmFw/'k~y\u001d\u0011#F\u001fRHI,Nj\u0011a}\u0002\u0010p\u000e>TMvM%\u0010[JZ#\u001an-IRy\u0017zj#G\u001ea[L:USe\u001ai\u001c}*2=$\u0003~\u000e\ru#CA)EH!\u001e6\u0001Y\u001e$~5)C\u0018\bA!\u0000%%%SN3\u0019\u0000\u001ba\u001d_w8\u001c/E5ryyu=AU,>////8\u0018\u001c=z_N\u0014eYJ)\fQ\tZ\u001fIqf={Sl%Y\u000275C\u0010<I\u0000\u0000 \u0000IDATIf-8}Qn\u0005\u0011E\u0015^*|RJyC\u0011\u001f:D\r,\t\u0007zn(t.*|K%\u0013Fl\u001f!h>\u0003}\u0015W\u0012R\u0015+\u0013dN\u001cp\u0002\u0003\u000f.[\u0015U,>xnQ<\\^^\u0005\u000b77\u0016\u0016\u000f\u001f^XXx)/\u001e3g\u0004\u000eNlk\u0014^SD=$mv\u000eNV6w\u001dY2-\u0013t.\u0000B42\u0011{?\u0013Eqrx\u0018t_'ENo#\tU\u0010J?v=Q),mt\u001fr\u0012~i'!9+j\b\u0013\u0003N\u00006ox~~`o'\u0017-Zw}\r\r\rM\u000b\u0016,j6CrYY\u000ffs\u0018\u0005i\u000e\u001e<x(//AU\u0003Wt\u000b\u0017\u001e;3~g%''MOO\u0017`\u001b\u001fi4]NF~{\u001ar7trrY\ru\u0011g\u001eL\u000e^}0?kcuW\u000bw\u001a\u0000T\u0006pDeY~1{\u0018)]In#\u0018I\u0016\u0000\n9\\sL\u0010>kx2{#_)ADT2\u0011c\u0000zw\u0010\u0004b\rjD\u0013Y\u000f>\u001e;vV;S;z\r\r\r\u000b\u0016,\u0018\u0006M65kk%K\"\u0010B\u001e3gC\b4\u0011B\u0000\u0017.\\hl5\u000eD^RZ\u0005T\u001aLUmP:k-|x\bC\u000b\u00166-{0\u001c\t@}}*1)\\p\u0010dZO\u0010\u0003W4#DMs\u001bKRNff7YJT:2B \u000bC\u00002L\u0019{\u00152\u0005-\u0011LxHJ\u0000{CF\u0013uV6\u001c\u001fvzhE?j6C+!PO0\b\u000e\u001c8\u000bjlatm\u001b7\f),[,\u0016\u0007\u0004T\u000521*6?'6)\u0014%\u001bw(TW\r\n S}+\u0000>u8\u001c5hx\u0005Ax\u001d\u0004\u0006\fXFK;J/\\;V\u00037o:Ro.g\u0005\u0007+}\u001cs<~qK\u0001\u0000\u0002srr\u0002@\u0004A\u000b{woT\u00197oY~~\u0013\fB+HO:djjgee]A\u001c\u000f\u001d:\u00046m(\u0014}>Q`#\u0010r>&5\u000f5Cyn\u0015WU}]\u0007\bT]'fE~XPp\u001b\n^W 9y\u0015\u001fy*HmW+\u001fuV?6i;(7\u0005@\u0005`o&#\u0003LYS\"o\u001f\r8\u0001\b9<\u000fc+crHFT39\u000f*K.y\u0005\u001bD\rf\u0016/^<mMqH#\u0000 b'N [\"&I0\u001d\n'A\u0016\u0017']I\b2\u00074\u0014GTUUAnpC46c_qU#\u0002\u00020.\u0011}o#\u000b{\u0010\u0002b~\u0012X~}\u001bl\u0019e}\u0019JC\u0014aZp}4\u0016*\\U\f\u001a\u0001jy{n\u000bp46\u001a\u001fz\\.WL*\u000b\u0004\u0000=8`\u001eZgA$J\r9`TW2hD\u001f\u0014V \u0010rEEFw`{_'#\u0003O\u0002`MJj9QT7}\u001d\tB4\u000fU\u0013Zf\b\u0011>`\b$q\u000f\u0012#;\bD\u001eyTB\u0011$Xplllt:\u000e5D}>GY}9\u0015@\u001f;\u0002jYJ:]Gf@J#)&n6\r\u0016!d$IQu\u0002\u0000u&\u0016FSNUXM&\u001b\u000f`JTQ\u0005B\r\u001a\u0002lD;>\u00189/\u0007&\u0007\b\u0019\nb\nQ|B%vEQ\u0004 /\u001eg]3nWZuu\u001f5\u0007o\u001dkV].o]~\t>@\tr[>,~N,LK\u0011knUU@\u0014\u0016C \u0012\u000f\u0001h4[\u0002=>\u0018(id%qB\tpNZ8Hfas`S\u001b\u0012whl?@$\u0000Mn2}Gl6\u001b\u0016gUU\u0012\u0004a.3\u0013C|[\b!\u001b\f\u0014\u000bt[+9/\u0010uedX_SEX\u00189][\u0010.\f\r\t/q\\}\u001a\u001bN\u0000 @:h\nWhg<\u0000s\u0001\u000e /h\u0000$B\u0005^\u0000\bEQJI\u0000\fChV\u0004\u0002,fU\u0016l(z_?^tvv-_|_,_\b& \r@?:-'%#\u0013h\t\u000f\u00020I\f5\u0003\"\f`m(^M\u0002`\bBR(\u0002,\u0017QJ0?B\u001fB'O\u000ecJ\u0017&1&\u00187Rq%2&j!tXNBFT\u0004\u0002+N&\u0001O\u0004dY~1v=\u001cg\u0010\t(\u0016N \u001ex!,m\u001b\r\u0014\u0016\u0016F\u0017(?c{ \bOpkFwH\u001bk\b,s1(w\u0001\boW\u0018j\u0006r%l~](%I\u0001\u0018\u001b\u0002,\u001fgi\\0\f\u001a\u0002wV\u0003S\u0014v^\u0006z/\u0011\u0004a+\\\u000bgsv\u0013\u001aVdV&#6\u0003FpFnS\t+~G\u000f`F\"\u00180\u0005X^L\u0002`\u0004ENo\b`p\u0018!PJ\u0000uQgx`\rwuurm\u0013Osrr`;0\u001cwep\u0001b\u001b\u0018\u000e\u001dJCW$UrH]\u0015#C \"$l\u0014EY!IYQL\u0002`\u0018Jb_\bl\t!Y\b\u0010I\tD,6gmm-s0`\bl*\b.\u000b\u0011\u0010\u000b \u0011\u0005ABPffB\u0017~\t\u0010U=[+7`JQ\u001a`m\n?\u0010\u0000\u001d\u000ec\u0001D\u0005Y(\u0002p\u0015NJJ\u001en\u0010\u0000$\u0003Ml\u0000\\\u0006D)p8X\u0002(>3JDp\u00010r6wc\u001b!]I\fFz\brY\u0000\"\u0000Hh0P\n\u00111YS\u00076\u0012f.:\u0014R\u0010NEQninor\u0000|as\u0010@z#\u001c\u0010\u0001p\u0003F8\u0001,P\u0010\b\u0006\u001b+ \"HcQ3n3X,\r\u0006+((HU\u00009M'v\u0000\\g\u0006pc[\u0011~HHW0]5-\\eQ{[z(pd+VN\rwL\u0002`n#\u0010LqR:\u000e\u0011vd\u000fD*MQa\n2\u0004XIb\t-\u0010\u001e\rn`kDQF6~eY.g97\u0005v\u000eFC\u001b\u0001X%:\u0010~\u000f)#HDHK|D}<\u0000x\u0014\u0016\u0016M\u0002`uF +p-\u0010\u0019B\b\u0007\u0005\u00100:\u0007g\\\u001eR9\u0010\b<t:\u000bc|PS\u0019c1 X+@\f\u0012y1>j\u0002`D\u0010W%Ig&\u0001\u000fc\b\b \u0003fH)\u00106BB)\u001fmnn,7SJ\u0017\u0006\t\u0005,].\u0003\t4\u001c(fvz4rY{\u0007r81\u0005:'I\u0000b|)Z\u0004JJJ$''Ow\u0011S\u00141vHA2+\u0011(:G\u0011\u0001\f\u0015 \u000bPPryJQQY\u0011kH\"20\u0011\u0010\u0011@\u0016'\u0007BHwBl(\b6\u0011\u0001\u0003\u0011$\u0012C\bLO:OQU$}M\u0002H.8\u0004l\u0018c?7~#*\u0012\u0012'\u0000Y\n\u001c\u000e\u001c8}\u000by\u0004[\u000b\u0001s \b\b7RE\u000f?\tm\tr$\u0004}\u001axssswI\u0000+m^\bx\u0004A($!@\u0006.8u>\u0016EQ\u001e$8L\u00020_D@?1\b\u001fO7F<B\u0012w~AQ\u0014C!L\u0002/bwQ PVVjPD\u000b$\b\u001bC\u00069F>aC\u0001PC+hC\u0004\bJf\u001d\u0013^\u0010@F\u0017\u0004ARP2@F\u001d\u0007\t]\u0001\u000b\u0018#,pA=E-Z?UUT\u0014\u000e~Q$\u0000F2\b\u0000z\u0014\u0004A3^\u000bb\u000b\u0010D*8~8{(\u000f$Iz<R=\u0004 Z&\u0002 zRJ0`kA\u0018\u0003`qz##v\u0012\u0007=TU=\t\u001dclt$9TU-=}t]wU\u0013~oM\u0002\u0010\u000bj;&\u0002} z\u0014\u0004\u0001\t]@\b/$Y<($mBk_^\u0018\u000b!qEQ6a~\b\u0003\u001f}\u0013\u0006\u0001\b\bK \b\u0002B\\\u0007W\u0014RWUU_'I\u0012'9\u001aM\u0002\u0010\rZf]\u0013\u000b\f\u0001\u0000\\`\u001f@4\b\f8\u0001v}\u0002/\u0010& Ds\u0011\rqN**GYb\u0012nD\u0003YDbE`\bWX\u0004Wy)\\U?U\u0015u\u0015!,IH\u0012W}_Ck\u00173m\"\b\u0004\u0000qk\u0001#\u0016\u001a\u001fZ{\u0004AsdJC&F\"OQQy%j?_\u001f\u001a?YDD@G\u0016\u001dn G\u0016 1B2fkkPvE6R8WU\u001eP\u001f7\b\b\u0018SFg.\f#ZH\u000e<PK\u0006W\u0000n!ju*Ic'r[;*W\u0004TG\u000bo|!A/\b\\d\b\u000b\u0007\u001fZ,g:12\"F`mIV]ozX41\u0011X\u0010H8\u0001xu-\u0016\u001a\u000e?%b\"u\u001dF\b\u0004\u00066@/\b$\u0000W&\u001e<Hy51L+z@?4&\u0002&\u0002\"P\u0002S\bn&12?l\u000f\tugrC\u0012\b\u0004\u0016\u0011\u001db\"`\"\u0010@\bK[,Y9\u000fcr7:UrkFNOM\u00004YDb@ n\u0002F2vX\u0002QF\"\u001dLaP7?>\u001c&Vcm\\]Q/ohp_\f\u001fQ\u0004b&\u0000,\u0019,RF;?:Q\u0010C=@BEmSP?te6i\"p^\"\u00105\u0001($O\u00186e+CgR,\fc\u00066`N\u001c\t^\u0005\u00027|\f\u001c#\u0010N}#);)\u0005Q)([fK\u0007}f\u0001@\u0006PYh\u0016\\_26s\u001c&\u0002a\u0002ks\u001d4\u0018n!dJ\u0010\u0014\r4\u001f\u0013nSI]{s,\u000emyyysUUM9CLy{SSu\u0010cvy\"`\u0000ly\u0014\u0014R\f;\u001allaNY\u0019y\u000b_j9Xc|9\u0010IO}\u001d$\u0000z\"FBR9o\u0014\b\u0004v._nl{\"\u0010\u0000xsF0Qo~\bt\u001d\u0000M;TM3\u0011Pv1nYRJoZD\u001a\u001bWN\u0017<CHID\u001cD ,\u0001\u0004~Gb)NM\u001f\u001c\u0014\u000f|]\n'\u0007\u001a\u0010\u00005\r^,{]\u0013'NL\u001bI(\t\u000e\u0001dA\u0018\u000e\u001d\u0017]i]|D'\u0002a\tkd.\u0015\u0004\u001e\u001bg\u0012'rBhX\u0001B,h.'n`;\u0004,X,/L4I/\u001fK\u0001};G\u0007Rz\u001eK;\u00177\u0002a\t\u001bK39eL\u0019\u0000\u001dA\u0004z\u0006\u0011&3 Pj$#F$\u0000\u001e']\u0010&8)5\u000f\"\u0018;VXX8>wM\u0004@\u0004%#ZfUsUv\"\u00197.\u0003LF7<P\u0019!\u0015_~aXQ\u0016\u0019$d\rK\u0016kH!k.5_2\u00025kv}:c2HUU;\u0014Ejf-wyg}\u0018\u0019G/\u0002@\\\u0016a\u001a\b\nF\n[4X\u00133c@\u0015R?,{\bU{xUBv-\u0015\u0004\u0001E-\u0004<O UUaC_mh}#BO-\u0016\u000b\u0019;v,IKK%\u0013\"js)))\u0019c*222\u001a9r%^u*\bVOiv1nobv~B6B&\u000b\t4h~8e-#Vm$\\cio\u0012\b*'=;\u0011\f57a?'\u00073J*{>'\u0016h, \u0010Hx7\u0003\u000f\u001a&|4\u001b,..fyyyL8G\u0011*Q: <q\u00049rcM{e|d\u0017o^\u0017dX&j\"IiE\u0003\u001d:\u000bpB>kV0^(s\u001dHaC*ne]\u000f3W\u0000AGZjN3\u000f(icX=YPJGbH#\u0015='\u0011\u0016r}'}\u0015+NDc<ey1cE\u0006H\u0005.~{\u0003z2DJm\u0016%3\u0010\b!;\u0010TJ\u0000dN<\u001e\u0013(o=\u0013\u000f#sR{q\\l\u0019I~:I,W>5yn\u0010Zqq%???b\b2e\u000b\u001c\u0005~\u0002ND\u001f\u001b\u0003L&\u0019.\u0007v\u000f'jQW;,_#\b&9s\u0018\u000b\f\u000e\u001c8\u00005N/k|\u0003nyyyq~\u0002[\u0010|kp0<v5\u0010:g7mY\u0005~2S\u001b;\u00113\u001f6_\u0015Es9?0\u0017F|f\u0014/7T\u0007\\\u001foX;\u0011@{G(??\u0005~I\u001d1XOE,}s}\u000e\u000b+++IWW\u0015n{k\"_m}733'L@RSS\u0011b\rYGG\u0007\u00163}lo\u000b\u001b\u0013oc\u0007B\u0012JvmaC\u0018X$Yn\u0012Mn&L;mtKl`1qRBKx$M26/\u001cp8\u0001`\u001cm=;W\u0018?Ag{74\u001cZ+#tlw]wuoo\u0019Ekk\u0015\u0015\u0015D\u001a\u0018L\u0012{2\u000bW$\u000eot2\u001b\rUy\u001f;.\u000e\u0015~l6D\u001b^sx^!G\u0012\u0000C\u001fK!@$,tsD\n|\u001d\u000e\"t%''.\\0\u001f/\u001eK2L!Adee<\u0003o\t\\!pd2\u0003H,HII,7W#bw:DJ?\u001dG\u001e[gmA\u001d;vozz8\rSuIy\"\u001c\fVJ\u0012&H\u001e]i/zo|F\u0018\u0019~5[{}sr~mXp8O1Ka\u0007P=\u0002(y<\u0015\u000e\u0015\u0014\u0014\u0004e\u000el6\to\u001fg=w7h}0\u0010J&)7E04\u0018LMMReCZT*UFIt\u000bp9:#P[[V\\\\</P\u0003\r i4\u001a\b\u0019!$1!a\fQ\u0002\u001f\u001bGI6n7#\u0017\u0006E)^WN6f3k;NV'HvD\n\b%\"\\H\u0006D{\u0017+\u00038\u001c!Q\u0014\u001dZlX\u0007\u0006\u0006 t\u001a\u001b/\tr\u0006&\u001awi\u001f`{{\u001boqhhH8\u0005N=>>>}9\u0002:::H[[/D\u0002H?//oWRReKAkhh8Zvq^^Zf\u0002\u0010I$\u0006|.\u0011?K!I'wqfs@pbC\u0011{]x\u0000y\u0006D\b\u000f\u0015RxRy%x|\t\u0011\u0004\u0019~~\u0000Wd\u000b\u0017.Vc4\u001aua0\u0018VC\u000f\u0003\fmmm(>(\u0017_\u000f\u0005'8\u001e/_~|AnM_h\f$cq;\"\u0000Wb\u00007T0{2R\\~1M#]%OdX\u0014&\u0000]{CuQ\f\bS\u0013 \t\u0016se\u0010e\u0006wT*xVV\u0016\u0019b\u0006Q\u0013owOn1#X'\u000b G4\u0001fdd\u001b{gZ[[_1L\u000f\u0001l;adC655&\u0016}\n\u0011UYYmEO\u0007AH:sCVe\u0004~^\\\\V\u000b\u00123gKKK\u0017A6n~c|-s$3S|d20_I/*\u001b}jRjF)++\u001bG1\u0015- \\\fp\\<xI|/\u0013\u001fki\u0002c\u001efC|q%x\u0011\u0004RJHC^^)r\u0018#\u0000\u0000\rIDAT\u000b7_kk+,$asrr.'\u0018@cc{#c\u0016}}^XX\u001d<yrp\u0019F*++ZTTc}\u0019WiiiD\rI+J}\u0004\u0014(tD\u0010\u0019{85\u000f><I{\u000e=\u0011X\u001779? aFDJj~Ovol@;w\u001cDGL&G5554\u0015\u0002&\u000b&d2)C$\n\n\nb0_\u0001\u00164x;dwOLL<[XXx\u0010FOk4\u001a\u001b\t|#\t,3\u0004GKKI\u00037\u000b7d$eu\tkMT`D\u000f\u001bsG\u0011a\u0012:,Pw\rf,\fzfl\u000b\u0016!z,\u000f5\u001f\u000eJ\u001e\n\u0004^NB{oR`8iii\u0013\n\u001d!\u0004;wZ,\t!%H\u001ec1{\u001e'ri!\u0012\u0002.\u0001\u0000_|0n\r\f\ftz<eo[jvy#w\"p` vbhs\u0003\u00199\fI?V\b\"B\u0012C6\u0018wuu\u0015L#=1=r\u000eA$)AHBw\u001e'Of+T\u001c\u0001L!N\u000e\r3R$Td%=[\u0019\f@.1\u0011\fx\n?X,\u0013<O\u001d\u000e`0M\u0014(\"M\u00010M\u0016F\u001e\"1epo=\u0011t1v\\\u0016jt:}E\b<dWaKKQ-[\fE\u0002H{/,Yx\u001cx\u0001d\u0000\u0013eee\u00117at\t~0\u001fVu\u0018>M\u0002\u000eMx6Y\u0016%Dv8\u001c5\t\u001fQ{\u0002IX\be\u0000NARQ>Uu}uJ/322\u001f{k\u0007\u000f\"\u001dDv$l\u0017k^ll\u0014{q\fgaa!\u001f\u0013\u00133!Zx#PpgP\u0003a?C6~@\u0007??\\pgtg+\u0019S\r?YVTQ\u0006v^t\u0004&\b\u0018\"e\u0002}1\u0001\bTO=p?@E\t1\b\b_ \u001eB(#.-V{{7@w\u000bv0^\u0001p\u001cmQ\u00145\u001f\u001c\nXQ9h\"\u0017 zs2`U\u001cTg\b&\t\n^{zzVk\u0012\\fqqqS&sB=;|\u000f\u001b\u0003@mS\u0002h\u0018\u0017!gnAj=\u001d\u0010\u0006\u0016#6D\u0012\u0003:\u000eBPDBz\u0004\t?F\u0015{\u0016\u0004D<N\by\u000eapv\u000e+G\u000e=\u00192\u001f\u0004gM&P\\H6qqqM\u0006Ax`2#\u00035\u0007YF14/\u001b\n6zV(A\u000f$>vX,\u001f]\u0005h2\u00007\u0004\u001a?P\u0007\u0007Yse,%wv\u0007\u001eR^\u0007.k*~>\u001d8p\u0012\\eeg\u0017\u0004]\b?\u0003`mt_\u0001<x(\u0012\u0013\u0013=\u0004`\u0007n6|r_P\u00161d\f\u0016,X5T3\u0016/0gPl&hF~W\u0014wx1v\"oj@\u000f\u0019GU\u001c\u0019vcc`\u0003\u0007\u0010\"FMx\r7>O\u000b9W_\nnfFx%\u0007yw?SCX\u001fiBt'\u0005Kk2\u00102PS:G|\u0001xlXUpn:icU\u0002,!\t\u0011&<88XDWU\t\u0006g1,zd\tIV\u0005\u0006O$,XK\\y%/|Z\u00144I?w\u0014\u0006\bGB8\u0014\u0004\t\u0000LJoX`,t{=J_8\\nR\u0005{\u0010T6\u001e\u000b____-[:y\fV\u001b\fP3\u0001R\u0010taF\u0019\u001f\u001f\u001f| \b~8a6_n<!cf\u0015\nrw(x\u000fp\r$8cKC/|H\u0000Y\n\u0019\u0000T\u0012\u001c\"$>ph\u0003i\u0000\u0011]\u0015P?\u0003\u000b\u0014t0CN[Rp\u001c\u0017E)\bA@\t\u0004\u000ei)^1\u001b]~a&C \u0012G\t|8\fm\u00131K.\\\u001cdW\u0016\t\u001d)=.\u000f\u0018\u0012{\"q\"\u0010\u0012\u0013\nH?,sOmI]\u0016\u0005`k.z*d\u0018(DcdACSPF$\u001c0[\n\u0000\u000e\b\u0014b#\bExI=R\u000e\u0010(\u0003c]o\u001e]\u0012Mp8>8n\u0019R\u0010Lh8Dl>Y\u0014)O)/J\"5`\u0013\"\u0001p\u0003\u0019O{4,+-\"!\u001be&\u001b8\bQ\u0004eS$7j1]GS  9\u001f)UId\u001b\u0016I_\u0005%.YWW\u0018\b\u0011\u000e`\u0017\u001c~\u000f\u0002\u0006?X\u0019c\u001d^wQCtkgQ\u0006p`]biLFABO\b\u001ff|R1q\u0013%=^\u001eX\u0007:\u0001(3\u001e`ex9!DE)EN~EE9AN\r*>\u0011[R\u0001N7Y\u0018\u0014\b\u0007h1&X(~zMA(C@\u0006 E\u001e1\b'qL`9\u0018\u001f\u0013\u0018\u0011\u0000\u0002\u0014\u0004v#JKtG=\u0014\u0018W?hL=b\u0019qF0\u0018\trac\u001eFtT&\u001av\r-]H\u0015\u0019lJ\u0011c\u000b\u001c\u0010\u001b4\u0010\"\u0012\u0013@_oLL#\u0000pn\u0012$E|xg\u001aQ|\u0014kR`R+h#i\u0010\u001833SHE \u0011 ;~\u001dL\u000f\f\u001aaOpwV]\u0007K<\u00041uFz\u0012H/\u0015{CJ\rvsQ\n6\nL\u0000\u00027tp}\u000f*c\fB\u0016E\u001c#\u0011:^FZYp\u0007\u0006\u001c\u0018nV\b.:-Jo4\u0005\u00018!\u0017*\u0002F\u0010A8()\u000e-+\u001b\u000eQ\u0018Q\n|\u0013)\u0001\u0010G\u001fq\u001cw+l\u0002`\u0002%\t\u0012\u0002c\u0003H\u001eB\u000ft \u001eE(+^zD\t(\u0005\u0015\n(f\u00008\u0012\u0001b\u000f& \u0005\u001f\u0006a}7#\u001d\u000b\\B-y>\u0014P\u0000@$\u001c'u40WK\u001bl\u0017?&U\u000f\u0019f$^MHJMJ1p \b{#[_\u0014Y<WT(ID)p-Q $\u0006\u0000Bx3Q/Xs(;},%\u0013D\u0017_\u0013|\u0012I+@v]\u0017\u00157)\u00102\u0003Q8bL1\u0013JQ.W\u0006\u0000<V\u0005\u001b\u0001T!##2\u0010kA$_S\u0018G'=(>TntD)\u0010@\u0014\b\u001b\u0003<!y;D)M\r\u0016\r\bJ[W\u000f\\\u001b\u001c]B\u00192J(XHs_\u001eROf]`i\u0012}.J@\u0019\u0000s(\u001b\u0004JnBH \u001crk6m\u0017=\u001d\u0004\u0011L0kG)0(:\u001e\u0000\u0000\u0000\u0000IENDB`"}},"snd":{"constructor":"Sound","arguments":["/projects/flappy-bnn/source/effect/Explosion.snd"],"blob":{"buffer":{"ogg":"data:application/ogg;base64,OggS\u0000\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u00008\u001co\u0000\u0000\u0000\u0000(;\u0001\u001e\u0001vorbis\u0000\u0000\u0000\u0000\u0001D\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0001OggS\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u00008\u001co\u0001\u0000\u0000\u0000\u000e\u000f=2\u0003vorbis-\u0000\u0000\u0000Xiph.Org libVorbis I 20101101 (Schaufenugget)\u0000\u0000\u0000\u0000\u0001\u0005vorbis\u001fBCV\u0001\u0000\u0000\u0001\u0000\u0018cT)FRJ\u0019s1FbJ\u0016BHs\u0014S9k \u0010\u001aSP)\u0005RRi\u0019c)\u0005R\u0010KI%t\u0012:'c\u0010[IkA\u001c\rRL)RB\b\u0019S)RJB\u0007%t\u000e:\u001cSJ(AsctJ$dLBH)J\u0007SNBH5R)\u001dsRRjA \u0010B \rU\u0000\u0000\u0001\u0000@\u0010\u001a\n\u0000P\u0000\u0000\u0010\u0018\u0002\u0002\u00002\u0000\u0000\u0004((#9cI\u0016\u0010\u001a\n\u0000\u0000\u0002\u0000\u0010\u0000\u0000p\u0014I\u0014$K,KDQU}6UUu]u]u 4d\u0015\u0000\u0000\u0001\u0000@H\u001a \fd\u0018\b\rY\u0005\u0000 \u0000\u0000\u0000F(\u0010\u0003BCV\u0001\u0000\u0000\u0001\u0000\u0000b(9&|sf9h*tp\"In*s9's8srf1h&s\u0012f)h&sAks9qF\u0018sAj6s\u00169j.s\"Im.s9s9s\u0017spN8sZnB\u0017s>\u0019{sB8s9s9sU\u0000\u0000\u0010\u0000\u0000A\u00186q H\u0018Ei\u0007$h\fr\nGR TI) 4d\u0015\u0000\u0000\b\u0000\u0000!\u0014RH!\u0014RH!\u0014R!\u0018b)\n*2,2,2:0\u0010C\f\u0012KMXck\u000eZiJ)RJ)\b\rY\u0005\u0000\u0000\u0000\u0010\b\u0019dAF!\u0014R!r)\u0002BCV\u0001\u0000\u0000\u0000\u0002\u0000\u0000\u0000<sDGtDGtDGtDGtDs<GDIDILLO\u0015U][ema\u0017vuuaYeYeYeYeYeYU\u0000\u0000\b\u0000\u0000\u0010B\b!\u0014RH!\u0018c1PB 4d\u0015\u0000\u0000\b\u0000 \u0000\u0000\u0000Q\u001cq$Gr$,I4K<<MDQ\u0014MTEWtEEMtMtUY]Ymm_m}}}}u\u001d\b\rY\u0005\u0000H\u0000\u0000HHH8$\u0001!\u0000\u0000\u0019\u0000\u0000\u0001\u0000(8H$IIYfjgz\u0002!\u0000\u0000@\u0000\u0000\u0001\u0000\u0000\u0000\u0000\u0000())9#JeZj(.\u0010\u001a\n\u0000\u0000\u0000\u001c\u001cI\u0014I\u001c\u0001BCV\u0001\u00002\u0000\u0000\u0002\u0000p\f\u0014,K<<MDOLO\u0015]\u0005BCV\u0001\u0000\u0000\u0000\u0002\u0000\u0000\u0000\u0000\u00000$R,Gs4ITKTMTK\u0015UOUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU5M4M 4d%\u0000\u0000\u0004\u0000b !%%\u0010\u00101&!^!\u00041\u0006\u00152\frB\u0010\u001e\b\rY\u0011\u0000D\u0001\u0000\u0000 \u0010s9G\u00129t\u001a\u001cRg)b(RsRGb,-vR\u0002\u0000\u0000\u0002\u001c\u0000\u0000\u0002,BCV\u0004\u0000Q\u0000\u00001H)\u0014b9C)s1\u001cs9tR*tNJ\u0018s9sR:'sNJ'\u0000\u0000\u0000\u0007\u0000\u0000\u000b\u0015\u0001@\u0000A<O4Q4O\u0014ESt]Q4]<LSU=TUSUmTUY<4=TU4UTUY6UUEUmuutUm][\u0016vQUmT]7U]}Yuc<ULu=teum[u]]LSMeume]we5t]Uet]veW]Y}ue_WeY\u0018v][t]WeW7VY}[ua<OU=t]4]Wu]_W]5eumT]Yve]Wu4et]6]W]Y}Wut]_WeYUWuYm7]UYWuuau]\u0018>U}SvteYn]8u}amXeY9~Xet]_Xm\u0018VY\u0016_}xu]\u0019n\fmc}Yf_w\u0018:+\f,\u000b,\u000b*,j1n,p\u001ck1Qu|_x\ntu]yf]utG8~\u0000\u0000\u0001\u0007\u0000\u0000\u0013@!+\u00028\u0001\u0000$dY(Y(hiiiZgi),iiZfhk)jimliil,Yyijgjiyjzh(j,[g'j*ilmmim-j,/iijgil+[(j,'k*jil-*mnljjl)i-iim.m\u001blhm-*-,o-p0l+o2}DeS5mTUYvee}4m[UU[6MeY}Yma4M6UUMmYmaevee[uu_}ep\n\u0000\u0000\u0018p\u0000\u0000\b0\f\u0014\u001a\u0012\u0000\u0002\u0000\u0000a1\bR9\u0007Q9 dA\b!9\b!9\u00072 R\bZ\u000b!Rk\u0005\u0000\u0000\u00148\u0000\u0000\u0004)8@!+\u0001T\u0000\u0000XjcI'Him['ih.+,+mlo.1\fG\u0001\u0000\t\u000e\u0000@\u00056pR4\u0016XhJ\u0000 \u0003\u00000\u0006!\u0010B\u0006!RJ!\u0012\u0000\u00000\u0000\u0000\u0010`B\u0019(4dE\u0000\u0010'\u0000\u0000\u0018C)RJ)RJ)RJ)RJ)RJ)RH)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJRJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)RJ)R\n\u0000p\u0000z0\f\u0014\u001a\u0012\u0000H\u0005\u0000\u0000QJ)\u00101\u0018cI()b9\u001cR\u001c\u0010Ri-9\b!RmsRZ1\u00183\u0014[9RRkVk5ZZ5s\u0016k9s1s9\u0018s9s\u0005\u000048\u0000\u001e:IX`!+\u0001T\u0000\u0000\u0002\u0019\u0018s9\u0010R9\u001c\u0010\"\u0018s9\b!T9\u001ct\u0010B\u0018s9\b!9\u001c\u0010B\b!s\u000e: \u0010B\u0007\u001d\u0010B\bA\b!\u0010J(!\u0010B\b!\u0010:\b!\u0010B\b!\u0010B\b!RJ\b!\u0010B\tP\u0000\u0000`\u0003\u0000@\r#\u0014\u0005\u0016\u001a\u0012\u0000\u0000\u0002\u0000\u001cRAA\rAQ3\rBL9bNj3\u0015S9\u0010t\u0012\u0019jA^2\u000b\u0000\u0000 \u0000 \u0004\u0010\u0018 (B\b1\u0000\u0000A\u0010\tU\f\u001a\u001c\u0001\u0003DD\u0000H.\u0003\\]\u0007B\bB\u0010X\u001c@\u0001\t88'\u001bST \u0000\u0000\u0000\u0000\u0000\f\u0000\u0001\u0000\u0000\"\"\b\u0000\u0000\u0000\u0000\u0000\u0016\u0000\u0000\u00008>*,.02468:<\u0002\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000@\u0000\u0000\u0000OggS\u0000\u00047A\u0000\u0000\u0000\u0000\u0000\u00008\u001co\u0002\u0000\u0000\u00000,a\u001f\u0015\u001f  \u001f\u001f   \u0019 \u001f\u001d\u001f\u001e\u001f#\u001e!\u001f\u001f\u001f\u001a\u001e\u001f\u001f\u001f \u001f!\u001f\u001f \u001c\u0019\u001f  \u001a \u001e\u001f\u001d\u001e\u001e ! \u001f\u0019\u001f\" \u001e\u001f\u001e\u001f\u001b\u001f\u001e\u001f\u001d  \u001e\u001f \u001f\u0019\u001c\u001c\u001f\u001e\u001d \u001f\u001e\u001f\u001e\u001f  \u001f\u001f \u001e\u0017\u001a\u001e\u001f\u0001\u0001g}\u0010`\u001f\u001fza|4\u001aFhcci\u0011\u0000t\u001f\u0000\u0000\u0000f$pf}~2\u0000t\u0007k\u001aPNT6+c,\\>aMK*M]9v7oJr\u001fcw\u0004ga~U,AU79\u0000|\u0007k\u0000>\u000birr%eJ\u0014\u0005ka\u00013Azl|s?n}\u00127>Sg\u001ct\u0007k&\t<\u001d!\u0005un-X+gXy-v\u0012\u0000kq[\u0014yF\u001bU//MT\u0001tj`9^9;\u00156L\\2</[l9D\u001e@i\u0000&X\"P\u000bf%\u0000lk\u001f\u0000uV\u0015e2kY\u0016_\u001fi\u0000n3+m6X[___W\u0006\u0005kQ~\u0004v|G\u0010us^eUlNW6n\u0003|i\u0007k\u0000^D':WNo%K\u0003|g\t`=V\u000b8888)_d\tdpw\u001f\u001cZ\u0013\u0003e\u0011s%T\u00063]Y\"w\u0005\u0000ia\u0016C\u0002xwe\u0017Wxye,\u0000|g\t`b+N)N)N)N2}\u0002\\~& %\u0000d?}fZm{}}}}}}}}}]{|\u0007\t2>\u0017\u001bO*\u0001t*\u001e\u0019\th\u0006\u0012ab%)\u001e+R.V\u0005|\u001f\u0001\u0004\u0015J)]Fv\u001dw\u0000t(\u001f\t\\W-{_o}w\u0012_=c}:t\u0007k&\t\u0015\tum^7g\u001b.\u0001kh:q\u0004m^+|EXYi)\u0000l'\u001f\u000e\u0006Hg3zwf\u001dt\u0007\u0011z\u001cgg7\u0003dg\u0005\u000fV\u0002RW78v1f\u0014=G\u0002de\u000fs\u0001F)ho\u0019?O}\u001f\u001d(\u0019taX^\txegu\u0019\u0001|i\u0005knM%\r7oY!\nl0OXS'kC;~]_W.Rf\u0007t@5I.U+J[\u0012\u0012X@\u0002tX\u00010GL}\u000bM\u0012\u0004\\aQ\u000b/x_V|J\u0003tg\u0004L\u001cY#ldNY\u0015_Wv)A\u0001l0\u0007m\u0002}RG[W\u001c~?9=^\u0001te`8#\u0007>m\u0013.cnq[t0\u000fVk\u0002oc{\tiAlr=2$&\u0017+.v\u0003i=\u0002wjs\u0019?\u001e\u001blNWl\u0000d\u0007k\u0006 \u0006\u001arY&]Wy\u0000T\u0007\u0010T]*\u000bZ\u001f5myl\u000757%S5{7Y?o\u0000|glr-\\~KX+.V<\u0000lU?;@5W.|N_4yG\u0006$\b`'.lNW6>:zOW6k6\u0001$qgg7X\u000e\u0000\u001cS9?@`x_tlj,$\ta5|6>\r\u001aM*Y\u001a\\,'<jQmiNAjCe6r*j<\u0017/~X,#&V:-W0\u001ez\u0018=\u00037\by!;\tj\\R\r\u0001\rz#\u0007\bwMdHR[$a?U~:|q\u0017}-\u0017J9.=y\u000bF1fr\u001fLnG:o5\u001cMWGH\u0014-\u0017uEM\u001ebFSI<\u0011\u0017rhr`$>}\u001aOSKvM\u0004 9\u001ec\u001cc#H%1\t5~u{<l-yq\u000f6(z\tO:qz6|Ky$ourdkrw2kz%f\u00005\u000bGHN\n)2%y7*){{Hr\u0004w\u0004l \u0007K\u0000nh%e'*9aJ^:Ln:&]e!T9h}tt\u0000ga@ICjx7=EX\u001a\u0000|i\u001d\b]Yo%\u0001iN6\t|xu.V\u0000ia~>\t\u001c[PT6+tesm\u0003d0\u0007kfgaN.Vb^bz\u001el\u000fVK\u0000Z\u00064I\"evvW+n\u0000l*0\u001cZ\u001c\u0013\u0013%g\u0003|i\u0007\u00021Ngfm3_&K\u0003da\n\\`K<7fe\u000eZq+|g\u0007k\u0017S)W\u000f7om}y:j\u0001l`9W\nl\u0011g4r9-gF\u0000l\u000f\u0001?(f_;g'\u0016TcY\u001f\u001ap5V)kw\u001a\u0000|c2\u0001t\rR\u001dWm\u0005l\u0007\r\u0017q[</Z|g]\u0001j\u001fCdnY{]{]{]K\u0014\u0019\u0000d\u0007k3Xud\u0002dg\u001f\f[\u0000OJmg\u0015z3|.&'\u0004l\u0007%\u0005\u00031IW)ZCR|L\u0000l\u000b\u001b\u000fV\u001b@rsq\u0010FU9\u0017l0\u0007kf@B=z;\u001d[%;d\u000fV\u000b5qR]u\u0001l`j\u0004\u0012\"nvt\u0006d\u000fXm\u0001BX\u0017WR/h\u001d|g?\u001d:tPQ^Sy\u001e\u001ete1X\u0003y\u0010B\bf5+U,^i&~nsvy9l\u000b0}o}?\rTv?`\u001d,\u001daTx*7Q\u0000l\u0007\u0005pVU1YKS..VV^R\u0005teu\u0003V/\u0014}xy*\u001bxz\u0007\\|\u000f4).r>ww2vw\u001b\u0000\\\u0004|B.uU=[gN\t\\a\u0019\u000fv\u000b$w^rZHY\u0015'\u000b\u0002lah~T$\u00115=(7=(5za+\u0012\\[\u0000~\u0019\u0010A7JlM\u0002D@\u0003q\u0000k$.UA%\u0000L] z1{.\u0015f\u0002\\[~H`rT\u001fnu=oooo\u0000\u0015-\u0000\u0016\u000eK02\u0000z8W_}W/\u001fro.y^\u0001n`\t\u001b3l~s;y(<oooo\u000e\u0000k\u0017PEMy\u0000\u0000\u0005+\u0000z\u0015\u0000u\u0000\u000e\u000e","mp3":"data:audio/mp3;base64,p\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000Info\u0000\u0000\u0000\u000f\u0000\u0000\u0000\u0010\u0000\u0000\u0014\u0000\u0010\u0010\u0010\u0010\u0010\u0010      000000@@@@@@PPPPPPP``````pppppp\u0000\u0000\u00009LAME3.99r\u0001\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0014`$\u0004B\u0000\u0000`\u0000\u0000\u0014\n\u0014&\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000p\u0000\u0000\u0007\u0019hta\u0000\u0003E1?4\u0000\u0000\u0000BO&L4\u0010@\u0010\u0004\u0001|\u001f\u0007@\u0010\u0004\u0003\u0000>~P\u0010\u0004\u0001\u0000>\u000f\u0004/\u0007(\b\u0002\u0001\bP!@\u0001\u0014\u0015\u0001!A-\r@  P\t0\u000bp1FxR@H7L :x \tKOS5v`\u0012hzTviK|B\u0013t6P'n*Xa>%FxlXa]}v\u0019WZk\u001bW>-jZ5U|k[5c4\u001e<>'\u00038|\u001f\u0003\tYr##Em\u001cr\t\u0011u9\nd\u001f0?4\u0003x\u001cO\u001aP(\u001e_\u0014p7q\"p\u0014R\u0006@dh4\u0011\u001134\u0015q]\n\u0012 R*)\u0004V*6VeQ~D)4d'9KIiT;\"ITQ&\u0002\u00007|B\u0007.\u001frl#\u001aTQ$eZPP\tyO7\tN:\u0019\u001a\u0018ll\u0011\u000e\b\\!2ZP/\u001c\u0000A\u0004%.\u000b\u0000p',^vq\u0002\u0002*(^?pkg8_B\u001b|u~Y==yo\u001c\u000b20\u0002%\f>Y5>68',ATu2\u0010\u0015p%cXuN9\u001c3\u0018p\b\u0000\u0012E={\nA4\u0000PkQ\u0015fO~l\u0018\u0007\u000e(\u0014\fn\u0003PTH\u001b%\u00074%-\u001aEm\u001a5gL\u0019l\u00165OLc_yy>1Lc^\u000b\u0013fh\u001eOLzc\u0018\u001a6fkqk9H7wiu[%)&\u0002B60b8\u0004LIk\u0016\u0016S8a&\u0014T\u0012g\u0016\u0017\u0016KV(Pf\u0006.{A\u000ef5u\u000b:B>7\u0010Hwj\u0015PiV\u0012X$fsU-\u000eC3XT*!\u0012/r\b\u0012`s\u00128\u0017.4\u0001\u0003\u000e=b\u001fm\u0018\u0003\u0001'\u0014\rk9C\u000ed\u001e-i4E\u0006D3}\u000fgq#DVD__zx\f\u0006\u0007V_.\b\u0006\n\u0003ZD\u001cq\u0000 Qh$H\u0015|\u0000@184&$%\u0010f%ypn {6<k7\u0011G7}Xg\u001cd,)\u00029<6937Acw3/x\u00049cwuLw.7y\f\u001dV.\u001c#\u0003\"J\u000f\u0010\b\u0000q\b%\u0005_A\u0005}M^1\u0015\u0001\u0014FU[VudE,Y+|4\u001fp\n\u0013\u0000o\nF%72\u0003QP-.!B{\u0000 \n\u0019'\u0007R\u001a=*FB\u0013>fW\u0016vf\u0015,h\u00023lo\u001a\u0014\u001bBo^\n8mg5X8\nYp:0s`b\\8gSJh+\u001bn]mmkvR@dNlnF\u0010\u00049:m5\u0011\u000e\u0002R`m!RR0BP6#WxIhf9*D1H\u001c4\u000e4\u0014Q_\fzdQ\u001cmcM\u00000HUP$W;8@!n\u0018F+\u0015r\u0007\u0012%[w\u0002N\"n0\u0000\u001585(\u0002\rDj`V\u0019\f>\u000b\u000b\u00062I;D8LLWa?Ix*dQ4/\u001a\u0015)hx1)\u0017Vjjdx%Z(/,E\u0013Tz[VQ#cc+\u0016==\u0012<:oe|v?\u001a\t$V\u0018i\t\nR|a!\u001c3/\u001dZ\\K5\fuc\u0010:D`n;M6ol\u0019JG5kx!X\u001e{\u00195\u0016;CmH/&D\u00160\u000e\nwB\u0001Y9s\tujp\u0007\u00128m9\u0000\nBn2\u0001\u000bY}JxWeH!]*\u000b\"g-.)=\u0001kc%+Q\tM\"Pm.]B\u0012LO8\rgk1t]\n'mR\u0012\u0000\u0003'F`i\b}D6r(c!|}%Vv;\u001dO7RF\f\u0006\u000bA\u000f;~VRLV\u001ePxp\b \u00008D\u0011<|L$'Kzi2O&NK\b9Cnnly\u0003w\u0014}6_lWdLR\u0018\u000032\u0015j9f\u0018TH-v]Gj\u0002r\b\u0000\u00121{\u0012N\u001b.72\u0000\u0006\u0015\b\u0000\u0013\u001a+tD\n09IR\";p1i\u001c\u0005KKYRKJ-MS\"]\u001c!uh$\u001e\u00061H\u0012dOnID5\"X}G\u0004A5]2D\u0006\u00034\u0003'Zm(\u0016T) \u0000B\u0001d$<`r/.hf8Z% kn2JShpR)*KM\u001e,\u000eX\u0010O?\u001b9`C\u0004=\u0014xWx=@&$\u000bd\u0002!p\">\\\u001c\u00070p\u001f\u0004\"\t9#\u0005WygTf3\u001cp\b\u0000\u0012Ti\n1n72\u00023b@&d\u0005s44Ma$\r].\u0007SD!'Il%s\u0003\u0019\u000fkUJM\rU0@aZ\u0018%\\Z\u0006[c>\u0005\b\u0000\u001eRh*) Ol$\u0015!>\nH*)\u0002hZe\u0016DP(\u0010\u0015 f\u000bi;%V\u0007'B\u0000cW\u0014s8/4y\u0015&\u0004Jgnt(!\u0007\u000ftwOkh\nSS\u0019Uo\u0019]\u0019y\n\rA(\u000e\u000f ow!(\u001cAK\\V8m@\r\u0002\u000b\u001br\n\u0012\fs\u0000\nU/.w0\u0001e\r`6 ,\u0001\u0017D\u0010$#$R\u001e^hfH)|\u000b Bq?eo~%WZ\\bb6)3g*_PZ2|Y[Y!&*kBBQ\u0019{,}4@\rm\rvAhPw4I%2\u0017]Yb\u00064\u001d5\u001e\u0006>>\u0010D \u001d\n:7<t@M\\;\u001aLM$=\u0013v\u0017\u000e'gb-On}\u000eIO-tc(O8<f\n\u0012#\na(\u0002\u0010T\u0010QZ;\f!Tp\n\u0000\u00120Z\u0019\u0002_?4\u0000n\u0002P&\u0011\u0007Xy\u00030PWG&\u0003\u0014v\u000eB\t2oS1IA3E\u001eEhA\u0014z\n?5IT!C__,M0dp8*\u0010\u0012|H*\u0010\u0002\u0019\u0011\u0001\u0019!Q`&\u0005\u0003\u0004\"\u0012$\u0011\u0006BBrXCfvhevfU}u@P\r?PC\u0001\u0016H@$\b\u0015|D[K&K\u0004A\ru\u0019\u0019\u0015!z\u0012\nLay\u0013\"\bd\u00130gZ\u000e\u000f\u0012XJujIj@R(\u0014KIE]]^xJ\u001e7.\u001a\u001b?\r\u0017\u0005?\u000e\u0019\u001c302:p#\u0000D\b\u0003\u0006\u0003\u0000B!\u0010\u0000r\u0007\u0000\u0011IK[\u0002\u001c\u001d0\u0000\u0019\u001b\u0011_\u001egl3Z8f1,\u0004y\f.\u001bD\u000f./I\u001a\u001c\u0010I\u0003.05@cie^n}U\u001ec~\u001cKe1;<=;y\"@wc~{[tl\u001d\u0004S;{\u000b\u001aG\u0005\u001aT\u0011Xr\u0013ymL\u0019p\u000bl~\u001e\u00067\\\u0014\"-\u0002L;\u001fS_\u001a3jG?I\u0002\b\u0013\u0002\b$\r2@d\r\u000b\b\r$-j \u0005CF3t6\u0013dy<L|8i@2\u0017}|AsD#p\u0010\u0010@m\n-2\u0001TDDm)\f8\u001b\u0011\u0010\u0019c\u0010I\u0007$\b \u0004\u0016[|*\u0010Stzc`\u001d\r<^~o,A!q?5\f<iQI\u001fF@p\u0006\u0001C\u0017\nX5\u0010S\u0003\bBd>H'L\\V**zq\u000fy\u001e(&W;\rWQmZ\bYW\u00193i^:C,|mzf\r/kjmvfm3;mf\r\u001b~8~\u0010\u00110_;a!U\u0015\u0000\f\u0016qhZe\u001ae]-\u001aE@H$\u000e\u0000Lb\"r\n\u0000\u0010m\u0013_\u0001Ap\u00005d\u001aq\u001c=\u0014R3\u001c\u0004+L\u00076\"\u001cb\u000eD\u00018\u0012tq8qVJI/\u0013mKLpJHle#)]%c\u0014\u000e\"nI\u0017w\u0001\"\u0001:9\u000e\\8\u0000@\u0000.sQ]wSWwf{mY>fQ[Vc+YC\u0010\u001a:\u000f\nNa2)8\\`\\D(%4B.\u001f\u001b\u000e\u000e8.0*\f\u001f\u000e\u0004@\u0000\r\u0015xDT]ZB9F6nTJs4<q7qG)(\u0005Q\u0010kHp\u001e\u0000\r&\u0011\b\u0000\u0015\u0001A\u0012\u0015buR#He$r\u001e\u0005\u0002Db'&Rx!\u0016d\u001fAvL$\u0010\u0000\\;u\u0013Swz7{*{O2>AZD\u001c,n\\yX3\u001a\"fE\u0002qY-95%1\u0017QXLPuTEA \u0000'\u0014\u0015,D\u0019'+KJT6)|7\u001fd3~`!F3cjR{-=\\\u0019\u001f}k`z\u001fLOY%#uA\u0010\n\rLLAME3.99.5UUUUUUUUUUUUUUUUUUUUUUUUrG\u0010\u0000\u00004\u0000\u0000\u0004UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU"}}}},"exports":"function(lychee, global, attachments) {\n\n\tconst _CONFIG  = attachments[\"json\"].buffer;\n\tconst _TEXTURE = attachments[\"png\"];\n\tconst _SOUND   = attachments[\"snd\"];\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(states) {\n\n\t\tthis.delay    = 0;\n\t\tthis.duration = 250;\n\t\tthis.frame    = 7;\n\t\tthis.position = { x: null, y: null, z: null };\n\n\t\tthis.__frame  = 0;\n\t\tthis.__map    = Math.random() > 0.5 ? _CONFIG.map['default'] : _CONFIG.map['fire'];\n\t\tthis.__origin = 0;\n\t\tthis.__start  = null;\n\t\tthis.__sound  = true;\n\n\n\t\tthis.delay    = typeof states.delay === 'number'    ? (states.delay    | 0) : 0;\n\t\tthis.duration = typeof states.duration === 'number' ? (states.duration | 0) : 250;\n\n\t\tif (states.position instanceof Object) {\n\t\t\tthis.position.x = typeof states.position.x === 'number' ? (states.position.x | 0) : null;\n\t\t\tthis.position.y = typeof states.position.y === 'number' ? (states.position.y | 0) : null;\n\t\t\tthis.position.z = typeof states.position.z === 'number' ? (states.position.z | 0) : null;\n\t\t}\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {};\n\n\n\t\t\tif (this.delay !== 0)      states.delay    = this.delay;\n\t\t\tif (this.duration !== 250) states.duration = this.duration;\n\n\n\t\t\tif (this.position.x !== null || this.position.y !== null || this.position.z !== null) {\n\n\t\t\t\tstates.position = {};\n\n\t\t\t\tif (this.position.x !== null) states.position.x = this.position.x;\n\t\t\t\tif (this.position.y !== null) states.position.y = this.position.y;\n\t\t\t\tif (this.position.z !== null) states.position.z = this.position.z;\n\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'game.effect.Explosion',\n\t\t\t\t'arguments':   [ states ]\n\t\t\t};\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tlet t = (this.__clock - this.__start) / this.duration;\n\t\t\tif (t > 0 && t <= 1) {\n\n\t\t\t\tlet frame    = (this.__frame | 0);\n\t\t\t\tlet map      = this.__map[frame] || null;\n\t\t\t\tlet position = this.position;\n\n\t\t\t\tif (map !== null) {\n\n\t\t\t\t\tlet x1 = position.x + offsetX - map.w / 2;\n\t\t\t\t\tlet y1 = position.y + offsetY - map.h / 2;\n\n\n\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\t_TEXTURE,\n\t\t\t\t\t\tmap\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(entity, clock, delta) {\n\n\t\t\tthis.__clock = clock;\n\n\n\t\t\tif (this.__start === null) {\n\t\t\t\tthis.__start = clock + this.delay;\n\t\t\t}\n\n\n\t\t\tlet t = (clock - this.__start) / this.duration;\n\t\t\tif (t < 0) {\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (this.__origin === null) {\n\t\t\t\t\tthis.__origin = 0;\n\t\t\t\t}\n\n\t\t\t\tif (this.__sound === true) {\n\t\t\t\t\tthis.__sound = false;\n\t\t\t\t\t_SOUND.play();\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tlet origin = this.__origin;\n\t\t\tlet frame  = this.frame;\n\t\t\tlet f      = origin;\n\n\t\t\tif (t <= 1) {\n\n\t\t\t\tf += t * (frame - origin);\n\n\n\t\t\t\tthis.__frame = f;\n\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tthis.__frame = frame;\n\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.Service":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.Service","url":"/libraries/lychee/source/net/Service.js"}],"blob":{"attaches":{},"includes":["lychee.event.Emitter"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter  = lychee.import('lychee.event.Emitter');\n\tconst _SERVICES = {};\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _plug_broadcast = function() {\n\n\t\tlet id = this.id;\n\t\tif (id !== null) {\n\n\t\t\tlet cache = _SERVICES[id] || null;\n\t\t\tif (cache === null) {\n\t\t\t\tcache = _SERVICES[id] = [];\n\t\t\t}\n\n\n\t\t\tlet found = false;\n\n\t\t\tfor (let c = 0, cl = cache.length; c < cl; c++) {\n\n\t\t\t\tif (cache[c] === this) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (found === false) {\n\t\t\t\tcache.push(this);\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _unplug_broadcast = function() {\n\n\t\tthis.setMulticast([]);\n\n\n\t\tlet id = this.id;\n\t\tif (id !== null) {\n\n\t\t\tlet cache = _SERVICES[id] || null;\n\t\t\tif (cache !== null) {\n\n\t\t\t\tfor (let c = 0, cl = cache.length; c < cl; c++) {\n\n\t\t\t\t\tif (cache[c] === this) {\n\t\t\t\t\t\tcache.splice(c, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(id, tunnel, type) {\n\n\t\tthis.id     = typeof id === 'string'                        ? id     : null;\n\t\tthis.tunnel = lychee.interfaceof(lychee.net.Tunnel, tunnel) ? tunnel : null;\n\t\tthis.type   = lychee.enumof(Composite.TYPE, type)           ? type   : null;\n\n\t\tthis.__multicast = [];\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tif (this.id === null) {\n\t\t\t\tconsole.error('lychee.net.Service: Invalid (string) id. It has to be kept in sync with the lychee.net.Client and lychee.net.Remote instance.');\n\t\t\t}\n\n\t\t\tif (this.tunnel === null) {\n\t\t\t\tconsole.error('lychee.net.Service: Invalid (lychee.net.Tunnel) tunnel.');\n\t\t\t}\n\n\t\t\tif (this.type === null) {\n\t\t\t\tconsole.error('lychee.net.Service: Invalid (lychee.net.Service.TYPE) type.');\n\t\t\t}\n\n\t\t}\n\n\n\t\t_Emitter.call(this);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tif (this.type === Composite.TYPE.remote) {\n\n\t\t\tthis.bind('plug',   _plug_broadcast,   this);\n\t\t\tthis.bind('unplug', _unplug_broadcast, this);\n\n\t\t}\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\t// 'default': 0, (deactivated)\n\t\t'client': 1,\n\t\t'remote': 2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.Service';\n\n\t\t\tlet id     = null;\n\t\t\tlet tunnel = null;\n\t\t\tlet type   = null;\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.id !== null)   id   = this.id;\n\t\t\tif (this.type !== null) type = this.type;\n\n\t\t\tif (this.type === Composite.TYPE.client) {\n\t\t\t\ttunnel = '#MAIN.client';\n\t\t\t} else {\n\t\t\t\ttunnel = null;\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = id;\n\t\t\tdata['arguments'][1] = tunnel;\n\t\t\tdata['arguments'][2] = type;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * SERVICE API\n\t\t */\n\n\t\tmulticast: function(data, service) {\n\n\t\t\tdata    = data instanceof Object    ? data    : null;\n\t\t\tservice = service instanceof Object ? service : null;\n\n\n\t\t\tif (data === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\n\t\t\tlet type = this.type;\n\t\t\tif (type === Composite.TYPE.client) {\n\n\t\t\t\tif (service === null) {\n\n\t\t\t\t\tservice = {\n\t\t\t\t\t\tid:    this.id,\n\t\t\t\t\t\tevent: 'multicast'\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\tdata:    data,\n\t\t\t\t\t\tservice: service\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:     this.id,\n\t\t\t\t\t\tmethod: 'multicast'\n\t\t\t\t\t});\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t} else if (type === Composite.TYPE.remote) {\n\n\t\t\t\tif (data.service !== null) {\n\n\t\t\t\t\tfor (let m = 0, ml = this.__multicast.length; m < ml; m++) {\n\n\t\t\t\t\t\tlet tunnel = this.__multicast[m];\n\t\t\t\t\t\tif (tunnel !== this.tunnel) {\n\n\t\t\t\t\t\t\tdata.data.tid = this.tunnel.host + ':' + this.tunnel.port;\n\n\t\t\t\t\t\t\ttunnel.send(\n\t\t\t\t\t\t\t\tdata.data,\n\t\t\t\t\t\t\t\tdata.service\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tbroadcast: function(data, service) {\n\n\t\t\tdata    = data instanceof Object    ? data    : null;\n\t\t\tservice = service instanceof Object ? service : null;\n\n\n\t\t\tif (data === null || this.id === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\n\t\t\tlet type = this.type;\n\t\t\tif (type === Composite.TYPE.client) {\n\n\t\t\t\tif (service === null) {\n\n\t\t\t\t\tservice = {\n\t\t\t\t\t\tid:    this.id,\n\t\t\t\t\t\tevent: 'broadcast'\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\tdata:    data,\n\t\t\t\t\t\tservice: service\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:     this.id,\n\t\t\t\t\t\tmethod: 'broadcast'\n\t\t\t\t\t});\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t} else if (type === Composite.TYPE.remote) {\n\n\t\t\t\t// XXX: Allow method calls from remote side\n\t\t\t\tif (data !== null && service !== null) {\n\n\t\t\t\t\tdata = {\n\t\t\t\t\t\tdata:    data,\n\t\t\t\t\t\tservice: service\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\n\t\t\t\tif (data.service !== null) {\n\n\t\t\t\t\tlet broadcast = _SERVICES[this.id] || null;\n\t\t\t\t\tif (broadcast !== null) {\n\n\t\t\t\t\t\tfor (let b = 0, bl = broadcast.length; b < bl; b++) {\n\n\t\t\t\t\t\t\tlet tunnel = broadcast[b].tunnel;\n\t\t\t\t\t\t\tif (tunnel !== this.tunnel) {\n\n\t\t\t\t\t\t\t\tdata.data.tid = this.tunnel.host + ':' + this.tunnel.port;\n\n\t\t\t\t\t\t\t\ttunnel.send(\n\t\t\t\t\t\t\t\t\tdata.data,\n\t\t\t\t\t\t\t\t\tdata.service\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taccept: function(message, blob) {\n\n\t\t\tmessage = typeof message === 'string' ? message : null;\n\t\t\tblob    = blob instanceof Object      ? blob    : null;\n\n\n\t\t\tif (message !== null) {\n\n\t\t\t\tlet tunnel = this.tunnel;\n\t\t\t\tif (tunnel !== null) {\n\n\t\t\t\t\ttunnel.send({\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t\tblob:    blob\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    this.id,\n\t\t\t\t\t\tevent: 'success'\n\t\t\t\t\t});\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\treject: function(message, blob) {\n\n\t\t\tmessage = typeof message === 'string' ? message : null;\n\t\t\tblob    = blob instanceof Object      ? blob    : null;\n\n\n\t\t\tif (message !== null) {\n\n\t\t\t\tlet tunnel = this.tunnel;\n\t\t\t\tif (tunnel !== null) {\n\n\t\t\t\t\ttunnel.send({\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t\tblob:    blob\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    this.id,\n\t\t\t\t\t\tevent: 'error'\n\t\t\t\t\t});\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetMulticast: function(multicast) {\n\n\t\t\tmulticast = multicast instanceof Array ? multicast : null;\n\n\n\t\t\tif (multicast !== null) {\n\n\t\t\t\tthis.__multicast = multicast.filter(function(instance) {\n\t\t\t\t\treturn lychee.interfaceof(lychee.net.Tunnel, instance);\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.remote.Debugger":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.remote.Debugger","url":"/libraries/lychee/source/net/remote/Debugger.js"}],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\tconst _TUNNELS = [];\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _bind_console = function(event) {\n\n\t\tthis.bind(event, function(data) {\n\n\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\tlet receiver = data.tid || null;\n\t\t\t\tif (receiver !== null) {\n\n\t\t\t\t\tlet tunnel = _TUNNELS.find(function(client) {\n\t\t\t\t\t\treturn (client.host + ':' + client.port) === receiver;\n\t\t\t\t\t}) || null;\n\n\t\t\t\t\tif (tunnel !== null) {\n\n\t\t\t\t\t\ttunnel.send(data, {\n\t\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\t\tevent: 'console'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\tconst _bind_relay = function(event) {\n\n\t\tthis.bind(event, function(data) {\n\n\t\t\tlet sender   = null;\n\t\t\tlet receiver = data.tid || null;\n\n\t\t\tif (this.tunnel !== null) {\n\t\t\t\tsender = this.tunnel.host + ':' + this.tunnel.port;\n\t\t\t}\n\n\n\t\t\tif (sender !== null && receiver !== null) {\n\n\t\t\t\tlet tunnel = _TUNNELS.find(function(client) {\n\t\t\t\t\treturn (client.host + ':' + client.port) === receiver;\n\t\t\t\t}) || null;\n\n\t\t\t\tif (tunnel !== null) {\n\n\t\t\t\t\tdata.receiver = sender;\n\n\t\t\t\t\ttunnel.send(data, {\n\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\tevent: event\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(remote) {\n\n\t\t_Service.call(this, 'debugger', remote, _Service.TYPE.remote);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('plug', function() {\n\n\t\t\t_TUNNELS.push(this.tunnel);\n\n\t\t}, this);\n\n\t\tthis.bind('unplug', function() {\n\n\t\t\tlet index = _TUNNELS.indexOf(this.tunnel);\n\t\t\tif (index !== -1) {\n\t\t\t\t_TUNNELS.splice(index, 1);\n\t\t\t}\n\n\t\t}, this);\n\n\n\t\t// Relay events to proper tunnel (data.tid)\n\t\t_bind_relay.call(this, 'define');\n\t\t_bind_relay.call(this, 'execute');\n\t\t_bind_relay.call(this, 'expose');\n\t\t_bind_relay.call(this, 'snapshot');\n\n\t\t// Relay events to proper tunnel (data.receiver > data.tid)\n\t\t_bind_console.call(this, 'define-value');\n\t\t_bind_console.call(this, 'execute-value');\n\t\t_bind_console.call(this, 'expose-value');\n\t\t_bind_console.call(this, 'snapshot-value');\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.remote.Debugger';\n\t\t\tdata['arguments']   = [];\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.remote.Storage":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.remote.Storage","url":"/libraries/lychee/source/net/remote/Storage.js"}],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(remote) {\n\n\t\t_Service.call(this, 'storage', remote, _Service.TYPE.remote);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('sync', function(data) {\n\n\t\t\tthis.broadcast(data, {\n\t\t\t\tid:    this.id,\n\t\t\t\tevent: 'sync'\n\t\t\t});\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.remote.Storage';\n\t\t\tdata['arguments']   = [];\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsync: function(objects) {\n\n\t\t\tobjects = objects instanceof Array ? objects : null;\n\n\n\t\t\tif (objects !== null && this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\tobjects:   objects\n\t\t\t\t}, {\n\t\t\t\t\tid:    'storage',\n\t\t\t\t\tevent: 'sync'\n\t\t\t\t});\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.remote.Stash":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.remote.Stash","url":"/libraries/lychee/source/net/remote/Stash.js"}],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function(lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(remote) {\n\n\t\t_Service.call(this, 'stash', remote, _Service.TYPE.remote);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('sync', function(data) {\n\n\t\t\tthis.broadcast(data, {\n\t\t\t\tid:    this.id,\n\t\t\t\tevent: 'sync'\n\t\t\t});\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.remote.Stash';\n\t\t\tdata['arguments']   = [];\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsync: function(assets) {\n\n\t\t\tassets = assets instanceof Object ? assets : null;\n\n\n\t\t\tif (assets !== null && this.tunnel !== null) {\n\n\t\t\t\tlet data = {};\n\n\t\t\t\tfor (let id in assets) {\n\t\t\t\t\tdata[id] = lychee.serialize(assets[id]);\n\t\t\t\t}\n\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\tassets:    data\n\t\t\t\t}, {\n\t\t\t\t\tid:    'stash',\n\t\t\t\t\tevent: 'sync'\n\t\t\t\t});\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Entity":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.app.Entity","url":"/libraries/lychee/source/app/Entity.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_effect = function(effect) {\n\n\t\tif (effect instanceof Object) {\n\n\t\t\tif (\n\t\t\t\ttypeof effect.update === 'function'\n\t\t\t\t&& typeof effect.render === 'function'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _sphere_sphere = function(a, b) {\n\n\t\tlet dx  = Math.sqrt(Math.pow(b.position.x - a.position.x, 2));\n\t\tlet dy  = Math.sqrt(Math.pow(b.position.y - a.position.y, 2));\n\t\tlet dz  = Math.sqrt(Math.pow(b.position.z - a.position.z, 2));\n\n\t\tlet rxy = 0;\n\t\tlet rxz = 0;\n\n\t\tif (a.shape === Composite.SHAPE.sphere) {\n\t\t\trxy += a.radius;\n\t\t\trxz += a.radius;\n\t\t}\n\n\t\tif (b.shape === Composite.SHAPE.sphere) {\n\t\t\trxy += b.radius;\n\t\t\trxz += b.radius;\n\t\t}\n\n\t\treturn ((dx + dy) <= rxy && (dx + dz) <= rxz);\n\n\t};\n\n\tconst _sphere_cuboid = function(a, b) {\n\n\t\tlet r  = a.radius;\n\t\tlet hw = b.width  / 2;\n\t\tlet hh = b.height / 2;\n\t\tlet hd = b.depth  / 2;\n\n\t\tlet ax = a.position.x;\n\t\tlet ay = a.position.y;\n\t\tlet az = a.position.z;\n\n\t\tlet bx = b.position.x;\n\t\tlet by = b.position.y;\n\t\tlet bz = b.position.z;\n\n\t\tlet colx = (ax + r >= bx - hw) && (ax - r <= bx + hw);\n\t\tlet coly = (ay + r >= by - hh) && (ay - r <= by + hh);\n\n\t\tif (a.shape === Composite.SHAPE.circle) {\n\t\t\tr = 0;\n\t\t}\n\n\t\tlet colz = (az + r >= bz - hd) && (az - r <= bz + hd);\n\n\t\treturn (colx && coly && colz);\n\n\t};\n\n\tconst _cuboid_cuboid = function(a, b) {\n\n\t\tlet dx = Math.abs(b.position.x - a.position.x);\n\t\tlet dy = Math.abs(b.position.y - a.position.y);\n\t\tlet dz = Math.abs(b.position.z - a.position.z);\n\n\t\tlet hw = (a.width  + b.width)  / 2;\n\t\tlet hh = (a.height + b.height) / 2;\n\t\tlet hd = (a.depth  + b.depth)  / 2;\n\n\t\treturn (dx <= hw && dy <= hh && dz <= hd);\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.width  = typeof states.width === 'number'  ? states.width  : 0;\n\t\tthis.height = typeof states.height === 'number' ? states.height : 0;\n\t\tthis.depth  = typeof states.depth === 'number'  ? states.depth  : 0;\n\t\tthis.radius = typeof states.radius === 'number' ? states.radius : 0;\n\n\t\tthis.alpha     = 1;\n\t\tthis.collision = Composite.COLLISION.none;\n\t\tthis.effects   = [];\n\t\tthis.shape     = Composite.SHAPE.rectangle;\n\t\tthis.state     = 'default';\n\t\tthis.states    = { 'default': null };\n\t\tthis.position  = { x: 0, y: 0, z: 0 };\n\t\tthis.velocity  = { x: 0, y: 0, z: 0 };\n\n\n\t\tthis.setAlpha(states.alpha);\n\t\tthis.setCollision(states.collision);\n\t\tthis.setShape(states.shape);\n\t\tthis.setStates(states.states);\n\t\tthis.setState(states.state);\n\t\tthis.setPosition(states.position);\n\t\tthis.setVelocity(states.velocity);\n\n\n\t\tstates = null;\n\n\t};\n\n\n\t// Same ENUM values as lychee.ui.Entity\n\tComposite.COLLISION = {\n\t\tnone: 0,\n\t\tA:    1,\n\t\tB:    2,\n\t\tC:    3,\n\t\tD:    4\n\t};\n\n\n\t// Same ENUM values as lychee.ui.Entity\n\tComposite.SHAPE = {\n\t\tcircle:    0,\n\t\trectangle: 1,\n\t\tsphere:    2,\n\t\tcuboid:    3\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {};\n\n\n\t\t\tif (this.width  !== 0) states.width  = this.width;\n\t\t\tif (this.height !== 0) states.height = this.height;\n\t\t\tif (this.depth  !== 0) states.depth  = this.depth;\n\t\t\tif (this.radius !== 0) states.radius = this.radius;\n\n\t\t\tif (this.alpha !== 1)                            states.alpha     = this.alpha;\n\t\t\tif (this.collision !== Composite.COLLISION.none) states.collision = this.collision;\n\t\t\tif (this.shape !== Composite.SHAPE.rectangle)    states.shape     = this.shape;\n\t\t\tif (this.state !== 'default')                    states.state     = this.state;\n\t\t\tif (Object.keys(this.states).length > 1)         states.states    = this.states;\n\n\n\t\t\tif (this.position.x !== 0 || this.position.y !== 0 || this.position.z !== 0) {\n\n\t\t\t\tstates.position = {};\n\n\t\t\t\tif (this.position.x !== 0) states.position.x = this.position.x;\n\t\t\t\tif (this.position.y !== 0) states.position.y = this.position.y;\n\t\t\t\tif (this.position.z !== 0) states.position.z = this.position.z;\n\n\t\t\t}\n\n\n\t\t\tif (this.velocity.x !== 0 || this.velocity.y !== 0 || this.velocity.z !== 0) {\n\n\t\t\t\tstates.velocity = {};\n\n\t\t\t\tif (this.velocity.x !== 0) states.velocity.x = this.velocity.x;\n\t\t\t\tif (this.velocity.y !== 0) states.velocity.y = this.velocity.y;\n\t\t\t\tif (this.velocity.z !== 0) states.velocity.z = this.velocity.z;\n\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.app.Entity',\n\t\t\t\t'arguments':   [ states ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\t\t\t\teffects[e].render(renderer, offsetX, offsetY);\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet velocity = this.velocity;\n\n\t\t\tif (velocity.x !== 0 || velocity.y !== 0 || velocity.z !== 0) {\n\n\t\t\t\tlet x = this.position.x;\n\t\t\t\tlet y = this.position.y;\n\t\t\t\tlet z = this.position.z;\n\n\n\t\t\t\tlet vt = delta / 1000;\n\n\t\t\t\tif (velocity.x !== 0) {\n\t\t\t\t\tx += velocity.x * vt;\n\t\t\t\t}\n\n\t\t\t\tif (velocity.y !== 0) {\n\t\t\t\t\ty += velocity.y * vt;\n\t\t\t\t}\n\n\t\t\t\tif (velocity.z !== 0) {\n\t\t\t\t\tz += velocity.z * vt;\n\t\t\t\t}\n\n\n\t\t\t\tthis.position.x = x;\n\t\t\t\tthis.position.y = y;\n\t\t\t\tthis.position.z = z;\n\n\t\t\t}\n\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\tlet effect = effects[e];\n\t\t\t\tif (effect.update(this, clock, delta) === false) {\n\t\t\t\t\tthis.removeEffect(effect);\n\t\t\t\t\tel--;\n\t\t\t\t\te--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tisAtPosition: function(position) {\n\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tif (position !== null) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tlet ax = position.x;\n\t\t\t\t\tlet ay = position.y;\n\t\t\t\t\tlet az = position.z;\n\t\t\t\t\tlet bx = this.position.x;\n\t\t\t\t\tlet by = this.position.y;\n\t\t\t\t\tlet bz = this.position.z;\n\n\n\t\t\t\t\tlet shape = this.shape;\n\t\t\t\t\tif (shape === Composite.SHAPE.circle) {\n\n\t\t\t\t\t\tlet dist = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n\t\t\t\t\t\tif (dist < this.radius) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (shape === Composite.SHAPE.sphere) {\n\n\t\t\t\t\t\tlet dist = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2) + Math.pow(az - bz, 2));\n\t\t\t\t\t\tif (dist < this.radius) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (shape === Composite.SHAPE.rectangle) {\n\n\t\t\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\t\t\tlet hheight = this.height / 2;\n\t\t\t\t\t\tlet colX    = (ax >= bx - hwidth)  && (ax <= bx + hwidth);\n\t\t\t\t\t\tlet colY    = (ay >= by - hheight) && (ay <= by + hheight);\n\n\n\t\t\t\t\t\treturn colX && colY;\n\n\t\t\t\t\t} else if (shape === Composite.SHAPE.cuboid) {\n\n\t\t\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\t\t\tlet hheight = this.height / 2;\n\t\t\t\t\t\tlet hdepth  = this.depth  / 2;\n\t\t\t\t\t\tlet colX    = (ax >= bx - hwidth)  && (ax <= bx + hwidth);\n\t\t\t\t\t\tlet colY    = (ay >= by - hheight) && (ay <= by + hheight);\n\t\t\t\t\t\tlet colZ    = (az >= bz - hdepth)  && (az <= bz + hdepth);\n\n\n\t\t\t\t\t\treturn colX && colY && colZ;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tcollidesWith: function(entity) {\n\n\t\t\tentity = lychee.interfaceof(Composite, entity) ? entity : null;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet none = Composite.COLLISION.none;\n\t\t\t\tif (this.collision !== entity.collision || this.collision === none || entity.collision === none) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\n\t\t\t\tlet circle    = Composite.SHAPE.circle;\n\t\t\t\tlet sphere    = Composite.SHAPE.sphere;\n\t\t\t\tlet rectangle = Composite.SHAPE.rectangle;\n\t\t\t\tlet cuboid    = Composite.SHAPE.cuboid;\n\n\t\t\t\tlet shapeA    = this.shape;\n\t\t\t\tlet shapeB    = entity.shape;\n\n\t\t\t\tlet issphereA = shapeA === circle    || shapeA === sphere;\n\t\t\t\tlet issphereB = shapeB === circle    || shapeB === sphere;\n\t\t\t\tlet iscuboidA = shapeA === rectangle || shapeA === cuboid;\n\t\t\t\tlet iscuboidB = shapeB === rectangle || shapeB === cuboid;\n\n\t\t\t\tif (issphereA && issphereB) {\n\t\t\t\t\treturn _sphere_sphere(this, entity);\n\t\t\t\t} else if (iscuboidA && iscuboidB) {\n\t\t\t\t\treturn _cuboid_cuboid(this, entity);\n\t\t\t\t} else if (issphereA && iscuboidB) {\n\t\t\t\t\treturn _sphere_cuboid(this, entity);\n\t\t\t\t} else if (iscuboidA && issphereB) {\n\t\t\t\t\treturn _sphere_cuboid(entity, this);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\n\t\t\talpha = typeof alpha === 'number' ? alpha : null;\n\n\n\t\t\tif (alpha !== null) {\n\n\t\t\t\tthis.alpha = Math.min(Math.max(alpha, 0), 1);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetCollision: function(collision) {\n\n\t\t\tcollision = lychee.enumof(Composite.COLLISION, collision) ? collision : null;\n\n\n\t\t\tif (collision !== null) {\n\n\t\t\t\tthis.collision = collision;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taddEffect: function(effect) {\n\n\t\t\teffect = _validate_effect(effect) ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.effects.push(effect);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffect: function(effect) {\n\n\t\t\teffect = _validate_effect(effect) ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.effects.splice(index, 1);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffects: function() {\n\n\t\t\tlet effects = this.effects;\n\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\teffects[e].update(this, Infinity, 0);\n\t\t\t\tthis.removeEffect(effects[e]);\n\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetPosition: function(position) {\n\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tif (position !== null) {\n\n\t\t\t\tthis.position.x = typeof position.x === 'number' ? position.x : this.position.x;\n\t\t\t\tthis.position.y = typeof position.y === 'number' ? position.y : this.position.y;\n\t\t\t\tthis.position.z = typeof position.z === 'number' ? position.z : this.position.z;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetShape: function(shape) {\n\n\t\t\tshape = lychee.enumof(Composite.SHAPE, shape) ? shape : null;\n\n\n\t\t\tif (shape !== null) {\n\n\t\t\t\tthis.shape = shape;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetStates: function(states) {\n\n\t\t\tstates = states instanceof Object ? states : null;\n\n\n\t\t\tif (states !== null) {\n\n\t\t\t\tthis.states = {\n\t\t\t\t\t'default': null\n\t\t\t\t};\n\n\t\t\t\tfor (let id in states) {\n\n\t\t\t\t\tif (states.hasOwnProperty(id)) {\n\n\t\t\t\t\t\tlet state = states[id];\n\t\t\t\t\t\tif (state instanceof Object) {\n\t\t\t\t\t\t\tthis.states[id] = states[id];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.states[id] !== undefined) {\n\n\t\t\t\tthis.state = id;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetVelocity: function(velocity) {\n\n\t\t\tvelocity = velocity instanceof Object ? velocity : null;\n\n\n\t\t\tif (velocity !== null) {\n\n\t\t\t\tthis.velocity.x = typeof velocity.x === 'number' ? velocity.x : this.velocity.x;\n\t\t\t\tthis.velocity.y = typeof velocity.y === 'number' ? velocity.y : this.velocity.y;\n\t\t\t\tthis.velocity.z = typeof velocity.z === 'number' ? velocity.z : this.velocity.z;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.socket.WS":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.socket.WS","url":"/libraries/lychee/source/platform/html/net/socket/WS.js"}],"blob":{"attaches":{},"tags":{"platform":"html"},"requires":["lychee.codec.JSON","lychee.net.protocol.WS"],"includes":["lychee.event.Emitter"],"supports":"function(lychee, global) {\n\n\tif (typeof global.WebSocket !== 'undefined') {\n\t\treturn true;\n\t}\n\n\n\treturn false;\n\n}","exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter   = lychee.import('lychee.event.Emitter');\n\tconst _JSON      = lychee.import('lychee.codec.JSON');\n\tconst _Protocol  = lychee.import('lychee.net.protocol.WS');\n\tconst _WebSocket = global.WebSocket;\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _connect_socket = function(socket, protocol) {\n\n\t\tlet that = this;\n\t\tif (that.__connection !== socket) {\n\n\t\t\tsocket.onmessage = function(event) {\n\n\t\t\t\tlet blob = null;\n\n\t\t\t\tif (typeof event.data === 'string') {\n\n\t\t\t\t\tblob = Buffer.from(event.data, 'utf8');\n\n\t\t\t\t} else if (event.data instanceof ArrayBuffer) {\n\n\t\t\t\t\tblob = Buffer.from(event.data);\n\n\t\t\t\t}\n\n\n\t\t\t\tlet temp = _JSON.decode(blob);\n\t\t\t\tif (temp === null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\n\t\t\t\t// XXX: HTML WebSocket doesn't support Buffer data\n\t\t\t\tlet chunks = [ temp ];\n\t\t\t\tif (chunks.length > 0) {\n\n\t\t\t\t\tfor (let c = 0, cl = chunks.length; c < cl; c++) {\n\n\t\t\t\t\t\tlet chunk = chunks[c];\n\t\t\t\t\t\tif (chunk.payload[0] === 136) {\n\n\t\t\t\t\t\t\tthat.send(chunk.payload, chunk.headers, true);\n\t\t\t\t\t\t\tthat.disconnect();\n\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthat.trigger('receive', [ chunk.payload, chunk.headers ]);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tsocket.onerror = function() {\n\t\t\t\tthat.trigger('error');\n\t\t\t\tthat.disconnect();\n\t\t\t};\n\n\t\t\tsocket.ontimeout = function() {\n\t\t\t\tthat.trigger('error');\n\t\t\t\tthat.disconnect();\n\t\t\t};\n\n\t\t\tsocket.onclose = function() {\n\t\t\t\tthat.disconnect();\n\t\t\t};\n\n\n\t\t\tthat.__connection = socket;\n\t\t\tthat.__protocol   = protocol;\n\n\n\t\t\tsocket.onopen = function() {\n\t\t\t\tthat.trigger('connect');\n\t\t\t};\n\n\t\t}\n\n\t};\n\n\tconst _disconnect_socket = function(socket, protocol) {\n\n\t\tlet that = this;\n\t\tif (that.__connection === socket) {\n\n\t\t\tsocket.onmessage = function() {};\n\t\t\tsocket.onerror   = function() {};\n\t\t\tsocket.ontimeout = function() {};\n\t\t\tsocket.onclose   = function() {};\n\n\t\t\tsocket.close();\n\t\t\tprotocol.close();\n\n\n\t\t\tthat.__connection = null;\n\t\t\tthat.__protocol   = null;\n\n\t\t\tthat.trigger('disconnect');\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function() {\n\n\t\tthis.__connection = null;\n\t\tthis.__protocol   = null;\n\n\n\t\t_Emitter.call(this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.socket.WS';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tconnect: function(host, port, connection) {\n\n\t\t\thost       = typeof host === 'string'       ? host       : null;\n\t\t\tport       = typeof port === 'number'       ? (port | 0) : null;\n\t\t\tconnection = typeof connection === 'object' ? connection : null;\n\n\n\t\t\tlet that     = this;\n\t\t\tlet url      = /:/g.test(host) ? ('ws://[' + host + ']:' + port) : ('ws://' + host + ':' + port);\n\t\t\tlet protocol = null;\n\n\n\t\t\tif (host !== null && port !== null) {\n\n\t\t\t\tif (connection !== null) {\n\n\t\t\t\t\tprotocol   = new _Protocol({\n\t\t\t\t\t\ttype: _Protocol.TYPE.remote\n\t\t\t\t\t});\n\t\t\t\t\tconnection = null;\n\n\t\t\t\t\t// TODO: Remote Socket API\n\n\t\t\t\t\t// _connect_socket.call(that, connection, protocol);\n\t\t\t\t\t// connection.resume();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprotocol   = new _Protocol({\n\t\t\t\t\t\ttype: _Protocol.TYPE.client\n\t\t\t\t\t});\n\t\t\t\t\tconnection = new _WebSocket(url, [ 'lycheejs' ]);\n\n\n\t\t\t\t\t_connect_socket.call(that, connection, protocol);\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsend: function(payload, headers, binary) {\n\n\t\t\tpayload = payload instanceof Buffer ? payload : null;\n\t\t\theaders = headers instanceof Object ? headers : {};\n\t\t\tbinary  = binary === true;\n\n\n\t\t\tif (payload !== null) {\n\n\t\t\t\tlet connection = this.__connection;\n\t\t\t\tlet protocol   = this.__protocol;\n\n\t\t\t\tif (connection !== null && protocol !== null) {\n\n\t\t\t\t\t// XXX: HTML WebSocket does not support Buffer data\n\t\t\t\t\tlet chunk = _JSON.encode({\n\t\t\t\t\t\theaders: headers,\n\t\t\t\t\t\tpayload: payload\n\t\t\t\t\t});\n\n\t\t\t\t\tif (chunk !== null) {\n\n\t\t\t\t\t\tif (binary === true) {\n\n\t\t\t\t\t\t\tlet blob = new ArrayBuffer(chunk.length);\n\t\t\t\t\t\t\tlet view = new Uint8Array(blob);\n\n\t\t\t\t\t\t\tfor (let c = 0, cl = chunk.length; c < cl; c++) {\n\t\t\t\t\t\t\t\tview[c] = chunk[c];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconnection.send(blob);\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconnection.send(chunk.toString('utf8'));\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tdisconnect: function() {\n\n\t\t\tlet connection = this.__connection;\n\t\t\tlet protocol   = this.__protocol;\n\n\t\t\tif (connection !== null && protocol !== null) {\n\n\t\t\t\t_disconnect_socket.call(this, connection, protocol);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.socket.HTTP":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.socket.HTTP","url":"/libraries/lychee/source/platform/html/net/socket/HTTP.js"}],"blob":{"attaches":{},"tags":{"platform":"html"},"requires":["lychee.net.protocol.HTTP"],"includes":["lychee.event.Emitter"],"supports":"function(lychee, global) {\n\n\tif (\n\t\ttypeof global.XMLHttpRequest === 'function'\n\t\t|| typeof global.XMLHttpRequest === 'object'\n\t) {\n\t\treturn true;\n\t}\n\n\n\treturn false;\n\n}","exports":"function(lychee, global, attachments) {\n\n\tconst _Emitter  = lychee.import('lychee.event.Emitter');\n\tconst _Protocol = lychee.import('lychee.net.protocol.HTTP');\n\tconst _XHR      = global.XMLHttpRequest;\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _uppercase = function(str) {\n\n\t\tlet tmp = str.split('-');\n\n\t\tfor (let t = 0, tl = tmp.length; t < tl; t++) {\n\t\t\tlet ch = tmp[t];\n\t\t\ttmp[t] = ch.charAt(0).toUpperCase() + ch.substr(1);\n\t\t}\n\n\t\treturn tmp.join('-');\n\n\t};\n\n\tconst _receive_xhr = function(raw_headers, raw_payload) {\n\n\t\tlet blob = null;\n\n\t\tif (typeof raw_payload === 'string') {\n\n\t\t\tblob = Buffer.from(raw_payload, 'utf8');\n\n\t\t} else if (raw_payload instanceof ArrayBuffer) {\n\n\t\t\tblob = Buffer.from(raw_payload);\n\n\t\t}\n\n\n\t\tlet headers = {};\n\t\tlet payload = blob;\n\n\t\traw_headers.split('\\r\\n').forEach(function(line) {\n\n\t\t\tlet i1 = line.indexOf(':');\n\t\t\tif (i1 !== -1) {\n\n\t\t\t\tlet key = line.substr(0, i1).trim().toLowerCase();\n\t\t\t\tlet val = line.substr(i1 + 1).trim();\n\n\t\t\t\tif (key.startsWith('x-')) {\n\t\t\t\t\theaders['@' + key.substr(2)] = val;\n\t\t\t\t} else if (key.length > 0) {\n\t\t\t\t\theaders[key.toLowerCase()] = val;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\n\t\treturn [{\n\t\t\theaders: headers,\n\t\t\tpayload: payload\n\t\t}];\n\n\t};\n\n\tconst _reconnect_xhr = function(chunk, headers, binary) {\n\n\t\tlet connection = this.__connection;\n\t\tif (connection !== null) {\n\n\t\t\tlet tmp    = chunk.toString('utf8').split('\\n')[0].trim().split(' ');\n\t\t\tlet method = tmp[0];\n\t\t\tlet url    = 'http://' + connection.host + ':' + connection.port + tmp[1];\n\t\t\tlet socket = new _XHR();\n\t\t\tlet that   = this;\n\n\n\t\t\tsocket.open(method, url, true);\n\t\t\tsocket.responseType = binary === true ? 'arraybuffer' : 'text';\n\n\t\t\tsocket.onload = function() {\n\n\t\t\t\tlet chunks = _receive_xhr.call(that, socket.getAllResponseHeaders(), socket.response);\n\t\t\t\tif (chunks.length > 0) {\n\n\t\t\t\t\tfor (let c = 0, cl = chunks.length; c < cl; c++) {\n\n\t\t\t\t\t\tlet chunk = chunks[c];\n\t\t\t\t\t\tif (chunk.payload !== null) {\n\t\t\t\t\t\t\tthat.trigger('receive', [ chunk.payload, chunk.headers ]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tsocket.onerror = function() {\n\t\t\t\tthat.trigger('error');\n\t\t\t\tthat.disconnect();\n\t\t\t};\n\n\t\t\tsocket.ontimeout = function() {\n\t\t\t\tthat.trigger('error');\n\t\t\t\tthat.disconnect();\n\t\t\t};\n\n\t\t\tfor (let key in headers) {\n\n\t\t\t\tif (key.charAt(0) === '@') {\n\t\t\t\t\tsocket.setRequestHeader(_uppercase('x-' + key.substr(1)), headers[key]);\n\t\t\t\t} else {\n\t\t\t\t\tsocket.setRequestHeader(_uppercase(key), headers[key]);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn socket;\n\n\t\t}\n\n\n\t\treturn null;\n\n\t};\n\n\tconst _connect_socket = function(socket, protocol) {\n\n\t\tlet that = this;\n\t\tif (that.__connection !== socket) {\n\n\t\t\t// TODO: connect socket events\n\n\t\t\tthat.__connection = socket;\n\t\t\tthat.__protocol   = protocol;\n\n\t\t\tthat.trigger('connect');\n\n\t\t}\n\n\t};\n\n\tconst _disconnect_socket = function(socket, protocol) {\n\n\t\tlet that = this;\n\t\tif (that.__connection === socket) {\n\n\t\t\t// TODO: disconnect socket events\n\n\t\t\t// socket.destroy();\n\t\t\tprotocol.close();\n\n\n\t\t\tthat.__connection = null;\n\t\t\tthat.__protocol   = null;\n\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tthat.trigger('disconnect');\n\t\t\t}, 0);\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function() {\n\n\t\tthis.__connection = null;\n\t\tthis.__protocol   = null;\n\n\n\t\t_Emitter.call(this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.socket.HTTP';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tconnect: function(host, port, connection) {\n\n\t\t\thost       = typeof host === 'string'       ? host       : null;\n\t\t\tport       = typeof port === 'number'       ? (port | 0) : null;\n\t\t\tconnection = typeof connection === 'object' ? connection : null;\n\n\n\t\t\tlet that     = this;\n\t\t\tlet protocol = null;\n\n\n\t\t\tif (host !== null && port !== null) {\n\n\t\t\t\tif (connection !== null) {\n\n\t\t\t\t\tprotocol   = new _Protocol({\n\t\t\t\t\t\ttype: _Protocol.TYPE.remote\n\t\t\t\t\t});\n\t\t\t\t\tconnection = null;\n\n\t\t\t\t\t// TODO: Remote Socket API\n\n\t\t\t\t\t// _connect_socket.call(that, connection, protocol);\n\t\t\t\t\t// connection.resume();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprotocol   = new _Protocol({\n\t\t\t\t\t\ttype: _Protocol.TYPE.client\n\t\t\t\t\t});\n\t\t\t\t\tconnection = {\n\t\t\t\t\t\thost: host,\n\t\t\t\t\t\tport: port\n\t\t\t\t\t};\n\n\n\t\t\t\t\t_connect_socket.call(that, connection, protocol);\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsend: function(payload, headers, binary) {\n\n\t\t\tpayload = payload instanceof Buffer ? payload : null;\n\t\t\theaders = headers instanceof Object ? headers : null;\n\t\t\tbinary  = binary === true;\n\n\n\t\t\tif (payload !== null) {\n\n\t\t\t\tlet connection = this.__connection;\n\t\t\t\tlet protocol   = this.__protocol;\n\n\t\t\t\tif (connection !== null && protocol !== null) {\n\n\t\t\t\t\t// XXX: HTML XHR does not support Buffer data\n\t\t\t\t\tlet chunk = protocol.send(payload, headers, binary);\n\n\n\t\t\t\t\t// XXX: Web XHR does not support halfopen Sockets\n\t\t\t\t\tconnection = _reconnect_xhr.call(this, chunk, headers, binary);\n\t\t\t\t\tchunk      = payload;\n\n\n\t\t\t\t\tif (connection !== null && chunk !== null) {\n\n\t\t\t\t\t\tif (binary === true) {\n\n\t\t\t\t\t\t\tlet blob = new ArrayBuffer(chunk.length);\n\t\t\t\t\t\t\tlet view = new Uint8Array(blob);\n\n\t\t\t\t\t\t\tfor (let c = 0, cl = chunk.length; c < cl; c++) {\n\t\t\t\t\t\t\t\tview[c] = chunk[c];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconnection.send(blob);\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconnection.send(chunk.toString('utf8'));\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tdisconnect: function() {\n\n\t\t\tlet connection = this.__connection;\n\t\t\tlet protocol   = this.__protocol;\n\n\t\t\tif (connection !== null && protocol !== null) {\n\n\t\t\t\t_disconnect_socket.call(this, connection, protocol);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.codec.BENCODE":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.codec.BENCODE","url":"/libraries/lychee/source/codec/BENCODE.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _CHARS_DANGEROUS = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\tconst _CHARS_ESCAPABLE = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\tconst _CHARS_META      = {\n\t\t'\\b': '\\\\b',\n\t\t'\\t': '\\\\t',\n\t\t'\\n': '\\\\n',\n\t\t'\\f': '\\\\f',\n\t\t'\\r': '',    // FUCK YOU, Microsoft!\n\t\t'\"':  '\\\\\"',\n\t\t'\\\\': '\\\\\\\\'\n\t};\n\n\tconst _sanitize_string = function(str) {\n\n\t\tlet san = str;\n\n\n\t\tif (_CHARS_ESCAPABLE.test(san)) {\n\n\t\t\tsan = san.replace(_CHARS_ESCAPABLE, function(char) {\n\n\t\t\t\tlet val = _CHARS_META[char];\n\t\t\t\tif (typeof val === 'string') {\n\t\t\t\t\treturn val;\n\t\t\t\t} else {\n\t\t\t\t\treturn '\\\\u' + (char.charCodeAt(0).toString(16)).slice(-4);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t\treturn san;\n\n\t};\n\n\n\n\t/*\n\t * STRUCTS\n\t */\n\n\tconst _Stream = function(buffer) {\n\n\t\tthis.__buffer = typeof buffer === 'string' ? buffer : '';\n\t\tthis.__index  = 0;\n\n\t};\n\n\n\t_Stream.prototype = {\n\n\t\ttoString: function() {\n\t\t\treturn this.__buffer;\n\t\t},\n\n\t\tpointer: function() {\n\t\t\treturn this.__index;\n\t\t},\n\n\t\tlength: function() {\n\t\t\treturn this.__buffer.length;\n\t\t},\n\n\t\tsearch: function(array) {\n\n\t\t\tlet bytes = Infinity;\n\n\t\t\tfor (let a = 0, al = array.length; a < al; a++) {\n\n\t\t\t\tlet token = array[a];\n\t\t\t\tlet size  = this.__buffer.indexOf(token, this.__index + 1) - this.__index;\n\t\t\t\tif (size > -1 && size < bytes) {\n\t\t\t\t\tbytes = size;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (bytes === Infinity) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\n\t\t\treturn bytes;\n\n\t\t},\n\n\t\tseek: function(bytes) {\n\n\t\t\tif (bytes > 0) {\n\t\t\t\treturn this.__buffer.substr(this.__index, bytes);\n\t\t\t} else {\n\t\t\t\treturn this.__buffer.substr(this.__index + bytes, Math.abs(bytes));\n\t\t\t}\n\n\t\t},\n\n\t\tread: function(bytes) {\n\n\t\t\tlet buffer = '';\n\n\t\t\tbuffer       += this.__buffer.substr(this.__index, bytes);\n\t\t\tthis.__index += bytes;\n\n\t\t\treturn buffer;\n\n\t\t},\n\n\t\twrite: function(buffer) {\n\n\t\t\tthis.__buffer += buffer;\n\t\t\tthis.__index  += buffer.length;\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * ENCODER and DECODER\n\t */\n\n\tconst _encode = function(stream, data) {\n\n\t\t// Boolean, Null, Undefined, Infinity, NaN\n\t\tif (\n\t\t\ttypeof data === 'boolean'\n\t\t\t|| data === null\n\t\t\t|| data === undefined\n\t\t\t|| (\n\t\t\t\ttypeof data === 'number'\n\t\t\t\t&& (\n\t\t\t\t\tdata === Infinity\n\t\t\t\t\t|| data === -Infinity\n\t\t\t\t\t|| isNaN(data) === true\n\t\t\t\t)\n\t\t\t)\n\t\t) {\n\n\t\t\tif (data === null) {\n\t\t\t\tstream.write('pne');\n\t\t\t} else if (data === undefined) {\n\t\t\t\tstream.write('pue');\n\t\t\t} else if (data === false) {\n\t\t\t\tstream.write('pfe');\n\t\t\t} else if (data === true) {\n\t\t\t\tstream.write('pte');\n\t\t\t} else if (data === Infinity) {\n\t\t\t\tstream.write('p+e');\n\t\t\t} else if (data === -Infinity) {\n\t\t\t\tstream.write('p-e');\n\t\t\t} else if (isNaN(data) === true) {\n\t\t\t\tstream.write('p_e');\n\t\t\t}\n\n\n\t\t// i123e : Integer\n\t\t// f12.3e : Float\n\t\t} else if (typeof data === 'number') {\n\n\t\t\tlet type = 'i';\n\t\t\tif (data < 268435456 && data !== (data | 0)) {\n\t\t\t\ttype = 'f';\n\t\t\t}\n\n\t\t\tlet sign = 0;\n\t\t\tif (data < 0) {\n\t\t\t\tdata = -data;\n\t\t\t\tsign = 1;\n\t\t\t}\n\n\n\t\t\tstream.write(type);\n\n\t\t\tif (sign === 1) {\n\t\t\t\tstream.write('-');\n\t\t\t}\n\n\t\t\tstream.write(data.toString());\n\n\t\t\tstream.write('e');\n\n\n\t\t// <length>:<contents> : String\n\t\t} else if (typeof data === 'string') {\n\n\t\t\tdata = _sanitize_string(data);\n\n\n\t\t\tstream.write(data.length + ':' + data);\n\n\n\t\t// l<contents>e : Array\n\t\t} else if (data instanceof Array) {\n\n\t\t\tstream.write('l');\n\n\t\t\tfor (let d = 0, dl = data.length; d < dl; d++) {\n\t\t\t\t_encode(stream, data[d]);\n\t\t\t}\n\n\t\t\tstream.write('e');\n\n\n\t\t// d<contents>e : Object\n\t\t} else if (data instanceof Object && typeof data.serialize !== 'function') {\n\n\t\t\tstream.write('d');\n\n\t\t\tlet keys = Object.keys(data).sort(function(a, b) {\n\t\t\t\tif (a > b) return  1;\n\t\t\t\tif (a < b) return -1;\n\t\t\t\treturn 0;\n\t\t\t});\n\n\t\t\tfor (let k = 0, kl = keys.length; k < kl; k++) {\n\n\t\t\t\tlet key = keys[k];\n\n\t\t\t\t_encode(stream, key);\n\t\t\t\t_encode(stream, data[key]);\n\n\t\t\t}\n\n\t\t\tstream.write('e');\n\n\n\t\t// s<contents>e : Custom High-Level Implementation\n\t\t} else if (data instanceof Object && typeof data.serialize === 'function') {\n\n\t\t\tstream.write('s');\n\n\t\t\tlet blob = lychee.serialize(data);\n\n\t\t\t_encode(stream, blob);\n\n\t\t\tstream.write('e');\n\n\t\t}\n\n\t};\n\n\tconst _is_decodeable_value = function(str) {\n\n\t\tlet head = str.charAt(0);\n\t\tif (/([piflds]+)/g.test(head) === true) {\n\t\t\treturn true;\n\t\t} else if (isNaN(parseInt(head, 10)) === false) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n\tconst _decode = function(stream) {\n\n\t\tlet value  = undefined;\n\t\tlet size   = 0;\n\t\tlet tmp    = 0;\n\t\tlet errors = 0;\n\t\tlet check  = null;\n\n\n\t\tif (stream.pointer() < stream.length()) {\n\n\t\t\tlet seek = stream.seek(1);\n\n\n\t\t\t// Boolean, Null, Undefined, Infinity, NaN\n\t\t\tif (seek === 'p') {\n\n\t\t\t\tcheck = stream.seek(3);\n\n\t\t\t\tif (check === 'pne') {\n\t\t\t\t\tstream.read(3);\n\t\t\t\t\tvalue = null;\n\t\t\t\t} else if (check === 'pue') {\n\t\t\t\t\tstream.read(3);\n\t\t\t\t\tvalue = undefined;\n\t\t\t\t} else if (check === 'pfe') {\n\t\t\t\t\tstream.read(3);\n\t\t\t\t\tvalue = false;\n\t\t\t\t} else if (check === 'pte') {\n\t\t\t\t\tstream.read(3);\n\t\t\t\t\tvalue = true;\n\t\t\t\t} else if (check === 'p+e') {\n\t\t\t\t\tstream.read(3);\n\t\t\t\t\tvalue = +Infinity;\n\t\t\t\t} else if (check === 'p-e') {\n\t\t\t\t\tstream.read(3);\n\t\t\t\t\tvalue = -Infinity;\n\t\t\t\t} else if (check === 'p_e') {\n\t\t\t\t\tstream.read(3);\n\t\t\t\t\tvalue = NaN;\n\t\t\t\t}\n\n\n\t\t\t// i123e : Integer\n\t\t\t} else if (seek === 'i') {\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\tsize = stream.search([ 'e' ]);\n\n\t\t\t\tif (size > 0) {\n\n\t\t\t\t\ttmp   = stream.read(size);\n\t\t\t\t\tvalue = parseInt(tmp, 10);\n\t\t\t\t\tcheck = stream.read(1);\n\n\t\t\t\t}\n\n\t\t\t// f12.3e : Float\n\t\t\t} else if (seek === 'f') {\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\tsize = stream.search([ 'e' ]);\n\n\t\t\t\tif (size > 0) {\n\n\t\t\t\t\ttmp   = stream.read(size);\n\t\t\t\t\tvalue = parseFloat(tmp, 10);\n\t\t\t\t\tcheck = stream.read(1);\n\n\t\t\t\t}\n\n\n\t\t\t// <length>:<contents> : String\n\t\t\t} else if (isNaN(parseInt(seek, 10)) === false) {\n\n\t\t\t\tsize = stream.search([ ':' ]);\n\n\t\t\t\tif (size > 0) {\n\n\t\t\t\t\tsize  = parseInt(stream.read(size), 10);\n\t\t\t\t\tcheck = stream.read(1);\n\n\t\t\t\t\tif (isNaN(size) === false && check === ':') {\n\t\t\t\t\t\tvalue = stream.read(size);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t// l<contents>e : Array\n\t\t\t} else if (seek === 'l') {\n\n\t\t\t\tvalue = [];\n\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\tvalue.push(_decode(stream));\n\n\t\t\t\t\tcheck = stream.seek(1);\n\n\t\t\t\t\tif (check === 'e') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (_is_decodeable_value(check) === false) {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstream.read(1);\n\n\n\t\t\t// d<contents>e : Object\n\t\t\t} else if (seek === 'd') {\n\n\t\t\t\tvalue = {};\n\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\tlet object_key   = _decode(stream);\n\t\t\t\t\tlet object_value = _decode(stream);\n\n\t\t\t\t\tcheck = stream.seek(1);\n\n\t\t\t\t\tvalue[object_key] = object_value;\n\n\t\t\t\t\tif (check === 'e') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (isNaN(parseInt(check, 10))) {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstream.read(1);\n\n\n\t\t\t// s<contents>e : Custom High-Level Implementation\n\t\t\t} else if (seek === 's') {\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\tlet blob = _decode(stream);\n\n\t\t\t\tvalue = lychee.deserialize(blob);\n\t\t\t\tcheck = stream.read(1);\n\n\t\t\t\tif (check !== 'e') {\n\t\t\t\t\tvalue = undefined;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn value;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Module = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\treturn {\n\t\t\t\t'reference': 'lychee.codec.BENCODE',\n\t\t\t\t'blob':      null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tencode: function(data) {\n\n\t\t\tdata = data instanceof Object ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream('');\n\n\t\t\t\t_encode(stream, data);\n\n\t\t\t\treturn Buffer.from(stream.toString(), 'utf8');\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tdecode: function(data) {\n\n\t\t\tdata = data instanceof Buffer ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream(data.toString('utf8'));\n\t\t\t\tlet object = _decode(stream);\n\t\t\t\tif (object !== undefined) {\n\t\t\t\t\treturn object;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\n\treturn Module;\n\n}"}},"lychee.codec.BITON":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.codec.BITON","url":"/libraries/lychee/source/codec/BITON.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _CHAR_TABLE = new Array(256);\n\tconst _MASK_TABLE = new Array(9);\n\tconst _POW_TABLE  = new Array(9);\n\tconst _RPOW_TABLE = new Array(9);\n\n\t(function() {\n\n\t\tfor (let c = 0; c < 256; c++) {\n\t\t\t_CHAR_TABLE[c] = String.fromCharCode(c);\n\t\t}\n\n\t\tfor (let m = 0; m < 9; m++) {\n\t\t\t_POW_TABLE[m]  = Math.pow(2, m) - 1;\n\t\t\t_MASK_TABLE[m] = ~(_POW_TABLE[m] ^ 0xff);\n\t\t\t_RPOW_TABLE[m] = Math.pow(10, m);\n\t\t}\n\n\t})();\n\n\n\tconst _CHARS_ESCAPABLE = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\tconst _CHARS_META      = {\n\t\t'\\b': '\\\\b',\n\t\t'\\t': '\\\\t',\n\t\t'\\n': '\\\\n',\n\t\t'\\f': '\\\\f',\n\t\t'\\r': '',    // FUCK YOU, Microsoft!\n\t\t'\"':  '\\\\\"',\n\t\t'\\\\': '\\\\\\\\'\n\t};\n\n\tconst _sanitize_string = function(str) {\n\n\t\tlet san  = str;\n\t\tlet keys = Object.keys(_CHARS_META);\n\t\tlet vals = Object.values(_CHARS_META);\n\n\n\t\tkeys.forEach(function(key, i) {\n\t\t\tsan = san.replace(key, vals[i]);\n\t\t});\n\n\n\t\tif (_CHARS_ESCAPABLE.test(san)) {\n\n\t\t\tsan = san.replace(_CHARS_ESCAPABLE, function(chr) {\n\t\t\t\treturn '\\\\u' + (chr.charCodeAt(0).toString(16)).slice(-4);\n\t\t\t});\n\n\t\t}\n\n\t\treturn san;\n\n\t};\n\n\tconst _desanitize_string = function(san) {\n\n\t\tlet str  = san;\n\t\tlet keys = Object.keys(_CHARS_META);\n\t\tlet vals = Object.values(_CHARS_META);\n\n\n\t\tvals.forEach(function(val, i) {\n\n\t\t\tif (val !== '') {\n\t\t\t\tstr = str.replace(val, keys[i]);\n\t\t\t}\n\n\t\t});\n\n\n\t\treturn str;\n\n\t};\n\n\tconst _resolve_constructor = function(identifier, scope) {\n\n\t\tlet pointer = scope;\n\n\t\tlet ns = identifier.split('.');\n\t\tfor (let n = 0, l = ns.length; n < l; n++) {\n\n\t\t\tlet name = ns[n];\n\n\t\t\tif (pointer[name] !== undefined) {\n\t\t\t\tpointer = pointer[name];\n\t\t\t} else {\n\t\t\t\tpointer = null;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn pointer;\n\n\t};\n\n\n\n\t/*\n\t * STRUCTS\n\t */\n\n\tconst _Stream = function(buffer, mode) {\n\n\t\tthis.__buffer    = typeof buffer === 'string' ? buffer : '';\n\t\tthis.__mode      = typeof mode === 'number'   ? mode   : 0;\n\n\t\tthis.__pointer   = 0;\n\t\tthis.__value     = 0;\n\t\tthis.__remaining = 8;\n\t\tthis.__index     = 0;\n\n\t\tif (this.__mode === _Stream.MODE.read) {\n\t\t\tthis.__value = this.__buffer.charCodeAt(this.__index);\n\t\t}\n\n\t};\n\n\n\t_Stream.MODE = {\n\t\tread:  0,\n\t\twrite: 1\n\t};\n\n\n\t_Stream.prototype = {\n\n\t\ttoString: function() {\n\n\t\t\tif (this.__mode === _Stream.MODE.write) {\n\n\t\t\t\tif (this.__value > 0) {\n\t\t\t\t\tthis.__buffer += _CHAR_TABLE[this.__value];\n\t\t\t\t\tthis.__value   = 0;\n\t\t\t\t}\n\n\n\t\t\t\t// 0: Boolean or Null or EOS\n\t\t\t\tthis.write(0, 3);\n\t\t\t\t// 00: EOS\n\t\t\t\tthis.write(0, 2);\n\n\t\t\t}\n\n\t\t\treturn this.__buffer;\n\n\t\t},\n\n\t\tpointer: function() {\n\t\t\treturn this.__pointer;\n\t\t},\n\n\t\tlength: function() {\n\t\t\treturn this.__buffer.length * 8;\n\t\t},\n\n\t\tread: function(bits) {\n\n\t\t\tlet overflow = bits - this.__remaining;\n\t\t\tlet captured = this.__remaining < bits ? this.__remaining : bits;\n\t\t\tlet shift    = this.__remaining - captured;\n\n\n\t\t\tlet buffer = (this.__value & _MASK_TABLE[this.__remaining]) >> shift;\n\n\n\t\t\tthis.__pointer   += captured;\n\t\t\tthis.__remaining -= captured;\n\n\n\t\t\tif (this.__remaining === 0) {\n\n\t\t\t\tthis.__value     = this.__buffer.charCodeAt(++this.__index);\n\t\t\t\tthis.__remaining = 8;\n\n\t\t\t\tif (overflow > 0) {\n\t\t\t\t\tbuffer = buffer << overflow | ((this.__value & _MASK_TABLE[this.__remaining]) >> (8 - overflow));\n\t\t\t\t\tthis.__remaining -= overflow;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn buffer;\n\n\t\t},\n\n\t\treadRAW: function(bytes) {\n\n\t\t\tif (this.__remaining !== 8) {\n\n\t\t\t\tthis.__index++;\n\t\t\t\tthis.__value     = 0;\n\t\t\t\tthis.__remaining = 8;\n\n\t\t\t}\n\n\n\t\t\tlet buffer = '';\n\n\t\t\tif (this.__remaining === 8) {\n\n\t\t\t\tbuffer       += this.__buffer.substr(this.__index, bytes);\n\t\t\t\tthis.__index += bytes;\n\t\t\t\tthis.__value  = this.__buffer.charCodeAt(this.__index);\n\n\t\t\t}\n\n\n\t\t\treturn buffer;\n\n\t\t},\n\n\t\twrite: function(buffer, bits) {\n\n\t\t\tlet overflow = bits - this.__remaining;\n\t\t\tlet captured = this.__remaining < bits ? this.__remaining : bits;\n\t\t\tlet shift    = this.__remaining - captured;\n\n\n\t\t\tif (overflow > 0) {\n\t\t\t\tthis.__value += buffer >> overflow << shift;\n\t\t\t} else {\n\t\t\t\tthis.__value += buffer << shift;\n\t\t\t}\n\n\n\t\t\tthis.__pointer   += captured;\n\t\t\tthis.__remaining -= captured;\n\n\n\t\t\tif (this.__remaining === 0) {\n\n\t\t\t\tthis.__buffer    += _CHAR_TABLE[this.__value];\n\t\t\t\tthis.__remaining  = 8;\n\t\t\t\tthis.__value      = 0;\n\n\t\t\t\tif (overflow > 0) {\n\t\t\t\t\tthis.__value     += (buffer & _POW_TABLE[overflow]) << (8 - overflow);\n\t\t\t\t\tthis.__remaining -= overflow;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\twriteRAW: function(buffer) {\n\n\t\t\tif (this.__remaining !== 8) {\n\n\t\t\t\tthis.__buffer    += _CHAR_TABLE[this.__value];\n\t\t\t\tthis.__value      = 0;\n\t\t\t\tthis.__remaining  = 8;\n\n\t\t\t}\n\n\t\t\tif (this.__remaining === 8) {\n\n\t\t\t\tthis.__buffer  += buffer;\n\t\t\t\tthis.__pointer += buffer.length * 8;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * ENCODER and DECODER\n\t */\n\n\tconst _encode = function(stream, data) {\n\n\t\t// 0: Boolean, Null (or EOS), Undefined, Infinity, NaN\n\t\tif (\n\t\t\ttypeof data === 'boolean'\n\t\t\t|| data === null\n\t\t\t|| data === undefined\n\t\t\t|| (\n\t\t\t\ttypeof data === 'number'\n\t\t\t\t&& (\n\t\t\t\t\tdata === Infinity\n\t\t\t\t\t|| data === -Infinity\n\t\t\t\t\t|| isNaN(data) === true\n\t\t\t\t)\n\t\t\t)\n\t\t) {\n\n\t\t\tstream.write(0, 3);\n\n\t\t\tif (data === null) {\n\t\t\t\tstream.write(1, 3);\n\t\t\t} else if (data === undefined) {\n\t\t\t\tstream.write(2, 3);\n\t\t\t} else if (data === false) {\n\t\t\t\tstream.write(3, 3);\n\t\t\t} else if (data === true) {\n\t\t\t\tstream.write(4, 3);\n\t\t\t} else if (data === Infinity) {\n\t\t\t\tstream.write(5, 3);\n\t\t\t} else if (data === -Infinity) {\n\t\t\t\tstream.write(6, 3);\n\t\t\t} else if (isNaN(data) === true) {\n\t\t\t\tstream.write(7, 3);\n\t\t\t}\n\n\n\t\t// 1: Integer, 2: Float\n\t\t} else if (typeof data === 'number') {\n\n\t\t\tlet type = 1;\n\t\t\tif (data < 268435456 && data !== (data | 0)) {\n\t\t\t\ttype = 2;\n\t\t\t}\n\n\n\t\t\tstream.write(type, 3);\n\n\n\t\t\t// Negative value\n\t\t\tlet sign = 0;\n\t\t\tif (data < 0) {\n\t\t\t\tdata = -data;\n\t\t\t\tsign = 1;\n\t\t\t}\n\n\n\t\t\t// Float only: Calculate the integer value and remember the shift\n\t\t\tlet shift = 0;\n\n\t\t\tif (type === 2) {\n\n\t\t\t\tlet step = 10;\n\t\t\t\tlet m    = data;\n\t\t\t\tlet tmp  = 0;\n\n\n\t\t\t\t// Calculate the exponent and shift\n\t\t\t\tdo {\n\n\t\t\t\t\tm     = data * step;\n\t\t\t\t\tstep *= 10;\n\t\t\t\t\ttmp   = m | 0;\n\t\t\t\t\tshift++;\n\n\t\t\t\t} while (m - tmp > 1 / step && shift < 8 && m < 214748364);\n\n\n\t\t\t\tstep = tmp / 10;\n\n\t\t\t\t// Recorrect shift if we are > 0.5\n\t\t\t\t// and shift is too high\n\t\t\t\tif (step === (step | 0)) {\n\t\t\t\t\ttmp = step;\n\t\t\t\t\tshift--;\n\t\t\t\t}\n\n\t\t\t\tdata = tmp;\n\n\t\t\t}\n\n\n\n\t\t\tif (data < 2) {\n\n\t\t\t\tstream.write(0, 4);\n\t\t\t\tstream.write(data, 1);\n\n\t\t\t} else if (data < 16) {\n\n\t\t\t\tstream.write(1, 4);\n\t\t\t\tstream.write(data, 4);\n\n\t\t\t} else if (data < 256) {\n\n\t\t\t\tstream.write(2, 4);\n\t\t\t\tstream.write(data, 8);\n\n\t\t\t} else if (data < 4096) {\n\n\t\t\t\tstream.write(3, 4);\n\t\t\t\tstream.write(data >>  8 & 0xff, 4);\n\t\t\t\tstream.write(data       & 0xff, 8);\n\n\t\t\t} else if (data < 65536) {\n\n\t\t\t\tstream.write(4, 4);\n\t\t\t\tstream.write(data >>  8 & 0xff, 8);\n\t\t\t\tstream.write(data       & 0xff, 8);\n\n\t\t\t} else if (data < 1048576) {\n\n\t\t\t\tstream.write(5, 4);\n\t\t\t\tstream.write(data >> 16 & 0xff, 4);\n\t\t\t\tstream.write(data >>  8 & 0xff, 8);\n\t\t\t\tstream.write(data       & 0xff, 8);\n\n\t\t\t} else if (data < 16777216) {\n\n\t\t\t\tstream.write(6, 4);\n\t\t\t\tstream.write(data >> 16 & 0xff, 8);\n\t\t\t\tstream.write(data >>  8 & 0xff, 8);\n\t\t\t\tstream.write(data       & 0xff, 8);\n\n\t\t\t} else if (data < 268435456) {\n\n\t\t\t\tstream.write(7, 4);\n\t\t\t\tstream.write(data >> 24 & 0xff, 8);\n\t\t\t\tstream.write(data >> 16 & 0xff, 8);\n\t\t\t\tstream.write(data >>  8 & 0xff, 8);\n\t\t\t\tstream.write(data       & 0xff, 8);\n\n\t\t\t} else {\n\n\t\t\t\tstream.write(8, 4);\n\n\t\t\t\t_encode(stream, data.toString());\n\n\t\t\t}\n\n\n\t\t\tstream.write(sign, 1);\n\n\n\t\t\t// Float only: Remember the shift for precision\n\t\t\tif (type === 2) {\n\t\t\t\tstream.write(shift, 4);\n\t\t\t}\n\n\n\t\t// 3: String\n\t\t} else if (typeof data === 'string') {\n\n\t\t\tdata = _sanitize_string(data);\n\n\n\t\t\tstream.write(3, 3);\n\n\n\t\t\tlet l = data.length;\n\n\t\t\t// Write Size Field\n\t\t\tif (l > 65535) {\n\n\t\t\t\tstream.write(31, 5);\n\n\t\t\t\tstream.write(l >> 24 & 0xff, 8);\n\t\t\t\tstream.write(l >> 16 & 0xff, 8);\n\t\t\t\tstream.write(l >>  8 & 0xff, 8);\n\t\t\t\tstream.write(l       & 0xff, 8);\n\n\t\t\t} else if (l > 255) {\n\n\t\t\t\tstream.write(30, 5);\n\n\t\t\t\tstream.write(l >>  8 & 0xff, 8);\n\t\t\t\tstream.write(l       & 0xff, 8);\n\n\t\t\t} else if (l > 28) {\n\n\t\t\t\tstream.write(29, 5);\n\n\t\t\t\tstream.write(l, 8);\n\n\t\t\t} else {\n\n\t\t\t\tstream.write(l, 5);\n\n\t\t\t}\n\n\n\t\t\tstream.writeRAW(data);\n\n\n\t\t// 4: Start of Array\n\t\t} else if (data instanceof Array) {\n\n\t\t\tstream.write(4, 3);\n\n\t\t\tfor (let d = 0, dl = data.length; d < dl; d++) {\n\t\t\t\tstream.write(0, 3);\n\t\t\t\t_encode(stream, data[d]);\n\t\t\t}\n\n\t\t\t// Write EOO marker\n\t\t\tstream.write(7, 3);\n\n\n\t\t// 5: Start of Object\n\t\t} else if (data instanceof Object && typeof data.serialize !== 'function') {\n\n\t\t\tstream.write(5, 3);\n\n\t\t\tfor (let prop in data) {\n\n\t\t\t\tif (data.hasOwnProperty(prop)) {\n\t\t\t\t\tstream.write(0, 3);\n\t\t\t\t\t_encode(stream, prop);\n\t\t\t\t\t_encode(stream, data[prop]);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Write EOO marker\n\t\t\tstream.write(7, 3);\n\n\n\t\t// 6: Custom High-Level Implementation\n\t\t} else if (data instanceof Object && typeof data.serialize === 'function') {\n\n\t\t\tstream.write(6, 3);\n\n\t\t\tlet blob = lychee.serialize(data);\n\n\t\t\t_encode(stream, blob);\n\n\t\t\t// Write EOO marker\n\t\t\tstream.write(7, 3);\n\n\t\t}\n\n\t};\n\n\tconst _decode = function(stream) {\n\n\t\tlet value  = undefined;\n\t\tlet tmp    = 0;\n\t\tlet errors = 0;\n\t\tlet check  = 0;\n\n\t\tif (stream.pointer() < stream.length()) {\n\n\t\t\tlet type = stream.read(3);\n\n\n\t\t\t// 0: Boolean, Null (or EOS), Undefined, Infinity, NaN\n\t\t\tif (type === 0) {\n\n\t\t\t\ttmp = stream.read(3);\n\n\t\t\t\tif (tmp === 1) {\n\t\t\t\t\tvalue = null;\n\t\t\t\t} else if (tmp === 2) {\n\t\t\t\t\tvalue = undefined;\n\t\t\t\t} else if (tmp === 3) {\n\t\t\t\t\tvalue = false;\n\t\t\t\t} else if (tmp === 4) {\n\t\t\t\t\tvalue = true;\n\t\t\t\t} else if (tmp === 5) {\n\t\t\t\t\tvalue = Infinity;\n\t\t\t\t} else if (tmp === 6) {\n\t\t\t\t\tvalue = -Infinity;\n\t\t\t\t} else if (tmp === 7) {\n\t\t\t\t\tvalue = NaN;\n\t\t\t\t}\n\n\n\t\t\t// 1: Integer, 2: Float\n\t\t\t} else if (type === 1 || type === 2) {\n\n\t\t\t\ttmp = stream.read(4);\n\n\n\t\t\t\tif (tmp === 0) {\n\n\t\t\t\t\tvalue = stream.read(1);\n\n\t\t\t\t} else if (tmp === 1) {\n\n\t\t\t\t\tvalue = stream.read(4);\n\n\t\t\t\t} else if (tmp === 2) {\n\n\t\t\t\t\tvalue = stream.read(8);\n\n\t\t\t\t} else if (tmp === 3) {\n\n\t\t\t\t\tvalue = (stream.read(4) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (tmp === 4) {\n\n\t\t\t\t\tvalue = (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (tmp === 5) {\n\n\t\t\t\t\tvalue = (stream.read(4) << 16) + (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (tmp === 6) {\n\n\t\t\t\t\tvalue = (stream.read(8) << 16) + (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (tmp === 7) {\n\n\t\t\t\t\tvalue = (stream.read(8) << 24) + (stream.read(8) << 16) + (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (tmp === 8) {\n\n\t\t\t\t\tlet str = _decode(stream);\n\n\t\t\t\t\tvalue = parseInt(str, 10);\n\n\t\t\t\t}\n\n\n\t\t\t\t// Negative value\n\t\t\t\tlet sign = stream.read(1);\n\t\t\t\tif (sign === 1) {\n\t\t\t\t\tvalue = -1 * value;\n\t\t\t\t}\n\n\n\t\t\t\t// Float only: Shift it back by the precision\n\t\t\t\tif (type === 2) {\n\t\t\t\t\tlet shift = stream.read(4);\n\t\t\t\t\tvalue /= _RPOW_TABLE[shift];\n\t\t\t\t}\n\n\n\t\t\t// 3: String\n\t\t\t} else if (type === 3) {\n\n\t\t\t\tlet size = stream.read(5);\n\n\t\t\t\tif (size === 31) {\n\n\t\t\t\t\tsize = (stream.read(8) << 24) + (stream.read(8) << 16) + (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (size === 30) {\n\n\t\t\t\t\tsize = (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (size === 29) {\n\n\t\t\t\t\tsize = stream.read(8);\n\n\t\t\t\t}\n\n\n\t\t\t\tvalue = _desanitize_string(stream.readRAW(size));\n\n\n\t\t\t// 4: Array\n\t\t\t} else if (type === 4) {\n\n\t\t\t\tvalue = [];\n\n\n\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\tcheck = stream.read(3);\n\n\t\t\t\t\tif (check === 0) {\n\t\t\t\t\t\tvalue.push(_decode(stream));\n\t\t\t\t\t} else if (check === 7) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t// 5: Object\n\t\t\t} else if (type === 5) {\n\n\t\t\t\tvalue = {};\n\n\n\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\tcheck = stream.read(3);\n\n\t\t\t\t\tif (check === 0) {\n\t\t\t\t\t\tvalue[_decode(stream)] = _decode(stream);\n\t\t\t\t\t} else if (check === 7) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t// 6: Custom High-Level Implementation\n\t\t\t} else if (type === 6) {\n\n\t\t\t\tlet blob = _decode(stream);\n\n\t\t\t\tvalue = lychee.deserialize(blob);\n\t\t\t\tcheck = stream.read(3);\n\n\t\t\t\tif (check !== 7) {\n\t\t\t\t\tvalue = undefined;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn value;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Module = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\treturn {\n\t\t\t\t'reference': 'lychee.codec.BITON',\n\t\t\t\t'blob':      null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tencode: function(data) {\n\n\t\t\tdata = data instanceof Object ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream('', _Stream.MODE.write);\n\n\t\t\t\t_encode(stream, data);\n\n\t\t\t\treturn Buffer.from(stream.toString(), 'utf8');\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tdecode: function(data) {\n\n\t\t\tdata = data instanceof Buffer ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream(data.toString('utf8'), _Stream.MODE.read);\n\t\t\t\tlet object = _decode(stream);\n\t\t\t\tif (object !== undefined) {\n\t\t\t\t\treturn object;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\n\treturn Module;\n\n}"}},"lychee.net.protocol.HTTP":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.protocol.HTTP","url":"/libraries/lychee/source/net/protocol/HTTP.js"}],"blob":{"attaches":{},"exports":"function(lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _uppercase = function(str) {\n\n\t\tlet tmp = str.split('-');\n\n\t\tfor (let t = 0, tl = tmp.length; t < tl; t++) {\n\t\t\tlet ch = tmp[t];\n\t\t\ttmp[t] = ch.charAt(0).toUpperCase() + ch.substr(1);\n\t\t}\n\n\t\treturn tmp.join('-');\n\n\t};\n\n\tconst _encode_buffer = function(payload, headers, binary) {\n\n\t\tlet type           = this.type;\n\t\tlet buffer         = null;\n\n\t\tlet headers_data   = null;\n\t\tlet headers_length = 0;\n\t\tlet payload_data   = payload;\n\t\tlet payload_length = payload.length;\n\n\n\t\tif (type === Composite.TYPE.client) {\n\n\t\t\tlet url            = headers['url']             || null;\n\t\t\tlet method         = headers['method']          || null;\n\t\t\tlet service_id     = headers['@service-id']     || null;\n\t\t\tlet service_event  = headers['@service-event']  || null;\n\t\t\tlet service_method = headers['@service-method'] || null;\n\n\n\t\t\tif (service_id !== null) {\n\n\t\t\t\tif (service_method !== null) {\n\n\t\t\t\t\tmethod = 'GET';\n\t\t\t\t\turl    = '/api/' + service_id + '/' + service_method;\n\n\t\t\t\t} else if (service_event !== null) {\n\n\t\t\t\t\tmethod = 'POST';\n\t\t\t\t\turl    = '/api/' + service_id + '/' + service_event;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (url !== null && method !== null) {\n\t\t\t\theaders_data = method + ' ' + url + ' HTTP/1.1\\r\\n';\n\t\t\t} else {\n\t\t\t\theaders_data = 'GET * HTTP/1.1\\r\\n';\n\t\t\t}\n\n\n\t\t\theaders_data += 'Connection: keep-alive\\r\\n';\n\t\t\theaders_data += 'Content-Length: ' + payload_length + '\\r\\n';\n\n\t\t\tfor (let key in headers) {\n\n\t\t\t\tif (key.charAt(0) === '@') {\n\t\t\t\t\theaders_data += '' + _uppercase('x-' + key.substr(1)) + ': ' + headers[key] + '\\r\\n';\n\t\t\t\t} else if (/url|method/g.test(key) === false) {\n\t\t\t\t\theaders_data += '' + _uppercase(key) + ': ' + headers[key] + '\\r\\n';\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\theaders_data  += '\\r\\n';\n\t\t\theaders_length = headers_data.length;\n\n\t\t} else {\n\n\t\t\tlet status  = headers['status'] || Composite.STATUS.normal_okay;\n\t\t\tlet exposed = [ 'Content-Type' ];\n\n\n\t\t\theaders_data  = 'HTTP/1.1 ' + status + '\\r\\n';\n\t\t\theaders_data += 'Connection: keep-alive\\r\\n';\n\t\t\theaders_data += 'Content-Length: ' + payload_length + '\\r\\n';\n\n\t\t\tfor (let key in headers) {\n\n\t\t\t\tif (key.charAt(0) === '@') {\n\t\t\t\t\theaders_data += '' + _uppercase('x-' + key.substr(1)) + ': ' + headers[key] + '\\r\\n';\n\t\t\t\t\texposed.push(_uppercase('x-' + key.substr(1)));\n\t\t\t\t} else if (/status/g.test(key) === false) {\n\t\t\t\t\theaders_data += '' + _uppercase(key) + ': ' + headers[key] + '\\r\\n';\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\theaders_data  += 'Access-Control-Expose-Headers: ' + exposed.join(', ') + '\\r\\n';\n\t\t\theaders_data  += '\\r\\n';\n\t\t\theaders_length = headers_data.length;\n\n\t\t}\n\n\n\t\tlet content_type = headers['content-type'] || 'text/plain';\n\t\tif (/text\\//g.test(content_type) === true) {\n\n\t\t\tbuffer = Buffer.alloc(headers_length + payload_length + 4);\n\t\t\tbuffer.write(headers_data, 0, headers_length, 'utf8');\n\t\t\tpayload_data.copy(buffer, headers_length, 0, payload_length);\n\t\t\tbuffer.write('\\r\\n\\r\\n', headers_length + payload_length, 4, 'utf8');\n\n\t\t} else {\n\n\t\t\tbuffer = Buffer.alloc(headers_length + payload_length + 4);\n\t\t\tbuffer.write(headers_data, 0, headers_length, 'utf8');\n\t\t\tpayload_data.copy(buffer, headers_length, 0, payload_length);\n\t\t\tbuffer.write('\\r\\n\\r\\n', headers_length + payload_length, 4, 'utf8');\n\n\t\t}\n\n\n\t\treturn buffer;\n\n\t};\n\n\tconst _decode_buffer = function(buffer) {\n\n\t\tbuffer = buffer.toString('utf8');\n\n\n\t\tlet chunk = {\n\t\t\tbytes:   -1,\n\t\t\theaders: {},\n\t\t\tpayload: null\n\t\t};\n\n\n\t\tif (buffer.indexOf('\\r\\n\\r\\n') === -1) {\n\t\t\treturn chunk;\n\t\t}\n\n\n\t\tlet headers_length = buffer.indexOf('\\r\\n\\r\\n') + 4;\n\t\tlet headers_data   = buffer.substr(0, headers_length);\n\t\tlet payload_data   = buffer.substr(headers_length);\n\t\tlet payload_length = payload_data.length;\n\n\n\t\tlet i_end = payload_data.indexOf('\\r\\n\\r\\n');\n\t\tif (i_end !== -1) {\n\t\t\tpayload_data   = payload_data.substr(0, i_end);\n\t\t\tpayload_length = payload_data.length + 4;\n\t\t}\n\n\n\t\theaders_data.split('\\r\\n').forEach(function(line) {\n\n\t\t\tlet tmp = line.trim();\n\t\t\tif (/^(OPTIONS|GET|POST)/g.test(tmp) === true) {\n\n\t\t\t\tlet tmp2   = tmp.split(' ');\n\t\t\t\tlet method = (tmp2[0] || '').trim() || null;\n\t\t\t\tlet url    = (tmp2[1] || '').trim() || null;\n\n\t\t\t\tif (method !== null && url !== null) {\n\n\t\t\t\t\tchunk.headers['method'] = method;\n\t\t\t\t\tchunk.headers['url']    = url;\n\n\t\t\t\t}\n\n\n\t\t\t\tif (url.startsWith('/api/')) {\n\n\t\t\t\t\tlet tmp3 = [];\n\n\t\t\t\t\tif (url.indexOf('?') !== -1) {\n\t\t\t\t\t\ttmp3 = url.split('?')[0].split('/');\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttmp3 = url.split('/');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (tmp3.length === 4) {\n\n\t\t\t\t\t\tif (method === 'GET') {\n\n\t\t\t\t\t\t\tchunk.headers['@service-id']     = tmp3[2];\n\t\t\t\t\t\t\tchunk.headers['@service-method'] = tmp3[3];\n\n\t\t\t\t\t\t} else if (method === 'POST') {\n\n\t\t\t\t\t\t\tchunk.headers['@service-id']    = tmp3[2];\n\t\t\t\t\t\t\tchunk.headers['@service-event'] = tmp3[3];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if (tmp.startsWith('HTTP')) {\n\n\t\t\t\tif (/[0-9]{3}/g.test(tmp) === true) {\n\t\t\t\t\tchunk.headers['status'] = tmp.split(' ')[1];\n\t\t\t\t}\n\n\t\t\t} else if (/^[0-9]{3}/g.test(tmp) === true) {\n\n\t\t\t\tchunk.headers['status'] = tmp.split(' ')[0];\n\n\t\t\t} else if (/:/g.test(tmp)) {\n\n\t\t\t\tlet i_tmp = tmp.indexOf(':');\n\t\t\t\tlet key   = tmp.substr(0, i_tmp).trim().toLowerCase();\n\t\t\t\tlet val   = tmp.substr(i_tmp + 1).trim().toLowerCase();\n\n\t\t\t\tif (key === 'host') {\n\n\t\t\t\t\tif (/^\\[([a-f0-9:]+)\\](.*)$/g.test(val) === true) {\n\t\t\t\t\t\tchunk.headers[key] = val.split(/^\\[([a-f0-9:]+)\\](.*)$/g)[1];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchunk.headers[key] = val;\n\t\t\t\t\t}\n\n\t\t\t\t} else if (/origin|connection|upgrade|content-type|content-length|accept-encoding|accept-language|e-tag/g.test(key) === true) {\n\n\t\t\t\t\tchunk.headers[key] = val;\n\n\t\t\t\t} else if (/expires|if-modified-since|last-modified/g.test(key) === true) {\n\n\t\t\t\t\tval = tmp.split(':').slice(1).join(':').trim();\n\t\t\t\t\tchunk.headers[key] = val;\n\n\t\t\t\t} else if (/access-control/g.test(key) === true) {\n\n\t\t\t\t\tchunk.headers[key] = val;\n\n\t\t\t\t} else if (key.startsWith('x-')) {\n\n\t\t\t\t\tchunk.headers['@' + key.substr(2)] = val;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\n\t\tlet check = chunk.headers['method'] || null;\n\t\tif (check === 'GET') {\n\n\t\t\tlet tmp4 = chunk.headers['url'] || '';\n\t\t\tif (tmp4.indexOf('?') !== -1) {\n\n\t\t\t\tlet tmp5 = tmp4.split('?')[1].split('&');\n\t\t\t\tlet tmp6 = {};\n\n\t\t\t\ttmp5.forEach(function(str) {\n\n\t\t\t\t\tlet key = str.split('=')[0] || '';\n\t\t\t\t\tlet val = str.split('=')[1] || '';\n\n\t\t\t\t\tif (key !== '' && val !== '') {\n\t\t\t\t\t\ttmp6[key] = val;\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\n\t\t\t\tlet tmp7 = JSON.stringify(tmp6);\n\n\t\t\t\tchunk.bytes   = headers_length + payload_length;\n\t\t\t\tchunk.payload = Buffer.alloc(tmp7.length, tmp7, 'utf8');\n\n\t\t\t} else {\n\n\t\t\t\tchunk.bytes   = headers_length + payload_length;\n\t\t\t\tchunk.payload = Buffer.alloc(0, '', 'utf8');\n\n\t\t\t}\n\n\t\t} else if (check === 'OPTIONS') {\n\n\t\t\tchunk.bytes   = headers_length + payload_length;\n\t\t\tchunk.payload = Buffer.alloc(0, '', 'utf8');\n\n\t\t} else if (check === 'POST') {\n\n\t\t\tchunk.bytes   = headers_length + payload_length;\n\t\t\tchunk.payload = Buffer.alloc(payload_data.length, payload_data, 'utf8');\n\n\t\t} else {\n\n\t\t\tlet status = chunk.headers['status'] || null;\n\t\t\tif (status !== null) {\n\n\t\t\t\tchunk.bytes   = headers_length + payload_length;\n\t\t\t\tchunk.payload = Buffer.alloc(payload_data.length, payload_data, 'utf8');\n\n\t\t\t} else {\n\n\t\t\t\tchunk.bytes   = buffer.length;\n\t\t\t\tchunk.headers = null;\n\t\t\t\tchunk.payload = null;\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn chunk;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.type = lychee.enumof(Composite.TYPE, states.type) ? states.type : null;\n\n\t\tthis.__buffer   = Buffer.alloc(0);\n\t\tthis.__isClosed = false;\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tif (this.type === null) {\n\t\t\t\tconsole.error('lychee.net.protocol.HTTP: Invalid (lychee.net.protocol.HTTP.TYPE) type.');\n\t\t\t}\n\n\t\t}\n\n\t\tstates = null;\n\n\t};\n\n\n\t// Composite.FRAMESIZE = 32768; // 32kB\n\tComposite.FRAMESIZE = 0x800000; // 8MiB\n\n\n\tComposite.STATUS = {\n\n\t\t// RFC7231\n\t\tnormal_continue: '100 Continue',\n\t\tnormal_okay:     '200 OK',\n\t\tprotocol_error:  '400 Bad Request',\n\t\tmessage_too_big: '413 Payload Too Large',\n\t\tnot_found:       '404 Not Found',\n\t\tnot_allowed:     '405 Method Not Allowed',\n\t\tnot_implemented: '501 Not Implemented',\n\t\tbad_gateway:     '502 Bad Gateway',\n\n\t\t// RFC7233\n\t\tnormal_closure:  '204 No Content',\n\t\tnormal_partial:  '206 Partial Content'\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\t// 'default': 0, (deactivated)\n\t\t'client': 1,\n\t\t'remote': 2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {};\n\n\n\t\t\tif (this.type !== null) states.type = this.type;\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.net.protocol.HTTP',\n\t\t\t\t'arguments':   [ states ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * PROTOCOL API\n\t\t */\n\n\t\tsend: function(payload, headers, binary) {\n\n\t\t\tpayload = payload instanceof Buffer ? payload : null;\n\t\t\theaders = headers instanceof Object ? headers : null;\n\t\t\tbinary  = binary === true;\n\n\n\t\t\tif (payload !== null) {\n\n\t\t\t\tif (this.__isClosed === false) {\n\t\t\t\t\treturn _encode_buffer.call(this, payload, headers, binary);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\treceive: function(blob) {\n\n\t\t\tblob = blob instanceof Buffer ? blob : null;\n\n\n\t\t\tlet chunks = [];\n\n\n\t\t\tif (blob !== null) {\n\n\t\t\t\tif (blob.length > Composite.FRAMESIZE) {\n\n\t\t\t\t\tchunks.push(this.close(Composite.STATUS.message_too_big));\n\n\t\t\t\t} else if (this.__isClosed === false) {\n\n\t\t\t\t\tlet buf = this.__buffer;\n\t\t\t\t\tlet tmp = Buffer.alloc(buf.length + blob.length);\n\n\n\t\t\t\t\tbuf.copy(tmp);\n\t\t\t\t\tblob.copy(tmp, buf.length);\n\t\t\t\t\tbuf = tmp;\n\n\n\t\t\t\t\tlet chunk = _decode_buffer.call(this, buf);\n\n\t\t\t\t\twhile (chunk.bytes !== -1) {\n\n\t\t\t\t\t\tif (chunk.payload !== null) {\n\t\t\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\ttmp = Buffer.alloc(buf.length - chunk.bytes);\n\t\t\t\t\t\tbuf.copy(tmp, 0, chunk.bytes);\n\t\t\t\t\t\tbuf = tmp;\n\n\t\t\t\t\t\tchunk = null;\n\t\t\t\t\t\tchunk = _decode_buffer.call(this, buf);\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tthis.__buffer = buf;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn chunks;\n\n\t\t},\n\n\t\tclose: function(status) {\n\n\t\t\tstatus = typeof status === 'number' ? status : Composite.STATUS.no_content;\n\n\n\t\t\tif (this.__isClosed === false) {\n\n\t\t\t\t// TODO: Close method should create a close status buffer\n\t\t\t\t// let buffer = Buffer.alloc(4);\n\n\t\t\t\t// buffer[0]  = 128 + 0x08;\n\t\t\t\t// buffer[1]  =   0 + 0x02;\n\n\t\t\t\t// buffer.write(String.fromCharCode((status >> 8) & 0xff) + String.fromCharCode((status >> 0) & 0xff), 2, 'binary');\n\n\t\t\t\t// this.__isClosed = true;\n\n\n\t\t\t\t// return buffer;\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.protocol.WS":{"constructor":"lychee.Definition","arguments":[{"id":"lychee.net.protocol.WS","url":"/libraries/lychee/source/net/protocol/WS.js"}],"blob":{"attaches":{},"requires":["lychee.codec.JSON"],"exports":"function(lychee, global, attachments) {\n\n\tconst _JSON = lychee.import('lychee.codec.JSON');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\t/*\n\t * WebSocket Framing Protocol\n\t *\n\t * |0 1 2 3 4 5 6 7|0 1 2 3 4 5 6 7|0 1 2 3 4 5 6 7|0 1 2 3 4 5 6 7|\n\t * +-+-+-+-+-------+-+-------------+-------------------------------+\n\t * |F|R|R|R| opcode|M| Payload len |    Extended payload length    |\n\t * |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |\n\t * |N|V|V|V|       |S|             |   (if payload len==126/127)   |\n\t * | |1|2|3|       |K|             |                               |\n\t * +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +\n\t * |     Extended payload length continued, if payload len == 127  |\n\t * + - - - - - - - - - - - - - - - +-------------------------------+\n\t * |                               |Masking-key, if MASK set to 1  |\n\t * +-------------------------------+-------------------------------+\n\t * | Masking-key (continued)       |          Payload Data         |\n\t * +-------------------------------- - - - - - - - - - - - - - - - +\n\t * :                     Payload Data continued ...                :\n\t * + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +\n\t * |                     Payload Data continued ...                |\n\t * +---------------------------------------------------------------+\n\t *\n\t */\n\n\tconst _on_ping_frame = function() {\n\n\t\tlet type = this.type;\n\t\tif (type === Composite.TYPE.remote) {\n\n\t\t\tlet buffer = Buffer.alloc(2);\n\n\t\t\t// FIN, Pong\n\t\t\t// Unmasked, 0 payload\n\n\t\t\tbuffer[0] = 128 + 0x0a;\n\t\t\tbuffer[1] =   0 + 0x00;\n\n\n\t\t\treturn buffer;\n\n\t\t}\n\n\n\t\treturn null;\n\n\t};\n\n\tconst _on_pong_frame = function() {\n\n\t\tlet type = this.type;\n\t\tif (type === Composite.TYPE.client) {\n\n\t\t\tlet buffer = Buffer.alloc(6);\n\n\t\t\t// FIN, Ping\n\t\t\t// Masked, 0 payload\n\n\t\t\tbuffer[0] = 128 + 0x09;\n\t\t\tbuffer[1] = 128 + 0x00;\n\n\t\t\tbuffer[2] = (Math.random() * 0xff) | 0;\n\t\t\tbuffer[3] = (Math.random() * 0xff) | 0;\n\t\t\tbuffer[4] = (Math.random() * 0xff) | 0;\n\t\t\tbuffer[5] = (Math.random() * 0xff) | 0;\n\n\n\t\t\treturn buffer;\n\n\t\t}\n\n\n\t\treturn null;\n\n\t};\n\n\tconst _encode_buffer = function(payload, headers, binary) {\n\n\t\tlet buffer         = null;\n\t\tlet data           = _JSON.encode({\n\t\t\theaders: headers,\n\t\t\tpayload: payload\n\t\t});\n\t\tlet mask           = false;\n\t\tlet mask_data      = null;\n\t\tlet payload_data   = null;\n\t\tlet payload_length = data.length;\n\t\tlet type           = this.type;\n\n\n\t\tif (type === Composite.TYPE.client) {\n\n\t\t\tmask      = true;\n\t\t\tmask_data = Buffer.alloc(4);\n\n\t\t\tmask_data[0] = (Math.random() * 0xff) | 0;\n\t\t\tmask_data[1] = (Math.random() * 0xff) | 0;\n\t\t\tmask_data[2] = (Math.random() * 0xff) | 0;\n\t\t\tmask_data[3] = (Math.random() * 0xff) | 0;\n\n\t\t\tpayload_data = data.map(function(value, index) {\n\t\t\t\treturn value ^ mask_data[index % 4];\n\t\t\t});\n\n\t\t} else {\n\n\t\t\tmask         = false;\n\t\t\tmask_data    = Buffer.alloc(4);\n\t\t\tpayload_data = data.map(function(value) {\n\t\t\t\treturn value;\n\t\t\t});\n\n\t\t}\n\n\n\t\t// 64 Bit Extended Payload Length\n\t\tif (payload_length > 0xffff) {\n\n\t\t\tlet lo = payload_length | 0;\n\t\t\tlet hi = (payload_length - lo) / 4294967296;\n\n\t\t\tbuffer = Buffer.alloc((mask === true ? 14 : 10) + payload_length);\n\n\t\t\tbuffer[0] = 128 + (binary === true ? 0x02 : 0x01);\n\t\t\tbuffer[1] = (mask === true ? 128 : 0) + 127;\n\n\t\t\tbuffer[2] = (hi >> 24) & 0xff;\n\t\t\tbuffer[3] = (hi >> 16) & 0xff;\n\t\t\tbuffer[4] = (hi >>  8) & 0xff;\n\t\t\tbuffer[5] = (hi >>  0) & 0xff;\n\n\t\t\tbuffer[6] = (lo >> 24) & 0xff;\n\t\t\tbuffer[7] = (lo >> 16) & 0xff;\n\t\t\tbuffer[8] = (lo >>  8) & 0xff;\n\t\t\tbuffer[9] = (lo >>  0) & 0xff;\n\n\n\t\t\tif (mask === true) {\n\n\t\t\t\tmask_data.copy(buffer, 10);\n\t\t\t\tpayload_data.copy(buffer, 14);\n\n\t\t\t} else {\n\n\t\t\t\tpayload_data.copy(buffer, 10);\n\n\t\t\t}\n\n\n\t\t// 16 Bit Extended Payload Length\n\t\t} else if (payload_length > 125) {\n\n\t\t\tbuffer = Buffer.alloc((mask === true ? 8 : 4) + payload_length);\n\n\t\t\tbuffer[0] = 128 + (binary === true ? 0x02 : 0x01);\n\t\t\tbuffer[1] = (mask === true ? 128 : 0) + 126;\n\n\t\t\tbuffer[2] = (payload_length >> 8) & 0xff;\n\t\t\tbuffer[3] = (payload_length >> 0) & 0xff;\n\n\n\t\t\tif (mask === true) {\n\n\t\t\t\tmask_data.copy(buffer, 4);\n\t\t\t\tpayload_data.copy(buffer, 8);\n\n\t\t\t} else {\n\n\t\t\t\tpayload_data.copy(buffer, 4);\n\n\t\t\t}\n\n\n\t\t// 7 Bit Payload Length\n\t\t} else {\n\n\t\t\tbuffer = Buffer.alloc((mask === true ? 6 : 2) + payload_length);\n\n\t\t\tbuffer[0] = 128 + (binary === true ? 0x02 : 0x01);\n\t\t\tbuffer[1] = (mask === true ? 128 : 0) + payload_length;\n\n\n\t\t\tif (mask === true) {\n\n\t\t\t\tmask_data.copy(buffer, 2);\n\t\t\t\tpayload_data.copy(buffer, 6);\n\n\t\t\t} else {\n\n\t\t\t\tpayload_data.copy(buffer, 2);\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn buffer;\n\n\t};\n\n\tconst _decode_buffer = function(buffer) {\n\n\t\tlet fragment = this.__fragment;\n\t\tlet chunk    = {\n\t\t\tbytes:   -1,\n\t\t\theaders: {},\n\t\t\tpayload: null\n\t\t};\n\n\n\t\tif (buffer.length <= 2) {\n\t\t\treturn chunk;\n\t\t}\n\n\n\t\tlet fin            = (buffer[0] & 128) === 128;\n\t\t// let rsv1        = (buffer[0] & 64) === 64;\n\t\t// let rsv2        = (buffer[0] & 32) === 32;\n\t\t// let rsv3        = (buffer[0] & 16) === 16;\n\t\tlet operator       = buffer[0] & 15;\n\t\tlet mask           = (buffer[1] & 128) === 128;\n\t\tlet mask_data      = Buffer.alloc(4);\n\t\tlet payload_length = buffer[1] & 127;\n\t\tlet payload_data   = null;\n\n\t\tif (payload_length <= 125) {\n\n\t\t\tif (mask === true) {\n\t\t\t\tmask_data    = buffer.slice(2, 6);\n\t\t\t\tpayload_data = buffer.slice(6, 6 + payload_length);\n\t\t\t\tchunk.bytes  = 6 + payload_length;\n\t\t\t} else {\n\t\t\t\tmask_data    = null;\n\t\t\t\tpayload_data = buffer.slice(2, 2 + payload_length);\n\t\t\t\tchunk.bytes  = 2 + payload_length;\n\t\t\t}\n\n\t\t} else if (payload_length === 126) {\n\n\t\t\tpayload_length = (buffer[2] << 8) + buffer[3];\n\n\n\t\t\tif (payload_length > buffer.length) {\n\t\t\t\treturn chunk;\n\t\t\t}\n\n\n\t\t\tif (mask === true) {\n\t\t\t\tmask_data    = buffer.slice(4, 8);\n\t\t\t\tpayload_data = buffer.slice(8, 8 + payload_length);\n\t\t\t\tchunk.bytes  = 8 + payload_length;\n\t\t\t} else {\n\t\t\t\tmask_data    = null;\n\t\t\t\tpayload_data = buffer.slice(4, 4 + payload_length);\n\t\t\t\tchunk.bytes  = 4 + payload_length;\n\t\t\t}\n\n\t\t} else if (payload_length === 127) {\n\n\t\t\tlet hi = (buffer[2] * 0x1000000) + ((buffer[3] << 16) | (buffer[4] << 8) | buffer[5]);\n\t\t\tlet lo = (buffer[6] * 0x1000000) + ((buffer[7] << 16) | (buffer[8] << 8) | buffer[9]);\n\n\n\t\t\tpayload_length = (hi * 4294967296) + lo;\n\n\n\t\t\tif (payload_length > buffer.length) {\n\t\t\t\treturn chunk;\n\t\t\t}\n\n\n\t\t\tif (mask === true) {\n\t\t\t\tmask_data    = buffer.slice(10, 14);\n\t\t\t\tpayload_data = buffer.slice(14, 14 + payload_length);\n\t\t\t\tchunk.bytes  = 14 + payload_length;\n\t\t\t} else {\n\t\t\t\tmask_data    = null;\n\t\t\t\tpayload_data = buffer.slice(10, 10 + payload_length);\n\t\t\t\tchunk.bytes  = 10 + payload_length;\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (mask_data !== null) {\n\n\t\t\tpayload_data = payload_data.map(function(value, index) {\n\t\t\t\treturn value ^ mask_data[index % 4];\n\t\t\t});\n\n\t\t}\n\n\n\t\t// 0: Continuation Frame (Fragmentation)\n\t\tif (operator === 0x00) {\n\n\t\t\tif (payload_data !== null) {\n\n\t\t\t\tlet payload = Buffer.alloc(fragment.payload.length + payload_length);\n\n\t\t\t\tfragment.payload.copy(payload, 0);\n\t\t\t\tpayload_data.copy(payload, fragment.payload.length);\n\n\t\t\t\tfragment.payload = payload;\n\n\t\t\t}\n\n\n\t\t\tif (fin === true) {\n\n\t\t\t\tlet tmp0 = _JSON.decode(fragment.payload);\n\t\t\t\tif (tmp0 !== null) {\n\t\t\t\t\tchunk.headers = tmp0.headers || {};\n\t\t\t\t\tchunk.payload = tmp0.payload || null;\n\t\t\t\t}\n\n\t\t\t\tfragment.operator = 0x00;\n\t\t\t\tfragment.payload  = Buffer.alloc(0);\n\n\t\t\t}\n\n\n\t\t// 1: Text Frame\n\t\t} else if (operator === 0x01) {\n\n\t\t\tif (fin === true) {\n\n\t\t\t\tlet tmp1 = _JSON.decode(payload_data);\n\t\t\t\tif (tmp1 !== null) {\n\t\t\t\t\tchunk.headers = tmp1.headers || {};\n\t\t\t\t\tchunk.payload = tmp1.payload || null;\n\t\t\t\t}\n\n\t\t\t} else if (payload_data !== null) {\n\n\t\t\t\tlet payload = Buffer.alloc(fragment.payload.length + payload_length);\n\n\t\t\t\tfragment.payload.copy(payload, 0);\n\t\t\t\tpayload_data.copy(payload, fragment.payload.length);\n\n\t\t\t\tfragment.payload  = payload;\n\t\t\t\tfragment.operator = operator;\n\n\t\t\t}\n\n\n\t\t// 2: Binary Frame\n\t\t} else if (operator === 0x02) {\n\n\t\t\tif (fin === true) {\n\n\t\t\t\tlet tmp2 = _JSON.decode(payload_data);\n\t\t\t\tif (tmp2 !== null) {\n\t\t\t\t\tchunk.headers = tmp2.headers || {};\n\t\t\t\t\tchunk.payload = tmp2.payload || null;\n\t\t\t\t}\n\n\t\t\t} else if (payload_data !== null) {\n\n\t\t\t\tlet payload = Buffer.alloc(fragment.payload.length + payload_length);\n\n\t\t\t\tfragment.payload.copy(payload, 0);\n\t\t\t\tpayload_data.copy(payload, fragment.payload.length);\n\n\t\t\t\tfragment.payload  = payload;\n\t\t\t\tfragment.operator = operator;\n\n\t\t\t}\n\n\n\t\t// 8: Connection Close\n\t\t} else if (operator === 0x08) {\n\n\t\t\tchunk.payload = this.close(Composite.STATUS.normal_closure);\n\n\n\t\t// 9: Ping Frame\n\t\t} else if (operator === 0x09) {\n\n\t\t\tchunk.payload = _on_ping_frame.call(this);\n\n\n\t\t// 10: Pong Frame\n\t\t} else if (operator === 0x0a) {\n\n\t\t\tchunk.payload = _on_pong_frame.call(this);\n\n\n\t\t// 3-7: Reserved Non-Control Frames, 11-15: Reserved Control Frames\n\t\t} else {\n\n\t\t\tchunk.payload = this.close(Composite.STATUS.protocol_error);\n\n\t\t}\n\n\n\t\treturn chunk;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Composite = function(data) {\n\n\t\tlet states = Object.assign({}, data);\n\n\n\t\tthis.type = lychee.enumof(Composite.TYPE, states.type) ? states.type : null;\n\n\t\tthis.__buffer   = Buffer.alloc(0);\n\t\tthis.__fragment = {\n\t\t\toperator: 0x00,\n\t\t\tpayload:  Buffer.alloc(0)\n\t\t};\n\t\tthis.__isClosed = false;\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tif (this.type === null) {\n\t\t\t\tconsole.error('lychee.net.protocol.WS: Invalid (lychee.net.protocol.WS.TYPE) type.');\n\t\t\t}\n\n\t\t}\n\n\t\tstates = null;\n\n\t};\n\n\n\t// Composite.FRAMESIZE = 32768; // 32kB\n\tComposite.FRAMESIZE = 0x800000; // 8MiB\n\n\n\tComposite.STATUS = {\n\n\t\t// IESG_HYBI\n\t\tnormal_closure:  1000,\n\t\tprotocol_error:  1002,\n\t\tmessage_too_big: 1009\n\n\t\t// IESG_HYBI\n\t\t// going_away:         1001,\n\t\t// unsupported_data:   1003,\n\t\t// no_status_received: 1005,\n\t\t// abnormal_closure:   1006,\n\t\t// invalid_payload:    1007,\n\t\t// policy_violation:   1008,\n\t\t// missing_extension:  1010,\n\t\t// internal_error:     1011,\n\n\t\t// IESG_HYBI Current\n\t\t// service_restart:    1012,\n\t\t// service_overload:   1013,\n\n\t\t// IESG_HYBI\n\t\t// tls_handshake:      1015\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\t// 'default': 0, (deactivated)\n\t\t'client': 1,\n\t\t'remote': 2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet states = {};\n\n\n\t\t\tif (this.type !== null) states.type = this.type;\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.net.protocol.WS',\n\t\t\t\t'arguments':   [ states ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * PROTOCOL API\n\t\t */\n\n\t\tsend: function(payload, headers, binary) {\n\n\t\t\tpayload = payload instanceof Buffer ? payload : null;\n\t\t\theaders = headers instanceof Object ? headers : null;\n\t\t\tbinary  = binary === true;\n\n\n\t\t\tif (payload !== null) {\n\n\t\t\t\tif (this.__isClosed === false) {\n\t\t\t\t\treturn _encode_buffer.call(this, payload, headers, binary);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\treceive: function(blob) {\n\n\t\t\tblob = blob instanceof Buffer ? blob : null;\n\n\n\t\t\tlet chunks = [];\n\n\n\t\t\tif (blob !== null) {\n\n\t\t\t\tif (blob.length > Composite.FRAMESIZE) {\n\n\t\t\t\t\tchunks.push({\n\t\t\t\t\t\tpayload: this.close(Composite.STATUS.message_too_big)\n\t\t\t\t\t});\n\n\t\t\t\t} else if (this.__isClosed === false) {\n\n\t\t\t\t\tlet buf = this.__buffer;\n\t\t\t\t\tlet tmp = Buffer.alloc(buf.length + blob.length);\n\n\n\t\t\t\t\tbuf.copy(tmp);\n\t\t\t\t\tblob.copy(tmp, buf.length);\n\t\t\t\t\tbuf = tmp;\n\n\n\t\t\t\t\tlet chunk = _decode_buffer.call(this, buf);\n\n\t\t\t\t\twhile (chunk.bytes !== -1) {\n\n\t\t\t\t\t\tif (chunk.payload !== null) {\n\t\t\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif (buf.length - chunk.bytes > 0) {\n\n\t\t\t\t\t\t\ttmp = Buffer.alloc(buf.length - chunk.bytes);\n\t\t\t\t\t\t\tbuf.copy(tmp, 0, chunk.bytes);\n\t\t\t\t\t\t\tbuf = tmp;\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbuf = Buffer.alloc(0);\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tchunk = null;\n\t\t\t\t\t\tchunk = _decode_buffer.call(this, buf);\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tthis.__buffer = buf;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn chunks;\n\n\t\t},\n\n\t\tclose: function(status) {\n\n\t\t\tstatus = typeof status === 'number' ? status : Composite.STATUS.normal_closure;\n\n\n\t\t\tif (this.__isClosed === false) {\n\n\t\t\t\tlet buffer = Buffer.alloc(4);\n\n\t\t\t\tbuffer[0]  = 128 + 0x08;\n\t\t\t\tbuffer[1]  =   0 + 0x02;\n\n\t\t\t\tbuffer.write(String.fromCharCode((status >> 8) & 0xff) + String.fromCharCode((status >> 0) & 0xff), 2, 'binary');\n\n\t\t\t\tthis.__isClosed = true;\n\n\n\t\t\t\treturn buffer;\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tping: function() {\n\n\t\t\tlet buffer = _on_pong_frame.call(this);\n\t\t\tif (buffer !== null) {\n\t\t\t\treturn buffer;\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}}},"features":{"Storage":"function","localStorage":{},"sessionStorage":{},"addEventListener":"function","document":{"createElement":"function","querySelectorAll":"function"},"CanvasRenderingContext2D":"function","innerWidth":"number","innerHeight":"number","WebSocket":"function","XMLHttpRequest":"function"}}});
	if (environment !== null) {

		lychee.init(environment, {
			profile: {}
		});

	}

})(lychee, typeof global !== 'undefined' ? global : this);
</script>
</body>
</html>
